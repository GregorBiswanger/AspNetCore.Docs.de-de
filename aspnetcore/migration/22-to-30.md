---
title: Migrieren von ASP.net Core 2,2 zu 3,0
author: rick-anderson
description: Erfahren Sie, wie Sie ein ASP.net Core 2,2-Projekt zu ASP.net Core 3,0 migrieren.
ms.author: riande
ms.custom: mvc
ms.date: 05/03/2020
no-loc:
- Blazor
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: migration/22-to-30
ms.openlocfilehash: 228607cf0156e142afa441cfc861a1f19f512514
ms.sourcegitcommit: cd73744bd75fdefb31d25ab906df237f07ee7a0a
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/05/2020
ms.locfileid: "84452004"
---
# <a name="migrate-from-aspnet-core-22-to-30"></a><span data-ttu-id="61557-103">Migrieren von ASP.net Core 2,2 zu 3,0</span><span class="sxs-lookup"><span data-stu-id="61557-103">Migrate from ASP.NET Core 2.2 to 3.0</span></span>

<span data-ttu-id="61557-104">Von [Scott Adder](https://github.com/scottaddie) und [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="61557-104">By [Scott Addie](https://github.com/scottaddie) and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="61557-105">In diesem Artikel wird erläutert, wie ein vorhandenes ASP.net Core 2,2-Projekt auf ASP.net Core 3,0 aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="61557-105">This article explains how to update an existing ASP.NET Core 2.2 project to ASP.NET Core 3.0.</span></span> <span data-ttu-id="61557-106">Es ist möglicherweise hilfreich, ein neues ASP.net Core 3,0-Projekt zu erstellen:</span><span class="sxs-lookup"><span data-stu-id="61557-106">It might be helpful to create a new ASP.NET Core 3.0 project to:</span></span>

* <span data-ttu-id="61557-107">Vergleichen Sie mit dem ASP.net Core 2,2-Code.</span><span class="sxs-lookup"><span data-stu-id="61557-107">Compare with the ASP.NET Core 2.2 code.</span></span>
* <span data-ttu-id="61557-108">Kopieren Sie die relevanten Änderungen in das Projekt ASP.net Core 3,0.</span><span class="sxs-lookup"><span data-stu-id="61557-108">Copy the relevant changes to your ASP.NET Core 3.0 project.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="61557-109">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="61557-109">Prerequisites</span></span>

# <a name="visual-studio"></a>[<span data-ttu-id="61557-110">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="61557-110">Visual Studio</span></span>](#tab/visual-studio)

[!INCLUDE[](~/includes/net-core-prereqs-vs-3.0.md)]

# <a name="visual-studio-code"></a>[<span data-ttu-id="61557-111">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="61557-111">Visual Studio Code</span></span>](#tab/visual-studio-code)

[!INCLUDE[](~/includes/net-core-prereqs-vsc-3.0.md)]

# <a name="visual-studio-for-mac"></a>[<span data-ttu-id="61557-112">Visual Studio für Mac</span><span class="sxs-lookup"><span data-stu-id="61557-112">Visual Studio for Mac</span></span>](#tab/visual-studio-mac)

[!INCLUDE[](~/includes/net-core-prereqs-mac-3.0.md)]

---

## <a name="update-net-core-sdk-version-in-globaljson"></a><span data-ttu-id="61557-113">Aktualisieren der .NET Core SDK-Version in „global.json“</span><span class="sxs-lookup"><span data-stu-id="61557-113">Update .NET Core SDK version in global.json</span></span>

<span data-ttu-id="61557-114">Wenn Ihre Lösung auf eine [globale. JSON](/dotnet/core/tools/global-json) -Datei basiert, um eine bestimmte .net Core SDK Version zu erreichen, aktualisieren Sie Ihre- `version` Eigenschaft auf die Version 3,0, die auf Ihrem Computer installiert ist:</span><span class="sxs-lookup"><span data-stu-id="61557-114">If your solution relies upon a [global.json](/dotnet/core/tools/global-json) file to target a specific .NET Core SDK version, update its `version` property to the 3.0 version installed on your machine:</span></span>

```json
{
  "sdk": {
    "version": "3.0.100"
  }
}
```

## <a name="update-the-project-file"></a><span data-ttu-id="61557-115">Aktualisieren der Projektdatei</span><span class="sxs-lookup"><span data-stu-id="61557-115">Update the project file</span></span>

### <a name="update-the-target-framework"></a><span data-ttu-id="61557-116">Aktualisieren des Ziel Frameworks</span><span class="sxs-lookup"><span data-stu-id="61557-116">Update the Target Framework</span></span>

<span data-ttu-id="61557-117">ASP.net Core 3,0 und höher wird nur unter .net Core ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="61557-117">ASP.NET Core 3.0 and later only run on .NET Core.</span></span> <span data-ttu-id="61557-118">Legen Sie für den [zielframeworkmoniker (TFM)](/dotnet/standard/frameworks) Folgendes fest `netcoreapp3.0` :</span><span class="sxs-lookup"><span data-stu-id="61557-118">Set the [Target Framework Moniker (TFM)](/dotnet/standard/frameworks) to `netcoreapp3.0`:</span></span>

[!code-xml[](22-to-30/samples/Web1.csproj?highlight=4)]

### <a name="remove-obsolete-package-references"></a><span data-ttu-id="61557-119">Veraltete Paket Verweise entfernen</span><span class="sxs-lookup"><span data-stu-id="61557-119">Remove obsolete package references</span></span>

<span data-ttu-id="61557-120">Eine große Anzahl von nuget-Paketen wird nicht für ASP.net Core 3,0 erstellt.</span><span class="sxs-lookup"><span data-stu-id="61557-120">A large number of NuGet packages aren't produced for ASP.NET Core 3.0.</span></span> <span data-ttu-id="61557-121">Solche Paket Verweise sollten aus der Projektdatei entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="61557-121">Such package references should be removed from your project file.</span></span> <span data-ttu-id="61557-122">Sehen Sie sich die folgende Projektdatei für eine ASP.net Core 2,2-Web-App an:</span><span class="sxs-lookup"><span data-stu-id="61557-122">Consider the following project file for an ASP.NET Core 2.2 web app:</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>netcoreapp2.2</TargetFramework>
    <AspNetCoreHostingModel>InProcess</AspNetCoreHostingModel>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.AspNetCore.App"/>
    <PackageReference Include="Microsoft.AspNetCore.Razor.Design" Version="2.2.0" PrivateAssets="All" />
  </ItemGroup>

</Project>
```

<span data-ttu-id="61557-123">Die aktualisierte Projektdatei für ASP.net Core 3,0:</span><span class="sxs-lookup"><span data-stu-id="61557-123">The updated project file for ASP.NET Core 3.0:</span></span>

[!code-xml[](22-to-30/samples/Web1.csproj?highlight=4)]

<span data-ttu-id="61557-124">Die aktualisierte ASP.net Core 3,0-Projektdatei:</span><span class="sxs-lookup"><span data-stu-id="61557-124">The updated ASP.NET Core 3.0 project file:</span></span>

* <span data-ttu-id="61557-125">In `<PropertyGroup>`:</span><span class="sxs-lookup"><span data-stu-id="61557-125">In the `<PropertyGroup>`:</span></span>
  * <span data-ttu-id="61557-126">Aktualisiert den TFM auf`netcoreapp3.0`</span><span class="sxs-lookup"><span data-stu-id="61557-126">Updates the TFM to `netcoreapp3.0`</span></span>
  * <span data-ttu-id="61557-127">Entfernt das- `<AspNetCoreHostingModel>` Element.</span><span class="sxs-lookup"><span data-stu-id="61557-127">Removes the `<AspNetCoreHostingModel>` element.</span></span> <span data-ttu-id="61557-128">Weitere Informationen finden Sie unter [in-Process-Hostingmodell](#in-process-hosting-model) in diesem Dokument.</span><span class="sxs-lookup"><span data-stu-id="61557-128">For more information, see [In-process hosting model](#in-process-hosting-model) in this document.</span></span>

* <span data-ttu-id="61557-129">In `<ItemGroup>`:</span><span class="sxs-lookup"><span data-stu-id="61557-129">In the `<ItemGroup>`:</span></span>
  * <span data-ttu-id="61557-130">`Microsoft.AspNetCore.App`wurde entfernt.</span><span class="sxs-lookup"><span data-stu-id="61557-130">`Microsoft.AspNetCore.App` is removed.</span></span> <span data-ttu-id="61557-131">Weitere Informationen finden Sie in diesem Dokument in der [frameworkreferenz](#framework-reference) .</span><span class="sxs-lookup"><span data-stu-id="61557-131">For more information, see [Framework reference](#framework-reference) in this document.</span></span>
  * <span data-ttu-id="61557-132">`Microsoft.AspNetCore.Razor.Design`wurde entfernt und in der folgenden Liste von Paketen, die nicht mehr erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="61557-132">`Microsoft.AspNetCore.Razor.Design` is removed and in the following list of packages no longer being produced.</span></span>

<span data-ttu-id="61557-133">Um die vollständige Liste der Pakete anzuzeigen, die nicht mehr erstellt werden, wählen Sie die folgende Erweiterungs Liste aus:</span><span class="sxs-lookup"><span data-stu-id="61557-133">To see the full list of packages that are no longer produced, select the following expand list:</span></span>

<details>
    <summary><span data-ttu-id="61557-134">Klicken Sie, um die Liste der Pakete zu erweitern, die nicht mehr erstellt werden</span><span class="sxs-lookup"><span data-stu-id="61557-134">Click to expand the list of packages no longer being produced</span></span></summary>
    <ul>
        <li><span data-ttu-id="61557-135">Microsoft.AspNetCore</span><span class="sxs-lookup"><span data-stu-id="61557-135">Microsoft.AspNetCore</span></span></li>
        <li><span data-ttu-id="61557-136">Microsoft.AspNetCore.All</span><span class="sxs-lookup"><span data-stu-id="61557-136">Microsoft.AspNetCore.All</span></span></li>
        <li><span data-ttu-id="61557-137">Microsoft.AspNetCore.App</span><span class="sxs-lookup"><span data-stu-id="61557-137">Microsoft.AspNetCore.App</span></span></li>
        <li><span data-ttu-id="61557-138">Microsoft.AspNetCore.Antiforgery</span><span class="sxs-lookup"><span data-stu-id="61557-138">Microsoft.AspNetCore.Antiforgery</span></span></li>
        <li><span data-ttu-id="61557-139">Microsoft.AspNetCore.Authentication</span><span class="sxs-lookup"><span data-stu-id="61557-139">Microsoft.AspNetCore.Authentication</span></span></li>
        <li><span data-ttu-id="61557-140">Microsoft.AspNetCore.Authentication.Abstractions</span><span class="sxs-lookup"><span data-stu-id="61557-140">Microsoft.AspNetCore.Authentication.Abstractions</span></span></li>
        <li><span data-ttu-id="61557-141">Microsoft.AspNetCore.Authentication.Cookies</span><span class="sxs-lookup"><span data-stu-id="61557-141">Microsoft.AspNetCore.Authentication.Cookies</span></span></li>
        <li><span data-ttu-id="61557-142">Microsoft.AspNetCore.Authentication.Core</span><span class="sxs-lookup"><span data-stu-id="61557-142">Microsoft.AspNetCore.Authentication.Core</span></span></li>
        <li><span data-ttu-id="61557-143">Microsoft.AspNetCore.Authentication.OAuth</span><span class="sxs-lookup"><span data-stu-id="61557-143">Microsoft.AspNetCore.Authentication.OAuth</span></span></li>
        <li><span data-ttu-id="61557-144">Microsoft.AspNetCore.Authorization.Policy</span><span class="sxs-lookup"><span data-stu-id="61557-144">Microsoft.AspNetCore.Authorization.Policy</span></span></li>
        <li><span data-ttu-id="61557-145">Microsoft.AspNetCore.CookiePolicy</span><span class="sxs-lookup"><span data-stu-id="61557-145">Microsoft.AspNetCore.CookiePolicy</span></span></li>
        <li><span data-ttu-id="61557-146">Microsoft.AspNetCore.Cors</span><span class="sxs-lookup"><span data-stu-id="61557-146">Microsoft.AspNetCore.Cors</span></span></li>
        <li><span data-ttu-id="61557-147">Microsoft.AspNetCore.Diagnostics</span><span class="sxs-lookup"><span data-stu-id="61557-147">Microsoft.AspNetCore.Diagnostics</span></span></li>
        <li><span data-ttu-id="61557-148">Microsoft.AspNetCore.Diagnostics.HealthChecks</span><span class="sxs-lookup"><span data-stu-id="61557-148">Microsoft.AspNetCore.Diagnostics.HealthChecks</span></span></li>
        <li><span data-ttu-id="61557-149">Microsoft.AspNetCore.HostFiltering</span><span class="sxs-lookup"><span data-stu-id="61557-149">Microsoft.AspNetCore.HostFiltering</span></span></li>
        <li><span data-ttu-id="61557-150">Microsoft.AspNetCore.Hosting</span><span class="sxs-lookup"><span data-stu-id="61557-150">Microsoft.AspNetCore.Hosting</span></span></li>
        <li><span data-ttu-id="61557-151">Microsoft.AspNetCore.Hosting.Abstractions</span><span class="sxs-lookup"><span data-stu-id="61557-151">Microsoft.AspNetCore.Hosting.Abstractions</span></span></li>
        <li><span data-ttu-id="61557-152">Microsoft.AspNetCore.Hosting.Server.Abstractions</span><span class="sxs-lookup"><span data-stu-id="61557-152">Microsoft.AspNetCore.Hosting.Server.Abstractions</span></span></li>
        <li><span data-ttu-id="61557-153">Microsoft.AspNetCore.Http</span><span class="sxs-lookup"><span data-stu-id="61557-153">Microsoft.AspNetCore.Http</span></span></li>
        <li><span data-ttu-id="61557-154">Microsoft.AspNetCore.Http.Abstractions</span><span class="sxs-lookup"><span data-stu-id="61557-154">Microsoft.AspNetCore.Http.Abstractions</span></span></li>
        <li><span data-ttu-id="61557-155">Microsoft.AspNetCore.Http.Connections</span><span class="sxs-lookup"><span data-stu-id="61557-155">Microsoft.AspNetCore.Http.Connections</span></span></li>
        <li><span data-ttu-id="61557-156">Microsoft.AspNetCore.Http.Extensions</span><span class="sxs-lookup"><span data-stu-id="61557-156">Microsoft.AspNetCore.Http.Extensions</span></span></li>
        <li><span data-ttu-id="61557-157">Microsoft.AspNetCore.HttpOverrides</span><span class="sxs-lookup"><span data-stu-id="61557-157">Microsoft.AspNetCore.HttpOverrides</span></span></li>
        <li><span data-ttu-id="61557-158">Microsoft.AspNetCore.HttpsPolicy</span><span class="sxs-lookup"><span data-stu-id="61557-158">Microsoft.AspNetCore.HttpsPolicy</span></span></li>
        <li><span data-ttu-id="61557-159">Microsoft. aspnetcore.Identity</span><span class="sxs-lookup"><span data-stu-id="61557-159">Microsoft.AspNetCore.Identity</span></span></li>
        <li><span data-ttu-id="61557-160">Microsoft.AspNetCore.Localization</span><span class="sxs-lookup"><span data-stu-id="61557-160">Microsoft.AspNetCore.Localization</span></span></li>
        <li><span data-ttu-id="61557-161">Microsoft.AspNetCore.Localization.Routing</span><span class="sxs-lookup"><span data-stu-id="61557-161">Microsoft.AspNetCore.Localization.Routing</span></span></li>
        <li><span data-ttu-id="61557-162">Microsoft.AspNetCore.Mvc</span><span class="sxs-lookup"><span data-stu-id="61557-162">Microsoft.AspNetCore.Mvc</span></span></li>
        <li><span data-ttu-id="61557-163">Microsoft.AspNetCore.Mvc.Abstractions</span><span class="sxs-lookup"><span data-stu-id="61557-163">Microsoft.AspNetCore.Mvc.Abstractions</span></span></li>
        <li><span data-ttu-id="61557-164">Microsoft.AspNetCore.Mvc.Analyzers</span><span class="sxs-lookup"><span data-stu-id="61557-164">Microsoft.AspNetCore.Mvc.Analyzers</span></span></li>
        <li><span data-ttu-id="61557-165">Microsoft.AspNetCore.Mvc.ApiExplorer</span><span class="sxs-lookup"><span data-stu-id="61557-165">Microsoft.AspNetCore.Mvc.ApiExplorer</span></span></li>
        <li><span data-ttu-id="61557-166">Microsoft.AspNetCore.Mvc.Api.Analyzers</span><span class="sxs-lookup"><span data-stu-id="61557-166">Microsoft.AspNetCore.Mvc.Api.Analyzers</span></span></li>
        <li><span data-ttu-id="61557-167">Microsoft.AspNetCore.Mvc.Core</span><span class="sxs-lookup"><span data-stu-id="61557-167">Microsoft.AspNetCore.Mvc.Core</span></span></li>
        <li><span data-ttu-id="61557-168">Microsoft.AspNetCore.Mvc.Cors</span><span class="sxs-lookup"><span data-stu-id="61557-168">Microsoft.AspNetCore.Mvc.Cors</span></span></li>
        <li><span data-ttu-id="61557-169">Microsoft.AspNetCore.Mvc.DataAnnotations</span><span class="sxs-lookup"><span data-stu-id="61557-169">Microsoft.AspNetCore.Mvc.DataAnnotations</span></span></li>
        <li><span data-ttu-id="61557-170">Microsoft.AspNetCore.Mvc.Formatters.Json</span><span class="sxs-lookup"><span data-stu-id="61557-170">Microsoft.AspNetCore.Mvc.Formatters.Json</span></span></li>
        <li><span data-ttu-id="61557-171">Microsoft.AspNetCore.Mvc.Formatters.Xml</span><span class="sxs-lookup"><span data-stu-id="61557-171">Microsoft.AspNetCore.Mvc.Formatters.Xml</span></span></li>
        <li><span data-ttu-id="61557-172">Microsoft.AspNetCore.Mvc.Localization</span><span class="sxs-lookup"><span data-stu-id="61557-172">Microsoft.AspNetCore.Mvc.Localization</span></span></li>
        <li><span data-ttu-id="61557-173">Microsoft. aspnetcore. MVC.Razor</span><span class="sxs-lookup"><span data-stu-id="61557-173">Microsoft.AspNetCore.Mvc.Razor</span></span></li>
        <li><span data-ttu-id="61557-174">Microsoft. aspnetcore. MVC. Razor . Viewcompilation</span><span class="sxs-lookup"><span data-stu-id="61557-174">Microsoft.AspNetCore.Mvc.Razor.ViewCompilation</span></span></li>
        <li><span data-ttu-id="61557-175">Microsoft.AspNetCore.Mvc.RazorPages</span><span class="sxs-lookup"><span data-stu-id="61557-175">Microsoft.AspNetCore.Mvc.RazorPages</span></span></li>
        <li><span data-ttu-id="61557-176">Microsoft.AspNetCore.Mvc.TagHelpers</span><span class="sxs-lookup"><span data-stu-id="61557-176">Microsoft.AspNetCore.Mvc.TagHelpers</span></span></li>
        <li><span data-ttu-id="61557-177">Microsoft.AspNetCore.Mvc.ViewFeatures</span><span class="sxs-lookup"><span data-stu-id="61557-177">Microsoft.AspNetCore.Mvc.ViewFeatures</span></span></li>
        <li><span data-ttu-id="61557-178">Microsoft. aspnetcore.Razor</span><span class="sxs-lookup"><span data-stu-id="61557-178">Microsoft.AspNetCore.Razor</span></span></li>
        <li><span data-ttu-id="61557-179">Microsoft. aspnetcore. Razor . Runtime</span><span class="sxs-lookup"><span data-stu-id="61557-179">Microsoft.AspNetCore.Razor.Runtime</span></span></li>
        <li><span data-ttu-id="61557-180">Microsoft. aspnetcore. Razor . Ausge</span><span class="sxs-lookup"><span data-stu-id="61557-180">Microsoft.AspNetCore.Razor.Design</span></span></li>
        <li><span data-ttu-id="61557-181">Microsoft.AspNetCore.ResponseCaching</span><span class="sxs-lookup"><span data-stu-id="61557-181">Microsoft.AspNetCore.ResponseCaching</span></span></li>
        <li><span data-ttu-id="61557-182">Microsoft.AspNetCore.ResponseCaching.Abstractions</span><span class="sxs-lookup"><span data-stu-id="61557-182">Microsoft.AspNetCore.ResponseCaching.Abstractions</span></span></li>
        <li><span data-ttu-id="61557-183">Microsoft.AspNetCore.ResponseCompression</span><span class="sxs-lookup"><span data-stu-id="61557-183">Microsoft.AspNetCore.ResponseCompression</span></span></li>
        <li><span data-ttu-id="61557-184">Microsoft.AspNetCore.Rewrite</span><span class="sxs-lookup"><span data-stu-id="61557-184">Microsoft.AspNetCore.Rewrite</span></span></li>
        <li><span data-ttu-id="61557-185">Microsoft.AspNetCore.Routing</span><span class="sxs-lookup"><span data-stu-id="61557-185">Microsoft.AspNetCore.Routing</span></span></li>
        <li><span data-ttu-id="61557-186">Microsoft.AspNetCore.Routing.Abstractions</span><span class="sxs-lookup"><span data-stu-id="61557-186">Microsoft.AspNetCore.Routing.Abstractions</span></span></li>
        <li><span data-ttu-id="61557-187">Microsoft.AspNetCore.Server.HttpSys</span><span class="sxs-lookup"><span data-stu-id="61557-187">Microsoft.AspNetCore.Server.HttpSys</span></span></li>
        <li><span data-ttu-id="61557-188">Microsoft.AspNetCore.Server.IIS</span><span class="sxs-lookup"><span data-stu-id="61557-188">Microsoft.AspNetCore.Server.IIS</span></span></li>
        <li><span data-ttu-id="61557-189">Microsoft.AspNetCore.Server.IISIntegration</span><span class="sxs-lookup"><span data-stu-id="61557-189">Microsoft.AspNetCore.Server.IISIntegration</span></span></li>
        <li><span data-ttu-id="61557-190">Microsoft.AspNetCore.Server.Kestrel</span><span class="sxs-lookup"><span data-stu-id="61557-190">Microsoft.AspNetCore.Server.Kestrel</span></span></li>
        <li><span data-ttu-id="61557-191">Microsoft.AspNetCore.Server.Kestrel.Core</span><span class="sxs-lookup"><span data-stu-id="61557-191">Microsoft.AspNetCore.Server.Kestrel.Core</span></span></li>
        <li><span data-ttu-id="61557-192">Microsoft.AspNetCore.Server.Kestrel.Https</span><span class="sxs-lookup"><span data-stu-id="61557-192">Microsoft.AspNetCore.Server.Kestrel.Https</span></span></li>
        <li><span data-ttu-id="61557-193">Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions</span><span class="sxs-lookup"><span data-stu-id="61557-193">Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions</span></span></li>
        <li><span data-ttu-id="61557-194">Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets</span><span class="sxs-lookup"><span data-stu-id="61557-194">Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets</span></span></li>
        <li><span data-ttu-id="61557-195">Microsoft.AspNetCore.Session</span><span class="sxs-lookup"><span data-stu-id="61557-195">Microsoft.AspNetCore.Session</span></span></li>
        <li><span data-ttu-id="61557-196">Microsoft. aspnetcore.SignalR</span><span class="sxs-lookup"><span data-stu-id="61557-196">Microsoft.AspNetCore.SignalR</span></span></li>
        <li><span data-ttu-id="61557-197">Microsoft. aspnetcore. SignalR . Core</span><span class="sxs-lookup"><span data-stu-id="61557-197">Microsoft.AspNetCore.SignalR.Core</span></span></li>
        <li><span data-ttu-id="61557-198">Microsoft.AspNetCore.StaticFiles</span><span class="sxs-lookup"><span data-stu-id="61557-198">Microsoft.AspNetCore.StaticFiles</span></span></li>
        <li><span data-ttu-id="61557-199">Microsoft.AspNetCore.WebSockets</span><span class="sxs-lookup"><span data-stu-id="61557-199">Microsoft.AspNetCore.WebSockets</span></span></li>
        <li><span data-ttu-id="61557-200">Microsoft.AspNetCore.WebUtilities</span><span class="sxs-lookup"><span data-stu-id="61557-200">Microsoft.AspNetCore.WebUtilities</span></span></li>
        <li><span data-ttu-id="61557-201">Microsoft.Net.Http.Headers </span><span class="sxs-lookup"><span data-stu-id="61557-201">Microsoft.Net.Http.Headers</span></span></li>
    </ul>
</details>

### <a name="review-breaking-changes"></a><span data-ttu-id="61557-202">Wichtige Änderungen überprüfen</span><span class="sxs-lookup"><span data-stu-id="61557-202">Review breaking changes</span></span>

[<span data-ttu-id="61557-203">Wichtige Änderungen überprüfen</span><span class="sxs-lookup"><span data-stu-id="61557-203">Review breaking changes</span></span>](#break)

### <a name="framework-reference"></a><span data-ttu-id="61557-204">Frameworkverweis</span><span class="sxs-lookup"><span data-stu-id="61557-204">Framework reference</span></span>

<span data-ttu-id="61557-205">Features von ASP.net Core, die über eines der oben aufgeführten Pakete verfügbar waren, sind als Teil des frei `Microsoft.AspNetCore.App` gegebenen Frameworks verfügbar.</span><span class="sxs-lookup"><span data-stu-id="61557-205">Features of ASP.NET Core that were available through one of the packages listed above are available as part of the `Microsoft.AspNetCore.App` shared framework.</span></span> <span data-ttu-id="61557-206">Das *freigegebene Framework* ist der Satz von Assemblys (*DLL*-Dateien), die auf dem Computer installiert werden und eine Laufzeitkomponente sowie ein Zielpaket enthalten.</span><span class="sxs-lookup"><span data-stu-id="61557-206">The *shared framework* is the set of assemblies (*.dll* files) that are installed on the machine and includes a runtime component and a targeting pack.</span></span> <span data-ttu-id="61557-207">Weitere Informationen finden Sie unter [The shared framework](https://natemcmaster.com/blog/2018/08/29/netcore-primitives-2/) (Das freigegebene Framework).</span><span class="sxs-lookup"><span data-stu-id="61557-207">For more information, see [The shared framework](https://natemcmaster.com/blog/2018/08/29/netcore-primitives-2/).</span></span>

* <span data-ttu-id="61557-208">Projekte, die auf das `Microsoft.NET.Sdk.Web` SDK abzielen, verweisen implizit auf das `Microsoft.AspNetCore.App`-Framework.</span><span class="sxs-lookup"><span data-stu-id="61557-208">Projects that target the `Microsoft.NET.Sdk.Web` SDK implicitly reference the `Microsoft.AspNetCore.App` framework.</span></span>

  <span data-ttu-id="61557-209">Für diese Projekte sind keine weiteren Verweise erforderlich:</span><span class="sxs-lookup"><span data-stu-id="61557-209">No additional references are required for these projects:</span></span>

  ```xml
  <Project Sdk="Microsoft.NET.Sdk.Web">
    <PropertyGroup>
      <TargetFramework>netcoreapp3.0</TargetFramework>
    </PropertyGroup>
      ...
  </Project>
  ```

* <span data-ttu-id="61557-210">Projekte, die das Ziel `Microsoft.NET.Sdk` oder das `Microsoft.NET.Sdk.Razor` SDK sind, sollten eine explizite zu folgenden hinzufügen `FrameworkReference` `Microsoft.AspNetCore.App` :</span><span class="sxs-lookup"><span data-stu-id="61557-210">Projects that target `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Razor` SDK, should add an explicit `FrameworkReference` to `Microsoft.AspNetCore.App`:</span></span>

  ```xml
  <Project Sdk="Microsoft.NET.Sdk.Razor">
    <PropertyGroup>
      <TargetFramework>netcoreapp3.0</TargetFramework>
    </PropertyGroup>

    <ItemGroup>
      <FrameworkReference Include="Microsoft.AspNetCore.App" />
    </ItemGroup>
      ...
  </Project>
  ```

#### <a name="framework-dependent-builds-using-docker"></a><span data-ttu-id="61557-211">Framework-abhängige Builds mithilfe von Docker</span><span class="sxs-lookup"><span data-stu-id="61557-211">Framework-dependent builds using Docker</span></span>

<span data-ttu-id="61557-212">Framework-abhängige Builds von Konsolen-apps, die ein Paket verwenden, das vom ASP.net Core [Shared Framework](https://natemcmaster.com/blog/2018/08/29/netcore-primitives-2/) abhängt, können den folgenden Laufzeitfehler verursachen:</span><span class="sxs-lookup"><span data-stu-id="61557-212">Framework-dependent builds of console apps that use a package that depends on the ASP.NET Core [shared framework](https://natemcmaster.com/blog/2018/08/29/netcore-primitives-2/) may give the following runtime error:</span></span>

```console
It was not possible to find any compatible framework version
The specified framework 'Microsoft.AspNetCore.App', version '3.0.0' was not found.
  - No frameworks were found.
```

<span data-ttu-id="61557-213">`Microsoft.AspNetCore.App`ist das freigegebene Framework, das die ASP.net Core Runtime enthält und nur auf dem docker-Image [dotnet/Core/ASPNET](https://hub.docker.com/_/microsoft-dotnet-core-aspnet/) vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="61557-213">`Microsoft.AspNetCore.App` is the shared framework containing the ASP.NET Core runtime and is only present on the [dotnet/core/aspnet](https://hub.docker.com/_/microsoft-dotnet-core-aspnet/) Docker image.</span></span> <span data-ttu-id="61557-214">Das 3,0 SDK reduziert die Größe von Framework-abhängigen Builds mit ASP.net Core, indem doppelte Kopien von Bibliotheken, die im freigegebenen Framework verfügbar sind, nicht eingeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="61557-214">The 3.0 SDK reduces the size of framework-dependent builds using ASP.NET Core by not including duplicate copies of libraries that are available in the shared framework.</span></span> <span data-ttu-id="61557-215">Dies ist eine potenzielle Einsparung von bis zu 18 MB, aber es ist erforderlich, dass die ASP.net Core-Laufzeit zum Ausführen der app vorhanden bzw. installiert ist.</span><span class="sxs-lookup"><span data-stu-id="61557-215">This is a potential savings of up to 18 MB, but it requires that the ASP.NET Core runtime be present / installed to run the app.</span></span>

<span data-ttu-id="61557-216">Überprüfen Sie die *runtimeconfig. JSON* -Datei, die während der Erstellung/Veröffentlichung Ihrer APP generiert wird, um zu bestimmen, ob die APP eine Abhängigkeit (entweder direkt oder indirekt) auf dem ASP.net Core freigegebenen Framework aufweist.</span><span class="sxs-lookup"><span data-stu-id="61557-216">To determine if the app has a dependency (either direct or indirect) on the ASP.NET Core shared framework, examine the *runtimeconfig.json* file generated during a build/publish of your app.</span></span> <span data-ttu-id="61557-217">Die folgende JSON-Datei zeigt eine Abhängigkeit vom ASP.net Core Shared Framework:</span><span class="sxs-lookup"><span data-stu-id="61557-217">The following JSON file shows a dependency on the ASP.NET Core shared framework:</span></span>

```json
{
  "runtimeOptions": {
    "tfm": "netcoreapp3.0",
    "framework": {
      "name": "Microsoft.AspNetCore.App",
      "version": "3.0.0"
    },
    "configProperties": {
      "System.GC.Server": true
    }
  }
}
```

<span data-ttu-id="61557-218">Wenn Ihre APP docker verwendet, verwenden Sie ein Basis Image, das ASP.net Core 3,0 enthält.</span><span class="sxs-lookup"><span data-stu-id="61557-218">If your app is using Docker, use a base image that includes ASP.NET Core 3.0.</span></span> <span data-ttu-id="61557-219">Beispiel: `docker pull mcr.microsoft.com/dotnet/core/aspnet:3.0`.</span><span class="sxs-lookup"><span data-stu-id="61557-219">For example, `docker pull mcr.microsoft.com/dotnet/core/aspnet:3.0`.</span></span>

### <a name="add-package-references-for-removed-assemblies"></a><span data-ttu-id="61557-220">Paket Verweise für entfernte Assemblys hinzufügen</span><span class="sxs-lookup"><span data-stu-id="61557-220">Add package references for removed assemblies</span></span>

<span data-ttu-id="61557-221">ASP.net Core 3,0 entfernt einige Assemblys, die zuvor Teil des `Microsoft.AspNetCore.App` Paket Verweises waren.</span><span class="sxs-lookup"><span data-stu-id="61557-221">ASP.NET Core 3.0 removes some assemblies that were previously part of the `Microsoft.AspNetCore.App` package reference.</span></span> <span data-ttu-id="61557-222">Um zu visualisieren, welche Assemblys entfernt wurden, vergleichen Sie die beiden freigegebenen frameworkordner</span><span class="sxs-lookup"><span data-stu-id="61557-222">To visualize which assemblies were removed, compare the two shared framework folders.</span></span> <span data-ttu-id="61557-223">Beispielsweise ein Vergleich der Versionen 2.2.7 und 3.0.0:</span><span class="sxs-lookup"><span data-stu-id="61557-223">For example, a comparison of versions 2.2.7 and 3.0.0:</span></span>

![Vergleich von Shared Framework](22-to-30/_static/assembly-diff.png)

<span data-ttu-id="61557-225">Um die von den entfernten Assemblys bereitgestellten Funktionen weiterhin zu verwenden, verweisen Sie auf die 3,0-Versionen der entsprechenden Pakete:</span><span class="sxs-lookup"><span data-stu-id="61557-225">To continue using features provided by the removed assemblies, reference the 3.0 versions of the corresponding packages:</span></span>

* <span data-ttu-id="61557-226">Bei einer Vorlagen generierten Web-App mit **einzelnen Benutzerkonten** müssen die folgenden Pakete hinzugefügt werden:</span><span class="sxs-lookup"><span data-stu-id="61557-226">A template-generated web app with **Individual User Accounts** requires adding the following packages:</span></span>

  [!code-xml[](22-to-30/samples/WebFull.csproj?highlight=9-13)]

* [<span data-ttu-id="61557-227">Microsoft.EntityFrameworkCore</span><span class="sxs-lookup"><span data-stu-id="61557-227">Microsoft.EntityFrameworkCore</span></span>](https://www.nuget.org/packages/Microsoft.EntityFrameworkCore)

  <span data-ttu-id="61557-228">Weitere Informationen zum Verweisen auf das Datenbankanbieter spezifische Paket finden Sie unter [Datenbankanbieter](/ef/core/providers/index).</span><span class="sxs-lookup"><span data-stu-id="61557-228">For more information on referencing the database provider-specific package, see [Database Providers](/ef/core/providers/index).</span></span>

* <span data-ttu-id="61557-229">Benutzeroberfläche von Identity</span><span class="sxs-lookup"><span data-stu-id="61557-229">Identity UI</span></span>

  <span data-ttu-id="61557-230">Unterstützung für die [ Identity Benutzeroberfläche](xref:security/authentication/identity) kann durch Verweisen auf [Microsoft. aspnetcore. hinzugefügt Identity werden. UI](https://www.nuget.org/packages/Microsoft.AspNetCore.Identity.UI) -Paket.</span><span class="sxs-lookup"><span data-stu-id="61557-230">Support for [Identity UI](xref:security/authentication/identity) can be added by referencing the [Microsoft.AspNetCore.Identity.UI](https://www.nuget.org/packages/Microsoft.AspNetCore.Identity.UI) package.</span></span>

* <span data-ttu-id="61557-231">Spa-Dienste</span><span class="sxs-lookup"><span data-stu-id="61557-231">SPA Services</span></span>

  * [<span data-ttu-id="61557-232">Microsoft.AspNetCore.SpaServices</span><span class="sxs-lookup"><span data-stu-id="61557-232">Microsoft.AspNetCore.SpaServices</span></span>](https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices)
  * [<span data-ttu-id="61557-233">Microsoft. aspnetcore. Spaservices. Extensions</span><span class="sxs-lookup"><span data-stu-id="61557-233">Microsoft.AspNetCore.SpaServices.Extensions</span></span>](https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices.Extensions)

* <span data-ttu-id="61557-234">Authentifizierung: die Unterstützung für Authentifizierungs Abläufe von Drittanbietern ist als nuget-Pakete verfügbar:</span><span class="sxs-lookup"><span data-stu-id="61557-234">Authentication: Support for third-party authentication flows are available as NuGet packages:</span></span>

  * <span data-ttu-id="61557-235">Facebook OAuth ([Microsoft. aspnetcore. Authentication. Facebook](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.Facebook))</span><span class="sxs-lookup"><span data-stu-id="61557-235">Facebook OAuth ([Microsoft.AspNetCore.Authentication.Facebook](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.Facebook))</span></span>
  * <span data-ttu-id="61557-236">Google OAuth ([Microsoft. aspnetcore. Authentication. Google](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.Google))</span><span class="sxs-lookup"><span data-stu-id="61557-236">Google OAuth ([Microsoft.AspNetCore.Authentication.Google](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.Google))</span></span>
  * <span data-ttu-id="61557-237">Microsoft-Konto Authentifizierung ([Microsoft. aspnetcore. Authentication. microsoftaccount](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.MicrosoftAccount))</span><span class="sxs-lookup"><span data-stu-id="61557-237">Microsoft Account authentication ([Microsoft.AspNetCore.Authentication.MicrosoftAccount](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.MicrosoftAccount))</span></span>
  * <span data-ttu-id="61557-238">OpenID Connect-Authentifizierung ([Microsoft. aspnetcore. Authentication. openidconnect](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.OpenIdConnect))</span><span class="sxs-lookup"><span data-stu-id="61557-238">OpenID Connect authentication ([Microsoft.AspNetCore.Authentication.OpenIdConnect](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.OpenIdConnect))</span></span>
  * <span data-ttu-id="61557-239">OpenID Connect-bearertoken ([Microsoft. aspnetcore. Authentication. jwtbearertoken](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.JwtBearer))</span><span class="sxs-lookup"><span data-stu-id="61557-239">OpenID Connect bearer token ([Microsoft.AspNetCore.Authentication.JwtBearer](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.JwtBearer))</span></span>
  * <span data-ttu-id="61557-240">Twitter OAuth ([Microsoft. aspnetcore. Authentication. Twitter](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.Twitter))</span><span class="sxs-lookup"><span data-stu-id="61557-240">Twitter OAuth ([Microsoft.AspNetCore.Authentication.Twitter](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.Twitter))</span></span>
  * <span data-ttu-id="61557-241">Wsfederation-Authentifizierung ([Microsoft. aspnetcore. Authentication. wsfederation](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.WsFederation))</span><span class="sxs-lookup"><span data-stu-id="61557-241">WsFederation authentication ([Microsoft.AspNetCore.Authentication.WsFederation](https://www.nuget.org/packages/Microsoft.AspNetCore.Authentication.WsFederation))</span></span>

* <span data-ttu-id="61557-242">Unterstützung von Formatierung und Inhaltsaushandlung für `System.Net.HttpClient` : das nuget-Paket [Microsoft. Aspnet. WebAPI. Client](https://www.nuget.org/packages/Microsoft.AspNet.WebApi.Client/) bietet nützliche Erweiterbarkeit für `System.Net.HttpClient` mit APIs wie `ReadAsAsync` und `PostJsonAsync` .</span><span class="sxs-lookup"><span data-stu-id="61557-242">Formatting and content negotiation support for `System.Net.HttpClient`: The [Microsoft.AspNet.WebApi.Client](https://www.nuget.org/packages/Microsoft.AspNet.WebApi.Client/) NuGet package provides useful extensibility to `System.Net.HttpClient` with APIs such as `ReadAsAsync` and `PostJsonAsync`.</span></span>

* Razor<span data-ttu-id="61557-243">Lauf Zeit Kompilierung: die Unterstützung für die Lauf Zeit Kompilierung von Razor Sichten und Seiten ist nun Bestandteil von [Microsoft. aspnetcore. MVC. Razor Runtimecompilation](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation).</span><span class="sxs-lookup"><span data-stu-id="61557-243"> runtime compilation: Support for runtime compilation of Razor views and pages is now part of [Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation).</span></span>

* <span data-ttu-id="61557-244">MVC- `Newtonsoft.Json` Unterstützung (JSON.net): die Unterstützung für die Verwendung von MVC mit `Newtonsoft.Json` ist nun Bestandteil von [`Microsoft.AspNetCore.Mvc.NewtonsoftJson`](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson) .</span><span class="sxs-lookup"><span data-stu-id="61557-244">MVC `Newtonsoft.Json` (Json.NET) support: Support for using MVC with `Newtonsoft.Json` is now part of [`Microsoft.AspNetCore.Mvc.NewtonsoftJson`](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson).</span></span>

## <a name="startup-changes"></a><span data-ttu-id="61557-245">Start Änderungen</span><span class="sxs-lookup"><span data-stu-id="61557-245">Startup changes</span></span>

<span data-ttu-id="61557-246">Die folgende Abbildung zeigt die gelöschten und geänderten Zeilen in einer ASP.net Core-Web-App mit 2,2- Razor Seiten:</span><span class="sxs-lookup"><span data-stu-id="61557-246">The following image shows the deleted and changed lines in an ASP.NET Core 2.2 Razor Pages Web app:</span></span>

<span data-ttu-id="61557-247">![die gelöschten und geänderten Zeilen in einer ASP.net Core 2,2- Razor Web-App](22-to-30/_static/startup2.2.png)</span><span class="sxs-lookup"><span data-stu-id="61557-247">![the deleted and changed lines in an ASP.NET Core 2.2 Razor Web app](22-to-30/_static/startup2.2.png)</span></span>

<span data-ttu-id="61557-248">In der vorangehenden Abbildung ist gelöschter Code rot dargestellt.</span><span class="sxs-lookup"><span data-stu-id="61557-248">In the preceding image, deleted code is shown in red.</span></span> <span data-ttu-id="61557-249">Der gelöschte Code zeigt keinen Code für Cookie-Optionen an, der vor dem Vergleichen der Dateien gelöscht wurde.</span><span class="sxs-lookup"><span data-stu-id="61557-249">The deleted code doesn't show cookie options code, which was deleted prior to comparing the files.</span></span>

<span data-ttu-id="61557-250">In der folgenden Abbildung werden die hinzugefügten und geänderten Zeilen in einer ASP.net Core-Web-App mit 3,0- Razor Seiten angezeigt</span><span class="sxs-lookup"><span data-stu-id="61557-250">The following image shows the added and changed lines in an ASP.NET Core 3.0 Razor Pages Web app:</span></span>

<span data-ttu-id="61557-251">![die hinzugefügten und geänderten Zeilen in einer ASP.net Core 3,0- Razor Web-App](22-to-30/_static/startup3.0.png)</span><span class="sxs-lookup"><span data-stu-id="61557-251">![the added and changed lines in an ASP.NET Core 3.0 Razor Web app](22-to-30/_static/startup3.0.png)</span></span>

<span data-ttu-id="61557-252">In der vorangehenden Abbildung ist der hinzugefügte Code grün dargestellt.</span><span class="sxs-lookup"><span data-stu-id="61557-252">In the preceding image, added code is shown in green.</span></span> <span data-ttu-id="61557-253">Weitere Informationen zu den folgenden Änderungen:</span><span class="sxs-lookup"><span data-stu-id="61557-253">For information on the following changes:</span></span>

* <span data-ttu-id="61557-254">`services.AddMvc`Informationen zu finden Sie unter `services.AddRazorPages` [MVC-Dienst Registrierung](#mvc-service-registration) in diesem Dokument.</span><span class="sxs-lookup"><span data-stu-id="61557-254">`services.AddMvc` to `services.AddRazorPages`, see [MVC service registration](#mvc-service-registration) in this document.</span></span>
* <span data-ttu-id="61557-255">`CompatibilityVersion`finden Sie unter <xref:mvc/compatibility-version> .</span><span class="sxs-lookup"><span data-stu-id="61557-255">`CompatibilityVersion`, see <xref:mvc/compatibility-version>.</span></span>
* <span data-ttu-id="61557-256">`IHostingEnvironment`zu `IWebHostEnvironment` finden Sie [diese GitHub-Ankündigung](https://github.com/dotnet/AspNetCore/issues/7749).</span><span class="sxs-lookup"><span data-stu-id="61557-256">`IHostingEnvironment` to `IWebHostEnvironment`, see [this GitHub announcement](https://github.com/dotnet/AspNetCore/issues/7749).</span></span>
* <span data-ttu-id="61557-257">`app.UseAuthorization`wurde den Vorlagen hinzugefügt, um anzuzeigen, dass die Middleware für die Bestell Autorisierung hinzugefügt werden muss.</span><span class="sxs-lookup"><span data-stu-id="61557-257">`app.UseAuthorization` was added to the templates to show the order authorization middleware must be added.</span></span> <span data-ttu-id="61557-258">Wenn die APP keine Autorisierung verwendet, können Sie den-Befehl problemlos entfernen `app.UseAuthorization` .</span><span class="sxs-lookup"><span data-stu-id="61557-258">If the app doesn't use authorization, you can safely remove the call to `app.UseAuthorization`.</span></span>
* <span data-ttu-id="61557-259">`app.UseEndpoints`finden Sie in diesem Dokument unter [ Razor Seiten](#razor-pages) oder [Migrieren von "Startup. configure](#migrate-startupconfigure) ".</span><span class="sxs-lookup"><span data-stu-id="61557-259">`app.UseEndpoints`, see [Razor Pages](#razor-pages) or [Migrate Startup.Configure](#migrate-startupconfigure) in this document.</span></span>

### <a name="analyzer-support"></a><span data-ttu-id="61557-260">Analyse Unterstützung</span><span class="sxs-lookup"><span data-stu-id="61557-260">Analyzer support</span></span>

<span data-ttu-id="61557-261">Projekte, die `Microsoft.NET.Sdk.Web` implizit auf Analysen abzielen, die zuvor als Teil des Pakets [Microsoft. aspnetcore. MVC. Analysen](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Analyzers/) ausgeliefert wurden.</span><span class="sxs-lookup"><span data-stu-id="61557-261">Projects that target `Microsoft.NET.Sdk.Web` implicitly reference analyzers previously shipped as part of the [Microsoft.AspNetCore.Mvc.Analyzers](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Analyzers/) package.</span></span> <span data-ttu-id="61557-262">Es sind keine zusätzlichen Verweise erforderlich, um diese zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="61557-262">No additional references are required to enable these.</span></span>

<span data-ttu-id="61557-263">Wenn Ihre APP [API-Analysen](xref:web-api/advanced/analyzers) verwendet, die zuvor mit dem Paket [Microsoft. aspnetcore. MVC. API. Analysen](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Api.Analyzers/) ausgeliefert wurden, bearbeiten Sie die Projektdatei so, dass Sie auf die Analysen verweist, die als Teil des .net Core Web SDK ausgeliefert werden:</span><span class="sxs-lookup"><span data-stu-id="61557-263">If your app uses [API analyzers](xref:web-api/advanced/analyzers) previously shipped using the [Microsoft.AspNetCore.Mvc.Api.Analyzers](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Api.Analyzers/) package, edit your project file to reference the analyzers shipped as part of the .NET Core Web SDK:</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
    <PropertyGroup>
        <TargetFramework>netcoreapp3.0</TargetFramework>
        <IncludeOpenAPIAnalyzers>true</IncludeOpenAPIAnalyzers>
    </PropertyGroup>

    ...
</Project>
```

### <a name="razor-class-library"></a>Razor<span data-ttu-id="61557-264">Klassenbibliothek</span><span class="sxs-lookup"><span data-stu-id="61557-264"> Class Library</span></span>

Razor<span data-ttu-id="61557-265">In Klassen Bibliotheks Projekten, die Benutzeroberflächen Komponenten für MVC bereitstellen, muss die- `AddRazorSupportForMvc` Eigenschaft in der Projektdatei festgelegt werden:</span><span class="sxs-lookup"><span data-stu-id="61557-265"> Class Library projects that provide UI components for MVC must set the `AddRazorSupportForMvc` property in the project file:</span></span>

```xml
<PropertyGroup>
  <AddRazorSupportForMvc>true</AddRazorSupportForMvc>
</PropertyGroup>
```

### <a name="in-process-hosting-model"></a><span data-ttu-id="61557-266">In-Process-Hostingmodell</span><span class="sxs-lookup"><span data-stu-id="61557-266">In-process hosting model</span></span>

<span data-ttu-id="61557-267">-Projekte werden standardmäßig in ASP.net Core 3,0 oder höher auf das [in-Process-Hostingmodell](xref:host-and-deploy/aspnet-core-module#in-process-hosting-model) eingestellt.</span><span class="sxs-lookup"><span data-stu-id="61557-267">Projects default to the [in-process hosting model](xref:host-and-deploy/aspnet-core-module#in-process-hosting-model) in ASP.NET Core 3.0 or later.</span></span> <span data-ttu-id="61557-268">Wenn der Wert lautet, können Sie optional die- `<AspNetCoreHostingModel>` Eigenschaft in der Projektdatei entfernen `InProcess` .</span><span class="sxs-lookup"><span data-stu-id="61557-268">You may optionally remove the `<AspNetCoreHostingModel>` property in the project file if its value is `InProcess`.</span></span>

## <a name="kestrel"></a><span data-ttu-id="61557-269">Kestrel</span><span class="sxs-lookup"><span data-stu-id="61557-269">Kestrel</span></span>

### <a name="configuration"></a><span data-ttu-id="61557-270">Konfiguration</span><span class="sxs-lookup"><span data-stu-id="61557-270">Configuration</span></span>

<span data-ttu-id="61557-271">Migrieren Sie die Kestrel-Konfiguration zum von bereitgestellten [Webhost](#hostb) -Generator `ConfigureWebHostDefaults` (*Program.cs*):</span><span class="sxs-lookup"><span data-stu-id="61557-271">Migrate Kestrel configuration to the [web host builder](#hostb) provided by `ConfigureWebHostDefaults` (*Program.cs*):</span></span>

```csharp
public static IHostBuilder CreateHostBuilder(string[] args) =>
    Host.CreateDefaultBuilder(args)
        .ConfigureWebHostDefaults(webBuilder =>
        {
            webBuilder.ConfigureKestrel(serverOptions =>
            {
                // Set properties and call methods on options
            })
            .UseStartup<Startup>();
        });
```

<span data-ttu-id="61557-272">Wenn die APP den Host mit manuell erstellt `HostBuilder` , müssen Sie `UseKestrel` auf dem Webhost-Generator in folgenden Befehl ausführen `ConfigureWebHostDefaults` :</span><span class="sxs-lookup"><span data-stu-id="61557-272">If the app creates the host manually with `HostBuilder`, call `UseKestrel` on the web host builder in `ConfigureWebHostDefaults`:</span></span>

```csharp
public static void Main(string[] args)
{
    var host = new HostBuilder()
        .UseContentRoot(Directory.GetCurrentDirectory())
        .ConfigureWebHostDefaults(webBuilder =>
        {
            webBuilder.UseKestrel(serverOptions =>
            {
                // Set properties and call methods on options
            })
            .UseIISIntegration()
            .UseStartup<Startup>();
        })
        .Build();

    host.Run();
}
```

### <a name="connection-middleware-replaces-connection-adapters"></a><span data-ttu-id="61557-273">Verbindungs-Middleware ersetzt Verbindungs Adapter</span><span class="sxs-lookup"><span data-stu-id="61557-273">Connection Middleware replaces Connection Adapters</span></span>

<span data-ttu-id="61557-274">Verbindungs Adapter ( `Microsoft.AspNetCore.Server.Kestrel.Core.Adapter.Internal.IConnectionAdapter` ) wurden aus Kestrel entfernt.</span><span class="sxs-lookup"><span data-stu-id="61557-274">Connection Adapters (`Microsoft.AspNetCore.Server.Kestrel.Core.Adapter.Internal.IConnectionAdapter`) have been removed from Kestrel.</span></span> <span data-ttu-id="61557-275">Ersetzen Sie Verbindungs Adapter durch Verbindungs Middleware.</span><span class="sxs-lookup"><span data-stu-id="61557-275">Replace Connection Adapters with Connection Middleware.</span></span> <span data-ttu-id="61557-276">Die Verbindungs Middleware ähnelt http-Middleware in der ASP.net Core Pipeline, aber für Verbindungen auf niedrigerer Ebene.</span><span class="sxs-lookup"><span data-stu-id="61557-276">Connection Middleware is similar to HTTP Middleware in the ASP.NET Core pipeline but for lower-level connections.</span></span> <span data-ttu-id="61557-277">HTTPS und Verbindungs Protokollierung:</span><span class="sxs-lookup"><span data-stu-id="61557-277">HTTPS and connection logging:</span></span>

* <span data-ttu-id="61557-278">Wurden von Verbindungs Adaptern zur Verbindungs Middleware verschoben.</span><span class="sxs-lookup"><span data-stu-id="61557-278">Have been moved from Connection Adapters to Connection Middleware.</span></span>
* <span data-ttu-id="61557-279">Diese Erweiterungs Methoden funktionieren wie in früheren Versionen von ASP.net Core.</span><span class="sxs-lookup"><span data-stu-id="61557-279">These extension methods work as in previous versions of ASP.NET Core.</span></span> 

<span data-ttu-id="61557-280">Weitere Informationen finden Sie [im Abschnitt "tlsfilterconnectionhandler" im Abschnitt "listenoptions. Protokolls" im Kestrel-Artikel](/aspnet/core/fundamentals/servers/kestrel?view=aspnetcore-3.0#listenoptionsprotocols).</span><span class="sxs-lookup"><span data-stu-id="61557-280">For more information, see [the TlsFilterConnectionHandler example in the ListenOptions.Protocols section of the Kestrel article](/aspnet/core/fundamentals/servers/kestrel?view=aspnetcore-3.0#listenoptionsprotocols).</span></span>

### <a name="transport-abstractions-moved-and-made-public"></a><span data-ttu-id="61557-281">Transport Abstraktionen verschoben und öffentlich gemacht</span><span class="sxs-lookup"><span data-stu-id="61557-281">Transport abstractions moved and made public</span></span>

<span data-ttu-id="61557-282">Die Kestrel-Transportschicht wurde in `Connections.Abstractions` als öffentliche Schnittstelle verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="61557-282">The Kestrel transport layer has been exposed as a public interface in `Connections.Abstractions`.</span></span> <span data-ttu-id="61557-283">Als Teil dieser Updates:</span><span class="sxs-lookup"><span data-stu-id="61557-283">As part of these updates:</span></span>

* <span data-ttu-id="61557-284">`Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions`und zugeordnete Typen wurden entfernt.</span><span class="sxs-lookup"><span data-stu-id="61557-284">`Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions` and associated types have been removed.</span></span>
* <span data-ttu-id="61557-285"><xref:Microsoft.AspNetCore.Server.Kestrel.KestrelServerOptions.NoDelay>wurde von <xref:Microsoft.AspNetCore.Server.Kestrel.Core.ListenOptions> zu den Transport Optionen verschoben.</span><span class="sxs-lookup"><span data-stu-id="61557-285"><xref:Microsoft.AspNetCore.Server.Kestrel.KestrelServerOptions.NoDelay> was moved from <xref:Microsoft.AspNetCore.Server.Kestrel.Core.ListenOptions> to the transport options.</span></span>
* <span data-ttu-id="61557-286">`Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions.Internal.SchedulingMode`wurde aus entfernt <xref:Microsoft.AspNetCore.Server.Kestrel.KestrelServerOptions> .</span><span class="sxs-lookup"><span data-stu-id="61557-286">`Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions.Internal.SchedulingMode` was removed from <xref:Microsoft.AspNetCore.Server.Kestrel.KestrelServerOptions>.</span></span>

<span data-ttu-id="61557-287">Weitere Informationen finden Sie in den folgenden GitHub-Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="61557-287">For more information, see the following GitHub resources:</span></span>

* [<span data-ttu-id="61557-288">Client/Server-Netzwerk Abstraktionen (dotnet/aspnetcore-#10308)</span><span class="sxs-lookup"><span data-stu-id="61557-288">Client/server networking abstractions (dotnet/AspNetCore #10308)</span></span>](https://github.com/dotnet/AspNetCore/issues/10308)
* [<span data-ttu-id="61557-289">Implementieren Sie die neue Fundament-Listener-Abstraktion und REPLAT Kestrel (dotnet/aspnetcore-#10321).</span><span class="sxs-lookup"><span data-stu-id="61557-289">Implement new bedrock listener abstraction and re-plat Kestrel on top (dotnet/AspNetCore #10321)</span></span>](https://github.com/dotnet/AspNetCore/pull/10321)

### <a name="kestrel-request-trailer-headers"></a><span data-ttu-id="61557-290">Kestrel-Anforderungs Nachspann Header</span><span class="sxs-lookup"><span data-stu-id="61557-290">Kestrel Request trailer headers</span></span>

<span data-ttu-id="61557-291">Für apps, die auf frühere Versionen von ASP.net Core abzielen:</span><span class="sxs-lookup"><span data-stu-id="61557-291">For apps that target earlier versions of ASP.NET Core:</span></span>

* <span data-ttu-id="61557-292">Kestrel fügt der Auflistung der Anforderungs Header HTTP/1.1-Auflistungs Header hinzu.</span><span class="sxs-lookup"><span data-stu-id="61557-292">Kestrel adds HTTP/1.1 chunked trailer headers into the request headers collection.</span></span>
* <span data-ttu-id="61557-293">Nach dem Lesen des Anforderungs Texts sind die nach dem Ende des Anforderungs Texts verfügbar.</span><span class="sxs-lookup"><span data-stu-id="61557-293">Trailers are available after the request body is read to the end.</span></span>

<span data-ttu-id="61557-294">Dies bewirkt einige Bedenken bezüglich der Mehrdeutigkeit zwischen Headern und nach Spann, sodass die Nachspann in eine neue Sammlung ( `RequestTrailerExtensions` ) in 3,0 verschoben wurden.</span><span class="sxs-lookup"><span data-stu-id="61557-294">This causes some concerns about ambiguity between headers and trailers, so the trailers have been moved to a new collection (`RequestTrailerExtensions`) in 3.0.</span></span>

<span data-ttu-id="61557-295">HTTP/2-Anforderungs Nachspann:</span><span class="sxs-lookup"><span data-stu-id="61557-295">HTTP/2 request trailers are:</span></span>

* <span data-ttu-id="61557-296">Nicht verfügbar in ASP.net Core 2,2.</span><span class="sxs-lookup"><span data-stu-id="61557-296">Not available in ASP.NET Core 2.2.</span></span>
* <span data-ttu-id="61557-297">Verfügbar in 3,0 als `RequestTrailerExtensions` .</span><span class="sxs-lookup"><span data-stu-id="61557-297">Available in 3.0 as `RequestTrailerExtensions`.</span></span>

<span data-ttu-id="61557-298">Für den Zugriff auf diese Nachspann sind neue Anforderungs Erweiterungs Methoden vorhanden.</span><span class="sxs-lookup"><span data-stu-id="61557-298">New request extension methods are present to access these trailers.</span></span> <span data-ttu-id="61557-299">Wie bei HTTP/1.1 sind Nachspann verfügbar, nachdem der Anforderungs Text bis zum Ende gelesen wurde.</span><span class="sxs-lookup"><span data-stu-id="61557-299">As with HTTP/1.1, trailers are available after the request body is read to the end.</span></span>

<span data-ttu-id="61557-300">Für die Version 3,0 sind die folgenden `RequestTrailerExtensions` Methoden verfügbar:</span><span class="sxs-lookup"><span data-stu-id="61557-300">For the 3.0 release, the following `RequestTrailerExtensions` methods are available:</span></span>

* <span data-ttu-id="61557-301">`GetDeclaredTrailers`: Ruft den Anforderungs `Trailer` Header ab, der auflistet, welche Nachspann nach dem Text erwartet werden.</span><span class="sxs-lookup"><span data-stu-id="61557-301">`GetDeclaredTrailers`: Gets the request `Trailer` header that lists which trailers to expect after the body.</span></span>
* <span data-ttu-id="61557-302">`SupportsTrailers`: Gibt an, ob die Anforderung das Empfangen von nach Spann Headern unter</span><span class="sxs-lookup"><span data-stu-id="61557-302">`SupportsTrailers`: Indicates if the request supports receiving trailer headers.</span></span>
* <span data-ttu-id="61557-303">`CheckTrailersAvailable`: Überprüft, ob die Anforderung Nachspann unterstützt und ob Sie gelesen werden können.</span><span class="sxs-lookup"><span data-stu-id="61557-303">`CheckTrailersAvailable`: Checks if the request supports trailers and if they're available to be read.</span></span> <span data-ttu-id="61557-304">Bei dieser Überprüfung wird nicht davon ausgegangen, dass zum Lesen von nach spannenden</span><span class="sxs-lookup"><span data-stu-id="61557-304">This check doesn't assume that there are trailers to read.</span></span> <span data-ttu-id="61557-305">Möglicherweise gibt es keine zu lesenden Nachspann, auch wenn `true` von dieser Methode zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="61557-305">There might be no trailers to read even if `true` is returned by this method.</span></span>
* <span data-ttu-id="61557-306">`GetTrailer`: Ruft den angeforderten nachfolgenden Header aus der Antwort ab.</span><span class="sxs-lookup"><span data-stu-id="61557-306">`GetTrailer`: Gets the requested trailing header from the response.</span></span> <span data-ttu-id="61557-307">Überprüfen Sie `SupportsTrailers` vor dem Aufrufen von `GetTrailer` , oder <xref:System.NotSupportedException> kann eintreten, wenn die Anforderung keine nachfolgenden Header unterstützt.</span><span class="sxs-lookup"><span data-stu-id="61557-307">Check `SupportsTrailers` before calling `GetTrailer`, or a <xref:System.NotSupportedException> may occur if the request doesn't support trailing headers.</span></span>

<span data-ttu-id="61557-308">Weitere Informationen finden Sie unter [Put Request Trailers in a separate Collection (dotnet/aspnetcore-#10410)](https://github.com/dotnet/AspNetCore/pull/10410).</span><span class="sxs-lookup"><span data-stu-id="61557-308">For more information, see [Put request trailers in a separate collection (dotnet/AspNetCore #10410)](https://github.com/dotnet/AspNetCore/pull/10410).</span></span>

### <a name="allowsynchronousio-disabled"></a><span data-ttu-id="61557-309">Allowsynchronousio deaktiviert</span><span class="sxs-lookup"><span data-stu-id="61557-309">AllowSynchronousIO disabled</span></span>

<span data-ttu-id="61557-310">`AllowSynchronousIO`aktiviert oder deaktiviert synchrone e/a-APIs, wie `HttpRequest.Body.Read` z `HttpResponse.Body.Write` . b `Stream.Flush` ., und.</span><span class="sxs-lookup"><span data-stu-id="61557-310">`AllowSynchronousIO` enables or disables synchronous I/O APIs, such as `HttpRequest.Body.Read`, `HttpResponse.Body.Write`, and `Stream.Flush`.</span></span> <span data-ttu-id="61557-311">Diese APIs sind eine Quelle der Thread Hungersnot, die zu app-Abstürzen führt.</span><span class="sxs-lookup"><span data-stu-id="61557-311">These APIs are a source of thread starvation leading to app crashes.</span></span> <span data-ttu-id="61557-312">In 3.0 ist `AllowSynchronousIO` standardmäßig deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="61557-312">In 3.0, `AllowSynchronousIO` is disabled by default.</span></span> <span data-ttu-id="61557-313">Weitere Informationen finden Sie [im Abschnitt "Synchrone e/a" im Kestrel-Artikel](/aspnet/core/fundamentals/servers/kestrel?view=aspnetcore-3.0#synchronous-io).</span><span class="sxs-lookup"><span data-stu-id="61557-313">For more information, see [the Synchronous I/O section in the Kestrel article](/aspnet/core/fundamentals/servers/kestrel?view=aspnetcore-3.0#synchronous-io).</span></span>

<span data-ttu-id="61557-314">Wenn eine synchrone e/a erforderlich ist, kann Sie aktiviert werden, indem die- `AllowSynchronousIO` Option auf dem verwendeten Server konfiguriert wird ( `ConfigureKestrel` z. b. bei Verwendung von Kestrel).</span><span class="sxs-lookup"><span data-stu-id="61557-314">If synchronous I/O is needed, it can be enabled by configuring the `AllowSynchronousIO` option on the server being used (when calling `ConfigureKestrel`, for example, if using Kestrel).</span></span> <span data-ttu-id="61557-315">Beachten Sie, dass Server (Kestrel, httpsys, Testserver usw.) über eine eigene `AllowSynchronousIO` Option verfügen, die sich nicht auf andere Server auswirkt.</span><span class="sxs-lookup"><span data-stu-id="61557-315">Note that servers (Kestrel, HttpSys, TestServer, etc.) all have their own `AllowSynchronousIO` option that won't affect other servers.</span></span> <span data-ttu-id="61557-316">Synchrone e/a-Vorgänge können für alle Server auf Anforderungs Basis aktiviert werden. verwenden Sie dazu die folgende `IHttpBodyControlFeature.AllowSynchronousIO` Option:</span><span class="sxs-lookup"><span data-stu-id="61557-316">Synchronous I/O can be enabled for all servers on a per-request basis using the `IHttpBodyControlFeature.AllowSynchronousIO` option:</span></span>

```csharp
var syncIOFeature = HttpContext.Features.Get<IHttpBodyControlFeature>();

if (syncIOFeature != null)
{
    syncIOFeature.AllowSynchronousIO = true;
}
```

<span data-ttu-id="61557-317">Wenn Sie Probleme mit <xref:System.IO.TextWriter> Implementierungen oder anderen Streams [haben,](/dotnet/standard/garbage-collection/implementing-dispose)die synchrone APIs in verwerfen aufzurufen, müssen Sie stattdessen die neue <xref:System.IO.Stream.DisposeAsync*> API abrufen.</span><span class="sxs-lookup"><span data-stu-id="61557-317">If you have trouble with <xref:System.IO.TextWriter> implementations or other streams that call synchronous APIs in [Dispose](/dotnet/standard/garbage-collection/implementing-dispose), call the new <xref:System.IO.Stream.DisposeAsync*> API instead.</span></span>

<span data-ttu-id="61557-318">Weitere Informationen finden Sie unter [[Ankündigung] allowsynchronousio deaktiviert auf allen Servern (dotnet/aspnetcore-#7644)](https://github.com/dotnet/AspNetCore/issues/7644).</span><span class="sxs-lookup"><span data-stu-id="61557-318">For more information, see [[Announcement] AllowSynchronousIO disabled in all servers (dotnet/AspNetCore #7644)](https://github.com/dotnet/AspNetCore/issues/7644).</span></span>

### <a name="microsoftaspnetcoreserverkestrelhttps-assembly-removed"></a><span data-ttu-id="61557-319">Die Assembly "Microsoft. aspnetcore. Server. Kestrel. https" wurde entfernt.</span><span class="sxs-lookup"><span data-stu-id="61557-319">Microsoft.AspNetCore.Server.Kestrel.Https assembly removed</span></span>

<span data-ttu-id="61557-320">In ASP.net Core 2,1 wurde der Inhalt von " *Microsoft. aspnetcore. Server. Kestrel. HTTPS. dll* " in " *Microsoft. aspnetcore. Server. Kestrel. Core. dll*" verschoben.</span><span class="sxs-lookup"><span data-stu-id="61557-320">In ASP.NET Core 2.1, the contents of *Microsoft.AspNetCore.Server.Kestrel.Https.dll* were moved to *Microsoft.AspNetCore.Server.Kestrel.Core.dll*.</span></span> <span data-ttu-id="61557-321">Dabei handelt es sich um ein nicht Erbrechtes Update mit `TypeForwardedTo` Attributen.</span><span class="sxs-lookup"><span data-stu-id="61557-321">This was a non-breaking update using `TypeForwardedTo` attributes.</span></span> <span data-ttu-id="61557-322">Bei 3,0 wurden die leere *Microsoft. aspnetcore. Server. Kestrel. HTTPS. dll* -Assembly und das nuget-Paket entfernt.</span><span class="sxs-lookup"><span data-stu-id="61557-322">For 3.0, the empty *Microsoft.AspNetCore.Server.Kestrel.Https.dll* assembly and the NuGet package have been removed.</span></span>

<span data-ttu-id="61557-323">Bibliotheken, die auf [Microsoft. aspnetcore. Server. Kestrel. HTTPS](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.Kestrel.Https) verweisen, sollten ASP.net Core Abhängigkeiten auf 2,1 oder höher aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="61557-323">Libraries referencing [Microsoft.AspNetCore.Server.Kestrel.Https](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.Kestrel.Https) should update ASP.NET Core dependencies to 2.1 or later.</span></span>

<span data-ttu-id="61557-324">Apps und Bibliotheken, die auf ASP.net Core 2,1 oder höher abzielen, sollten alle direkten Verweise auf das Paket [Microsoft. aspnetcore. Server. Kestrel. HTTPS](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.Kestrel.Https) entfernen.</span><span class="sxs-lookup"><span data-stu-id="61557-324">Apps and libraries targeting ASP.NET Core 2.1 or later should remove any direct references to the [Microsoft.AspNetCore.Server.Kestrel.Https](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.Kestrel.Https) package.</span></span>

<a id="jsonnet-support"></a>

## <a name="newtonsoftjson-jsonnet-support"></a><span data-ttu-id="61557-325">Unterstützung von "newtonsoft. JSON" (JSON.net)</span><span class="sxs-lookup"><span data-stu-id="61557-325">Newtonsoft.Json (Json.NET) support</span></span>

<span data-ttu-id="61557-326">Im Rahmen der Arbeit zur [Verbesserung der ASP.net Core freigegebenen Frameworks](https://blogs.msdn.microsoft.com/webdev/2018/10/29/a-first-look-at-changes-coming-in-asp-net-core-3-0/)wurde " [newtonsoft. JSON" (JSON.net)](https://www.newtonsoft.com/json/help/html/Introduction.htm) aus dem ASP.net Core Shared Framework entfernt.</span><span class="sxs-lookup"><span data-stu-id="61557-326">As part of the work to [improve the ASP.NET Core shared framework](https://blogs.msdn.microsoft.com/webdev/2018/10/29/a-first-look-at-changes-coming-in-asp-net-core-3-0/), [Newtonsoft.Json (Json.NET)](https://www.newtonsoft.com/json/help/html/Introduction.htm) has been removed from the ASP.NET Core shared framework.</span></span>

<span data-ttu-id="61557-327">Der Standard-JSON-Serialisierer für ASP.net Core ist jetzt <xref:System.Text.Json> , der in .net Core 3,0 neu ist.</span><span class="sxs-lookup"><span data-stu-id="61557-327">The default JSON serializer for ASP.NET Core is now <xref:System.Text.Json>, which is new in .NET Core 3.0.</span></span> <span data-ttu-id="61557-328">Verwenden Sie nach Möglichkeit die Verwendung von `System.Text.Json` .</span><span class="sxs-lookup"><span data-stu-id="61557-328">Consider using `System.Text.Json` when possible.</span></span> <span data-ttu-id="61557-329">Dies ist eine hohe Leistung und erfordert keine zusätzliche Bibliotheks Abhängigkeit.</span><span class="sxs-lookup"><span data-stu-id="61557-329">It's high-performance and doesn't require an additional library dependency.</span></span> <span data-ttu-id="61557-330">Da jedoch `System.Text.Json` neu ist, fehlen möglicherweise derzeit die Features, die Ihre APP benötigt.</span><span class="sxs-lookup"><span data-stu-id="61557-330">However, since `System.Text.Json` is new, it might currently be missing features that your app needs.</span></span> <span data-ttu-id="61557-331">Weitere Informationen finden Sie unter [Migrieren von "newtonsoft. JSON" zu "System. Text. JSON](/dotnet/standard/serialization/system-text-json-migrate-from-newtonsoft-how-to)".</span><span class="sxs-lookup"><span data-stu-id="61557-331">For more information, see [How to migrate from Newtonsoft.Json to System.Text.Json](/dotnet/standard/serialization/system-text-json-migrate-from-newtonsoft-how-to).</span></span>

### <a name="use-newtonsoftjson-in-an-aspnet-core-30-signalr-project"></a><span data-ttu-id="61557-332">Verwenden von "newtonsoft. JSON" in einem ASP.net Core 3,0- SignalR Projekt</span><span class="sxs-lookup"><span data-stu-id="61557-332">Use Newtonsoft.Json in an ASP.NET Core 3.0 SignalR project</span></span>

* <span data-ttu-id="61557-333">Installieren Sie [Microsoft. aspnetcore. SignalR Das nuget-Paket "Protokolls. newtonsoft JSON](https://www.nuget.org/packages/Microsoft.AspNetCore.SignalR.Protocols.NewtonsoftJson) ".</span><span class="sxs-lookup"><span data-stu-id="61557-333">Install the [Microsoft.AspNetCore.SignalR.Protocols.NewtonsoftJson](https://www.nuget.org/packages/Microsoft.AspNetCore.SignalR.Protocols.NewtonsoftJson) NuGet package.</span></span>

* <span data-ttu-id="61557-334">Verketten Sie auf dem Client einen `AddNewtonsoftJsonProtocol` Methoden Aufrufder- `HubConnectionBuilder` Instanz:</span><span class="sxs-lookup"><span data-stu-id="61557-334">On the client, chain an `AddNewtonsoftJsonProtocol` method call to the `HubConnectionBuilder` instance:</span></span>

  ```csharp
  new HubConnectionBuilder()
      .WithUrl("/chatHub")
      .AddNewtonsoftJsonProtocol(...)
      .Build();
  ```

* <span data-ttu-id="61557-335">Verketten Sie auf dem-Server einen `AddNewtonsoftJsonProtocol` Methodenaufrufe des- `AddSignalR` Methoden Aufrufes in `Startup.ConfigureServices` :</span><span class="sxs-lookup"><span data-stu-id="61557-335">On the server, chain an `AddNewtonsoftJsonProtocol` method call to the `AddSignalR` method call in `Startup.ConfigureServices`:</span></span>

  ```csharp
  services.AddSignalR()
      .AddNewtonsoftJsonProtocol(...);
  ```

### <a name="use-newtonsoftjson-in-an-aspnet-core-30-mvc-project"></a><span data-ttu-id="61557-336">Verwenden von "newtonsoft. JSON" in einem ASP.net Core 3,0-MVC-Projekt</span><span class="sxs-lookup"><span data-stu-id="61557-336">Use Newtonsoft.Json in an ASP.NET Core 3.0 MVC project</span></span>

* <span data-ttu-id="61557-337">Installieren Sie das [`Microsoft.AspNetCore.Mvc.NewtonsoftJson`](https://nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson) Paket.</span><span class="sxs-lookup"><span data-stu-id="61557-337">Install the [`Microsoft.AspNetCore.Mvc.NewtonsoftJson`](https://nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson) package.</span></span>

* <span data-ttu-id="61557-338">Aktualisieren `Startup.ConfigureServices` , um aufzurufen `AddNewtonsoftJson` .</span><span class="sxs-lookup"><span data-stu-id="61557-338">Update `Startup.ConfigureServices` to call `AddNewtonsoftJson`.</span></span>

  ```csharp
  services.AddMvc()
      .AddNewtonsoftJson();
  ```

  <span data-ttu-id="61557-339">`AddNewtonsoftJson`ist mit den neuen Registrierungsmethoden für den MVC-Dienst kompatibel:</span><span class="sxs-lookup"><span data-stu-id="61557-339">`AddNewtonsoftJson` is compatible with the new MVC service registration methods:</span></span>

  * `AddRazorPages`
  * `AddControllersWithViews`
  * `AddControllers`

  ```csharp
  services.AddControllers()
      .AddNewtonsoftJson();
  ```

  <span data-ttu-id="61557-340">`Newtonsoft.Json`Einstellungen können im-Befehl festgelegt werden `AddNewtonsoftJson` :</span><span class="sxs-lookup"><span data-stu-id="61557-340">`Newtonsoft.Json` settings can be set in the call to `AddNewtonsoftJson`:</span></span>

  ```csharp
  services.AddMvc()
      .AddNewtonsoftJson(options =>
             options.SerializerSettings.ContractResolver =
                new CamelCasePropertyNamesContractResolver());
  ```

<span data-ttu-id="61557-341">**Hinweis:** Wenn die `AddNewtonsoftJson` Methode nicht verfügbar ist, stellen Sie sicher, dass Sie das Paket installiert haben [`Microsoft.AspNetCore.Mvc.NewtonsoftJson`](https://nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson) .</span><span class="sxs-lookup"><span data-stu-id="61557-341">**Note:** If the `AddNewtonsoftJson` method isn't available, make sure that you installed the [`Microsoft.AspNetCore.Mvc.NewtonsoftJson`](https://nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson) package.</span></span> <span data-ttu-id="61557-342">Ein häufiger Fehler ist die Installation des Pakets " [newtonsoft. JSON](https://www.nuget.org/packages/Newtonsoft.Json/) " anstelle des [`Microsoft.AspNetCore.Mvc.NewtonsoftJson`](https://nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson) Pakets.</span><span class="sxs-lookup"><span data-stu-id="61557-342">A common error is to install the [Newtonsoft.Json](https://www.nuget.org/packages/Newtonsoft.Json/) package instead of the [`Microsoft.AspNetCore.Mvc.NewtonsoftJson`](https://nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson) package.</span></span>

## <a name="mvc-service-registration"></a><span data-ttu-id="61557-343">MVC-Dienst Registrierung</span><span class="sxs-lookup"><span data-stu-id="61557-343">MVC service registration</span></span>

<span data-ttu-id="61557-344">In ASP.net Core 3,0 werden neue Optionen zum Registrieren von MVC-Szenarien in hinzugefügt `Startup.ConfigureServices` .</span><span class="sxs-lookup"><span data-stu-id="61557-344">ASP.NET Core 3.0 adds new options for registering MVC scenarios inside `Startup.ConfigureServices`.</span></span>

<span data-ttu-id="61557-345">Drei neue Erweiterungs Methoden der obersten Ebene, die sich auf MVC-Szenarios für beziehen, `IServiceCollection` sind verfügbar.</span><span class="sxs-lookup"><span data-stu-id="61557-345">Three new top-level extension methods related to MVC scenarios on `IServiceCollection` are available.</span></span> <span data-ttu-id="61557-346">Vorlagen verwenden diese neuen Methoden anstelle von `AddMvc` .</span><span class="sxs-lookup"><span data-stu-id="61557-346">Templates use these new methods instead of `AddMvc`.</span></span> <span data-ttu-id="61557-347">Verhält sich jedoch `AddMvc` weiterhin wie in früheren Versionen.</span><span class="sxs-lookup"><span data-stu-id="61557-347">However, `AddMvc` continues to behave as it has in previous releases.</span></span>

<span data-ttu-id="61557-348">Im folgenden Beispiel wird die Unterstützung für Controller und API-Funktionen hinzugefügt, jedoch keine Sichten oder Seiten.</span><span class="sxs-lookup"><span data-stu-id="61557-348">The following example adds support for controllers and API-related features, but not views or pages.</span></span> <span data-ttu-id="61557-349">Die API-Vorlage verwendet diesen Code:</span><span class="sxs-lookup"><span data-stu-id="61557-349">The API template uses this code:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddControllers();
}
```

<span data-ttu-id="61557-350">Im folgenden Beispiel werden die Unterstützung für Controller, API-bezogene Features und Sichten, aber keine Seiten hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="61557-350">The following example adds support for controllers, API-related features, and views, but not pages.</span></span> <span data-ttu-id="61557-351">Die Vorlage Webanwendung (MVC) verwendet folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="61557-351">The Web Application (MVC) template uses this code:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddControllersWithViews();
}
```

<span data-ttu-id="61557-352">Im folgenden Beispiel wird die Unterstützung für Razor Seiten und die minimale Controller Unterstützung hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="61557-352">The following example adds support for Razor Pages and minimal controller support.</span></span> <span data-ttu-id="61557-353">Die Webanwendungsvorlage verwendet diesen Code:</span><span class="sxs-lookup"><span data-stu-id="61557-353">The Web Application template uses this code:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddRazorPages();
}
```

<span data-ttu-id="61557-354">Die neuen Methoden können ebenfalls kombiniert werden.</span><span class="sxs-lookup"><span data-stu-id="61557-354">The new methods can also be combined.</span></span> <span data-ttu-id="61557-355">Das folgende Beispiel entspricht dem Aufrufen von `AddMvc` in ASP.net Core 2,2:</span><span class="sxs-lookup"><span data-stu-id="61557-355">The following example is equivalent to calling `AddMvc` in ASP.NET Core 2.2:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddControllersWithViews();
    services.AddRazorPages();
}
```

## <a name="routing-startup-code"></a><span data-ttu-id="61557-356">Routing Startcode</span><span class="sxs-lookup"><span data-stu-id="61557-356">Routing startup code</span></span>

<span data-ttu-id="61557-357">Wenn eine APP `UseMvc` oder aufruft `UseSignalR` , migrieren Sie die APP nach Möglichkeit zum [Endpunkt Routing](xref:fundamentals/routing) .</span><span class="sxs-lookup"><span data-stu-id="61557-357">If an app calls `UseMvc` or `UseSignalR`, migrate the app to [Endpoint Routing](xref:fundamentals/routing) if possible.</span></span> <span data-ttu-id="61557-358">Um die Kompatibilität mit dem Endpunkt Routing mit früheren Versionen von MVC zu verbessern, haben wir einige der Änderungen in der URL-Generierung wieder hergestellt, die in ASP.net Core 2,2 eingeführt wurden.</span><span class="sxs-lookup"><span data-stu-id="61557-358">To improve Endpoint Routing compatibility with previous versions of MVC, we've reverted some of the changes in URL generation introduced in ASP.NET Core 2.2.</span></span> <span data-ttu-id="61557-359">Wenn bei der Verwendung des Endpunkt Routings in 2,2 Probleme auftreten, erwarten Sie Verbesserungen in ASP.net Core 3,0 mit folgenden Ausnahmen:</span><span class="sxs-lookup"><span data-stu-id="61557-359">If you experienced problems using Endpoint Routing in 2.2, expect improvements in ASP.NET Core 3.0 with the following exceptions:</span></span>

* <span data-ttu-id="61557-360">Wenn die APP implementiert `IRouter` oder von der Anwendung erbt `Route` , verwenden Sie [dynamicroutevaluestransex](https://github.com/dotnet/AspNetCore.Docs/issues/12997) als Ersatz.</span><span class="sxs-lookup"><span data-stu-id="61557-360">If the app implements `IRouter` or inherits from `Route`, use [DynamicRouteValuesTransformer](https://github.com/dotnet/AspNetCore.Docs/issues/12997) as the replacement.</span></span>
* <span data-ttu-id="61557-361">Wenn die APP direkt `RouteData.Routers` in MVC zugreift, um URLs zu analysieren, können Sie dies durch die Verwendung von [linkparser. parspathbyendpointname](xref:Microsoft.AspNetCore.Routing.LinkParserEndpointNameAddressExtensions.ParsePathByEndpointName*)ersetzen.</span><span class="sxs-lookup"><span data-stu-id="61557-361">If the app directly accesses `RouteData.Routers` inside MVC to parse URLs, you can replace this with use of [LinkParser.ParsePathByEndpointName](xref:Microsoft.AspNetCore.Routing.LinkParserEndpointNameAddressExtensions.ParsePathByEndpointName*).</span></span> 
  * <span data-ttu-id="61557-362">Hiermit wird die Route mit einem Routennamen definiert.</span><span class="sxs-lookup"><span data-stu-id="61557-362">Define the route with a route name.</span></span>
  * <span data-ttu-id="61557-363">Verwenden Sie, `LinkParser.ParsePathByEndpointName` und übergeben Sie den gewünschten Routennamen.</span><span class="sxs-lookup"><span data-stu-id="61557-363">Use `LinkParser.ParsePathByEndpointName` and pass in the desired route name.</span></span>

<span data-ttu-id="61557-364">Das Endpunkt Routing unterstützt die gleiche Routing Muster Syntax und die Funktionen zum Erstellen von Routen Mustern wie `IRouter` .</span><span class="sxs-lookup"><span data-stu-id="61557-364">Endpoint Routing supports the same route pattern syntax and route pattern authoring features as `IRouter`.</span></span> <span data-ttu-id="61557-365">Das Endpunkt Routing unterstützt `IRouteConstraint` .</span><span class="sxs-lookup"><span data-stu-id="61557-365">Endpoint Routing supports `IRouteConstraint`.</span></span> <span data-ttu-id="61557-366">Das Endpunkt Routing unterstützt `[Route]` , `[HttpGet]` und die anderen MVC-Routing Attribute.</span><span class="sxs-lookup"><span data-stu-id="61557-366">Endpoint routing supports `[Route]`, `[HttpGet]`, and the other MVC routing attributes.</span></span>

<span data-ttu-id="61557-367">Bei den meisten Anwendungen `Startup` müssen nur Änderungen vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="61557-367">For most applications, only `Startup` requires changes.</span></span>

### <a name="migrate-startupconfigure"></a><span data-ttu-id="61557-368">"Startup. configure" Migrieren</span><span class="sxs-lookup"><span data-stu-id="61557-368">Migrate Startup.Configure</span></span>

<span data-ttu-id="61557-369">Allgemeine Hinweise:</span><span class="sxs-lookup"><span data-stu-id="61557-369">General advice:</span></span>

* <span data-ttu-id="61557-370">Fügen Sie `UseRouting`hinzu.</span><span class="sxs-lookup"><span data-stu-id="61557-370">Add `UseRouting`.</span></span>
* <span data-ttu-id="61557-371">Wenn die APP aufruft `UseStaticFiles` , platzieren Sie es `UseStaticFiles` **vor** `UseRouting` .</span><span class="sxs-lookup"><span data-stu-id="61557-371">If the app calls `UseStaticFiles`, place `UseStaticFiles` **before** `UseRouting`.</span></span>
* <span data-ttu-id="61557-372">Wenn die APP Authentifizierungs-/Autorisierungsfeatures wie `AuthorizePage` oder verwendet `[Authorize]` , platzieren Sie den-Befehl unter `UseAuthentication` und `UseAuthorization` : **nach**und `UseRouting` `UseCors` , aber vor `UseEndpoints` :</span><span class="sxs-lookup"><span data-stu-id="61557-372">If the app uses authentication/authorization features such as `AuthorizePage` or `[Authorize]`, place the call to `UseAuthentication` and `UseAuthorization`: **after**, `UseRouting` and `UseCors`, but before `UseEndpoints`:</span></span>

  ```csharp
  public void Configure(IApplicationBuilder app)
  {
    ...

    app.UseStaticFiles();

    app.UseRouting();
    app.UseCors();

    app.UseAuthentication();
    app.UseAuthorization();

    app.UseEndpoints(endpoints => {
       endpoints.MapControllers();
    });
  ```

* <span data-ttu-id="61557-373">Ersetzen Sie `UseMvc` oder `UseSignalR` durch `UseEndpoints` .</span><span class="sxs-lookup"><span data-stu-id="61557-373">Replace `UseMvc` or `UseSignalR` with `UseEndpoints`.</span></span>
* <span data-ttu-id="61557-374">Wenn die APP [cors](xref:security/cors) -Szenarien (z. b.) verwendet, `[EnableCors]` platzieren Sie den-Anrufe `UseCors` vor allen anderen Middleware, die cors verwenden (z `UseCors` . b. platzieren vor `UseAuthentication` , `UseAuthorization` und `UseEndpoints` ).</span><span class="sxs-lookup"><span data-stu-id="61557-374">If the app uses [CORS](xref:security/cors) scenarios, such as `[EnableCors]`, place the call to `UseCors` before any other middleware that use CORS (for example, place `UseCors` before `UseAuthentication`, `UseAuthorization`, and `UseEndpoints`).</span></span>
* <span data-ttu-id="61557-375">Ersetzen `IHostingEnvironment` Sie durch, `IWebHostEnvironment` und fügen Sie eine- `using` Anweisung für den <xref:Microsoft.Extensions.Hosting?displayProperty=fullName> Namespace hinzu.</span><span class="sxs-lookup"><span data-stu-id="61557-375">Replace `IHostingEnvironment` with `IWebHostEnvironment` and add a `using` statement for the <xref:Microsoft.Extensions.Hosting?displayProperty=fullName> namespace.</span></span>
* <span data-ttu-id="61557-376">Ersetzen Sie dies `IApplicationLifetime` durch <xref:Microsoft.Extensions.Hosting.IHostApplicationLifetime> (- <xref:Microsoft.Extensions.Hosting?displayProperty=fullName> Namespace).</span><span class="sxs-lookup"><span data-stu-id="61557-376">Replace `IApplicationLifetime` with <xref:Microsoft.Extensions.Hosting.IHostApplicationLifetime> (<xref:Microsoft.Extensions.Hosting?displayProperty=fullName> namespace).</span></span>
* <span data-ttu-id="61557-377">Ersetzen Sie dies `EnvironmentName` durch <xref:Microsoft.Extensions.Hosting.Environments> (- <xref:Microsoft.Extensions.Hosting?displayProperty=fullName> Namespace).</span><span class="sxs-lookup"><span data-stu-id="61557-377">Replace `EnvironmentName` with <xref:Microsoft.Extensions.Hosting.Environments> (<xref:Microsoft.Extensions.Hosting?displayProperty=fullName> namespace).</span></span>

<span data-ttu-id="61557-378">Der folgende Code ist ein Beispiel für `Startup.Configure` eine typische ASP.net Core 2,2-App:</span><span class="sxs-lookup"><span data-stu-id="61557-378">The following code is an example of `Startup.Configure` in a typical ASP.NET Core 2.2 app:</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    ...

    app.UseStaticFiles();

    app.UseAuthentication();

    app.UseSignalR(hubs =>
    {
        hubs.MapHub<ChatHub>("/chat");
    });

    app.UseMvc(routes =>
    {
        routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
    });
}
```

<span data-ttu-id="61557-379">Nach dem Aktualisieren des vorherigen `Startup.Configure` Codes:</span><span class="sxs-lookup"><span data-stu-id="61557-379">After updating the previous `Startup.Configure` code:</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    ...

    app.UseStaticFiles();

    app.UseRouting();

    app.UseCors();

    app.UseAuthentication();
    app.UseAuthorization();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapHub<ChatHub>("/chat");
        endpoints.MapControllerRoute("default", "{controller=Home}/{action=Index}/{id?}");
    });
}
```

> [!WARNING]
> <span data-ttu-id="61557-380">Bei den meisten apps müssen Aufrufe von `UseAuthentication` , `UseAuthorization` und `UseCors` zwischen den Aufrufen von und auftreten `UseRouting` , `UseEndpoints` um wirksam zu werden.</span><span class="sxs-lookup"><span data-stu-id="61557-380">For most apps, calls to `UseAuthentication`, `UseAuthorization`, and `UseCors` must appear between the calls to `UseRouting` and `UseEndpoints` to be effective.</span></span>

### <a name="health-checks"></a><span data-ttu-id="61557-381">Integritätsprüfungen</span><span class="sxs-lookup"><span data-stu-id="61557-381">Health Checks</span></span>

<span data-ttu-id="61557-382">Integritätsprüfungen verwenden das Endpunktrouting mit dem generischen Host.</span><span class="sxs-lookup"><span data-stu-id="61557-382">Health Checks use endpoint routing with the Generic Host.</span></span> <span data-ttu-id="61557-383">Rufen Sie in `Startup.Configure` auf der Endpunkterstellung mit der Endpunkt-URL oder dem relativen Pfad `MapHealthChecks` auf:</span><span class="sxs-lookup"><span data-stu-id="61557-383">In `Startup.Configure`, call `MapHealthChecks` on the endpoint builder with the endpoint URL or relative path:</span></span>

```csharp
app.UseEndpoints(endpoints =>
{
    endpoints.MapHealthChecks("/health");
});
```

<span data-ttu-id="61557-384">Für Endpunkte für Integritätsprüfungen gilt Folgendes:</span><span class="sxs-lookup"><span data-stu-id="61557-384">Health Checks endpoints can:</span></span>

* <span data-ttu-id="61557-385">Sie geben mindestens einen zugelassenen Host oder Port an.</span><span class="sxs-lookup"><span data-stu-id="61557-385">Specify one or more permitted hosts/ports.</span></span>
* <span data-ttu-id="61557-386">Sie erfordern Autorisierung.</span><span class="sxs-lookup"><span data-stu-id="61557-386">Require authorization.</span></span>
* <span data-ttu-id="61557-387">Sie erfordern CORS.</span><span class="sxs-lookup"><span data-stu-id="61557-387">Require CORS.</span></span>

<span data-ttu-id="61557-388">Weitere Informationen finden Sie unter <xref:host-and-deploy/health-checks>.</span><span class="sxs-lookup"><span data-stu-id="61557-388">For more information, see <xref:host-and-deploy/health-checks>.</span></span>

### <a name="security-middleware-guidance"></a><span data-ttu-id="61557-389">Leitfaden zur Sicherheit von Middleware</span><span class="sxs-lookup"><span data-stu-id="61557-389">Security middleware guidance</span></span>

<span data-ttu-id="61557-390">Unterstützung für die Autorisierung und cors ist in Bezug auf den [Middleware](xref:fundamentals/middleware/index) -Ansatz einheitlich.</span><span class="sxs-lookup"><span data-stu-id="61557-390">Support for authorization and CORS is unified around the [middleware](xref:fundamentals/middleware/index) approach.</span></span> <span data-ttu-id="61557-391">Dies ermöglicht die Verwendung derselben Middleware und derselben Funktionalität in diesen Szenarien.</span><span class="sxs-lookup"><span data-stu-id="61557-391">This allows use of the same middleware and functionality across these scenarios.</span></span> <span data-ttu-id="61557-392">In dieser Version wird eine aktualisierte Autorisierungs Middleware bereitgestellt, und die cors-Middleware wird verbessert, sodass Sie die von MVC-Controllern verwendeten Attribute verstehen kann.</span><span class="sxs-lookup"><span data-stu-id="61557-392">An updated authorization middleware is provided in this release, and CORS Middleware is enhanced so that it can understand the attributes used by MVC controllers.</span></span>

#### <a name="cors"></a><span data-ttu-id="61557-393">CORS</span><span class="sxs-lookup"><span data-stu-id="61557-393">CORS</span></span>

<span data-ttu-id="61557-394">Zuvor war es möglicherweise schwierig, cors zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="61557-394">Previously, CORS could be difficult to configure.</span></span> <span data-ttu-id="61557-395">Die Middleware wurde zur Verwendung in einigen Anwendungsfällen bereitgestellt, aber MVC-Filter waren in anderen Anwendungsfällen **ohne** die Middleware vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="61557-395">Middleware was provided for use in some use cases, but MVC filters were intended to be used **without** the middleware in other use cases.</span></span> <span data-ttu-id="61557-396">Bei ASP.net Core 3,0 wird empfohlen, dass alle apps, die cors benötigen, die cors-Middleware zusammen mit dem Endpunkt Routing verwenden.</span><span class="sxs-lookup"><span data-stu-id="61557-396">With ASP.NET Core 3.0, we recommend that all apps that require CORS use the CORS Middleware in tandem with Endpoint Routing.</span></span> <span data-ttu-id="61557-397">`UseCors`kann mit einer Standard Richtlinie angegeben werden, und `[EnableCors]` die-und- `[DisableCors]` Attribute können verwendet werden, um die Standard Richtlinie nach Bedarf zu überschreiben.</span><span class="sxs-lookup"><span data-stu-id="61557-397">`UseCors` can be provided with a default policy, and `[EnableCors]` and `[DisableCors]` attributes can be used to override the default policy where required.</span></span>

<span data-ttu-id="61557-398">Im folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="61557-398">In the following example:</span></span>

* <span data-ttu-id="61557-399">Cors ist für alle Endpunkte mit der `default` benannten Richtlinie aktiviert.</span><span class="sxs-lookup"><span data-stu-id="61557-399">CORS is enabled for all endpoints with the `default` named policy.</span></span>
* <span data-ttu-id="61557-400">Die- `MyController` Klasse deaktiviert cors mit dem- `[DisableCors]` Attribut.</span><span class="sxs-lookup"><span data-stu-id="61557-400">The `MyController` class disables CORS with the `[DisableCors]` attribute.</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    ...

    app.UseRouting();

    app.UseCors("default");

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapDefaultControllerRoute();
    });
}

[DisableCors]
public class MyController : ControllerBase
{
    ...
}
```

#### <a name="authorization"></a><span data-ttu-id="61557-401">Authorization</span><span class="sxs-lookup"><span data-stu-id="61557-401">Authorization</span></span>

<span data-ttu-id="61557-402">In früheren Versionen von ASP.net Core wurde Unterstützung der Autorisierung über das-Attribut bereitgestellt `[Authorize]` .</span><span class="sxs-lookup"><span data-stu-id="61557-402">In earlier versions of ASP.NET Core, authorization support was provided via the `[Authorize]` attribute.</span></span> <span data-ttu-id="61557-403">Die Autorisierungs Middleware war nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="61557-403">Authorization middleware wasn't available.</span></span> <span data-ttu-id="61557-404">In ASP.net Core 3,0 ist die Autorisierungs Middleware erforderlich.</span><span class="sxs-lookup"><span data-stu-id="61557-404">In ASP.NET Core 3.0, authorization middleware is required.</span></span> <span data-ttu-id="61557-405">Es wird empfohlen, die ASP.net Core Autorisierungs Middleware ( `UseAuthorization` ) direkt nach zu platzieren `UseAuthentication` .</span><span class="sxs-lookup"><span data-stu-id="61557-405">We recommend placing the ASP.NET Core Authorization Middleware (`UseAuthorization`) immediately after `UseAuthentication`.</span></span> <span data-ttu-id="61557-406">Die Middleware für die Autorisierung kann auch mit einer Standard Richtlinie konfiguriert werden, die überschrieben werden kann.</span><span class="sxs-lookup"><span data-stu-id="61557-406">The Authorization Middleware can also be configured with a default policy, which can be overridden.</span></span>

<span data-ttu-id="61557-407">In ASP.net Core 3,0 oder höher `UseAuthorization` wird in aufgerufen `Startup.Configure` , und für Folgendes ist ein angemeldeter `HomeController` Benutzer erforderlich:</span><span class="sxs-lookup"><span data-stu-id="61557-407">In ASP.NET Core 3.0 or later, `UseAuthorization` is called in `Startup.Configure`, and the following `HomeController` requires a signed in user:</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    ...

    app.UseRouting();

    app.UseAuthentication();
    app.UseAuthorization();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapDefaultControllerRoute();
    });
}

public class HomeController : Controller
{
    [Authorize]
    public IActionResult BuyWidgets()
    {
        ...
    }
}
```

<span data-ttu-id="61557-408">Wenn Sie das Endpunkt Routing verwenden, wird empfohlen, `<xref:Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter>` die Autorisierungs Middleware zu konfigurieren und stattdessen darauf zu vertrauen.</span><span class="sxs-lookup"><span data-stu-id="61557-408">When using endpoint routing, we recommend against configuring `<xref:Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter>` and instead relying on the Authorization middleware.</span></span>  <span data-ttu-id="61557-409">Wenn die APP `AuthorizeFilter` als globaler Filter in MVC verwendet, empfiehlt es sich, den Code so zu umgestalten, dass er eine Richtlinie im-Befehl bereitstellt `AddAuthorization` .</span><span class="sxs-lookup"><span data-stu-id="61557-409">If the app uses an `AuthorizeFilter` as a global filter in MVC, we recommend refactoring the code to provide a policy in the call to `AddAuthorization`.</span></span>

<span data-ttu-id="61557-410">Das `DefaultPolicy` ist anfänglich so konfiguriert, dass eine Authentifizierung erforderlich ist, sodass keine zusätzliche Konfiguration erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="61557-410">The `DefaultPolicy` is initially configured to require authentication, so no additional configuration is required.</span></span> <span data-ttu-id="61557-411">Im folgenden Beispiel werden die MVC-Endpunkte als markiert, `RequireAuthorization` sodass alle Anforderungen auf der Grundlage von autorisiert werden müssen `DefaultPolicy` .</span><span class="sxs-lookup"><span data-stu-id="61557-411">In the following example, MVC endpoints are marked as `RequireAuthorization` so that all requests must be authorized based on the `DefaultPolicy`.</span></span> <span data-ttu-id="61557-412">Der ermöglicht jedoch den `HomeController` Zugriff, ohne dass der Benutzer sich bei der App anmeldet. Dies liegt an folgendem `[AllowAnonymous]` :</span><span class="sxs-lookup"><span data-stu-id="61557-412">However, the `HomeController` allows access without the user signing into the app due to `[AllowAnonymous]`:</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    ...

    app.UseRouting();

    app.UseAuthentication();
    app.UseAuthorization();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapDefaultControllerRoute().RequireAuthorization();
    });
}

[AllowAnonymous]
public class HomeController : Controller
{
    ...
}
```

### <a name="authorization-for-specific-endpoints"></a><span data-ttu-id="61557-413">Autorisierung für bestimmte Endpunkte</span><span class="sxs-lookup"><span data-stu-id="61557-413">Authorization for specific endpoints</span></span>

<span data-ttu-id="61557-414">Die Autorisierung kann auch für bestimmte Klassen von Endpunkten konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="61557-414">Authorization can also be configured for specific classes of endpoints.</span></span> <span data-ttu-id="61557-415">Der folgende Code ist ein Beispiel für die Umstellung einer MVC-APP, die eine globale `AuthorizeFilter` in eine APP mit einer bestimmten Richtlinie konfiguriert, die eine Autorisierung erfordert:</span><span class="sxs-lookup"><span data-stu-id="61557-415">The following code is an example of converting an MVC app that configured a global `AuthorizeFilter` to an app with a specific policy requiring authorization:</span></span>

[!code-csharp[](22-to-30/samples/Startup.cs?name=snippet&highlight=8-9,21-22,26-27,53-54)]

<span data-ttu-id="61557-416">Richtlinien können auch angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="61557-416">Policies can also be customized.</span></span> <span data-ttu-id="61557-417">Der `DefaultPolicy` ist so konfiguriert, dass eine Authentifizierung erforderlich ist:</span><span class="sxs-lookup"><span data-stu-id="61557-417">The `DefaultPolicy` is configured to require authentication:</span></span>

[!code-csharp[](22-to-30/samples/Startup2.cs?name=snippet&highlight=21-26,52)]

[!code-csharp[](22-to-30/samples/HomeController.cs?name=snippet)]

<span data-ttu-id="61557-418">Alternativ können alle Endpunkte so konfiguriert werden, dass Sie ohne `[Authorize]` oder `RequireAuthorization` durch Konfigurieren von eine Autorisierung erfordern `FallbackPolicy` .</span><span class="sxs-lookup"><span data-stu-id="61557-418">Alternatively, all endpoints can be configured to require authorization without `[Authorize]` or `RequireAuthorization` by configuring a `FallbackPolicy`.</span></span> <span data-ttu-id="61557-419">Der `FallbackPolicy` unterscheidet sich vom `DefaultPolicy` .</span><span class="sxs-lookup"><span data-stu-id="61557-419">The `FallbackPolicy` is different from the `DefaultPolicy`.</span></span> <span data-ttu-id="61557-420">`DefaultPolicy`Wird von oder ausgelöst `[Authorize]` `RequireAuthorization` , während das `FallbackPolicy` ausgelöst wird, wenn keine andere Richtlinie festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="61557-420">The `DefaultPolicy` is triggered by `[Authorize]` or `RequireAuthorization`, while the `FallbackPolicy` is triggered when no other policy is set.</span></span> <span data-ttu-id="61557-421">`FallbackPolicy`ist anfänglich so konfiguriert, dass Anforderungen ohne Autorisierung zugelassen werden.</span><span class="sxs-lookup"><span data-stu-id="61557-421">`FallbackPolicy` is initially configured to allow requests without authorization.</span></span>

<span data-ttu-id="61557-422">Das folgende Beispiel ist identisch mit dem vorherigen `DefaultPolicy` Beispiel, verwendet jedoch `FallbackPolicy` , um immer eine Authentifizierung für alle Endpunkte anzufordern, außer wenn `[AllowAnonymous]` angegeben ist:</span><span class="sxs-lookup"><span data-stu-id="61557-422">The following example is the same as the preceding `DefaultPolicy` example but uses the `FallbackPolicy` to always require authentication on all endpoints except when `[AllowAnonymous]` is specified:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    ...

    services.AddAuthorization(options =>
    {
        options.FallbackPolicy = new AuthorizationPolicyBuilder()
          .RequireAuthenticatedUser()
          .Build();
    });
}

public void Configure(IApplicationBuilder app)
{
    ...

    app.UseRouting();

    app.UseAuthentication();
    app.UseAuthorization();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapDefaultControllerRoute();
    });
}

[AllowAnonymous]
public class HomeController : Controller
{
    ...
}
```

<span data-ttu-id="61557-423">Die Autorisierung durch Middleware funktioniert, ohne dass das Framework über bestimmte Kenntnisse der Autorisierung verfügt.</span><span class="sxs-lookup"><span data-stu-id="61557-423">Authorization by middleware works without the framework having any specific knowledge of authorization.</span></span> <span data-ttu-id="61557-424">Integritäts [Prüfungen](xref:host-and-deploy/health-checks) haben beispielsweise keine spezifischen Kenntnisse der Autorisierung, aber Integritätsprüfungen können eine konfigurierbare Autorisierungs Richtlinie aufweisen, die von der Middleware angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="61557-424">For instance, [health checks](xref:host-and-deploy/health-checks) has no specific knowledge of authorization, but health checks can have a configurable authorization policy applied by the middleware.</span></span>

<span data-ttu-id="61557-425">Außerdem kann jeder Endpunkt seine Autorisierungs Anforderungen anpassen.</span><span class="sxs-lookup"><span data-stu-id="61557-425">Additionally, each endpoint can customize its authorization requirements.</span></span> <span data-ttu-id="61557-426">Im folgenden Beispiel wird die `UseAuthorization` Autorisierung mit der verarbeitet `DefaultPolicy` , aber der Integritäts `/healthz` Prüfung-Endpunkt erfordert einen `admin` Benutzer:</span><span class="sxs-lookup"><span data-stu-id="61557-426">In the following example, `UseAuthorization` processes authorization with the `DefaultPolicy`, but the `/healthz` health check endpoint requires an `admin` user:</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    ...

    app.UseRouting();

    app.UseAuthentication();
    app.UseAuthorization();

    app.UseEndpoints(endpoints =>
    {
        endpoints
            .MapHealthChecks("/healthz")
            .RequireAuthorization(new AuthorizeAttribute(){ Roles = "admin", });
    });
}
```

<span data-ttu-id="61557-427">Der Schutz wird für einige Szenarien implementiert.</span><span class="sxs-lookup"><span data-stu-id="61557-427">Protection is implemented for some scenarios.</span></span> <span data-ttu-id="61557-428">Die Middleware für Endpunkte löst eine Ausnahme aus, wenn eine Autorisierungs-oder cors-Richtlinie aufgrund fehlender Middleware übersprungen wird.</span><span class="sxs-lookup"><span data-stu-id="61557-428">Endpoints Middleware throws an exception if an authorization or CORS policy is skipped due to missing middleware.</span></span> <span data-ttu-id="61557-429">Analyse Unterstützung, um zusätzliches Feedback zur Fehlkonfiguration bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="61557-429">Analyzer support to provide additional feedback about misconfiguration is in progress.</span></span>

#### <a name="custom-authorization-handlers"></a><span data-ttu-id="61557-430">Benutzerdefinierte Autorisierungs Handler</span><span class="sxs-lookup"><span data-stu-id="61557-430">Custom authorization handlers</span></span>

<span data-ttu-id="61557-431">Wenn die APP benutzerdefinierte [Autorisierungs Handler](xref:security/authorization/policies#authorization-handlers)verwendet, übergibt das Endpunkt Routing einen anderen Ressourcentyp an Handler als MVC.</span><span class="sxs-lookup"><span data-stu-id="61557-431">If the app uses custom [authorization handlers](xref:security/authorization/policies#authorization-handlers), endpoint routing passes a different resource type to handlers than MVC.</span></span> <span data-ttu-id="61557-432">Handler, die erwarten, dass die Kontext Ressource des Autorisierungs Handler vom Typ ist <xref:Microsoft.AspNetCore.Mvc.Filters.AuthorizationFilterContext> (der [von MVC-Filtern bereitgestellte](xref:security/authorization/policies#accessing-mvc-request-context-in-handlers)Ressourcentyp), muss aktualisiert werden, damit die Ressourcen des Typs <xref:Microsoft.AspNetCore.Routing.RouteEndpoint> (der Ressourcentyp, der den Autorisierungs Handlern durch Endpunkt Routing zugewiesen ist) verarbeitet werden</span><span class="sxs-lookup"><span data-stu-id="61557-432">Handlers that expect the authorization handler context resource to be of type <xref:Microsoft.AspNetCore.Mvc.Filters.AuthorizationFilterContext> (the resource type [provided by MVC filters](xref:security/authorization/policies#accessing-mvc-request-context-in-handlers)) will need to be updated to handle resources of type <xref:Microsoft.AspNetCore.Routing.RouteEndpoint> (the resource type given to authorization handlers by endpoint routing).</span></span>

<span data-ttu-id="61557-433">Da MVC weiterhin `AuthorizationFilterContext` Ressourcen verwendet, ist es möglicherweise erforderlich, beide Arten von Ressourcen zu verarbeiten, wenn die APP MVC-Autorisierungs Filter zusammen mit der Endpunkt Weiterleitungs Autorisierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="61557-433">MVC still uses `AuthorizationFilterContext` resources, so if the app uses MVC authorization filters along with endpoint routing authorization, it may be necessary to handle both types of resources.</span></span>

### SignalR

<span data-ttu-id="61557-434">Die Zuordnung von SignalR Hubs erfolgt nun in `UseEndpoints` .</span><span class="sxs-lookup"><span data-stu-id="61557-434">Mapping of SignalR hubs now takes place inside `UseEndpoints`.</span></span>

<span data-ttu-id="61557-435">Ordnen Sie jeden Hub mit zu `MapHub` .</span><span class="sxs-lookup"><span data-stu-id="61557-435">Map each hub with `MapHub`.</span></span> <span data-ttu-id="61557-436">Wie in früheren Versionen wird jeder Hub explizit aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="61557-436">As in previous versions, each hub is explicitly listed.</span></span>

<span data-ttu-id="61557-437">Im folgenden Beispiel wird die Unterstützung für den `ChatHub` SignalR Hub hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="61557-437">In the following example, support for the `ChatHub` SignalR hub is added:</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    ...

    app.UseRouting();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapHub<ChatHub>();
    });
}
```

<span data-ttu-id="61557-438">Es gibt eine neue Option zum Steuern von Größenbeschränkungen für Nachrichten von Clients.</span><span class="sxs-lookup"><span data-stu-id="61557-438">There is a new option for controlling message size limits from clients.</span></span> <span data-ttu-id="61557-439">Gehen Sie beispielsweise in `Startup.ConfigureServices` folgendermaßen vor:</span><span class="sxs-lookup"><span data-stu-id="61557-439">For example, in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddSignalR(hubOptions =>
{
    hubOptions.MaximumReceiveMessageSize = 32768;
});
```

<span data-ttu-id="61557-440">In ASP.net Core 2,2 konnten Sie die festlegen, die `TransportMaxBufferSize` die maximale Nachrichtengröße effektiv steuern würde.</span><span class="sxs-lookup"><span data-stu-id="61557-440">In ASP.NET Core 2.2, you could set the `TransportMaxBufferSize` and that would effectively control the maximum message size.</span></span> <span data-ttu-id="61557-441">In ASP.net Core 3,0 steuert diese Option jetzt nur die maximale Größe, bevor der Rückdruck festgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="61557-441">In ASP.NET Core 3.0, that option now only controls the maximum size before backpressure is observed.</span></span>

### <a name="mvc-controllers"></a><span data-ttu-id="61557-442">MVC-Controller</span><span class="sxs-lookup"><span data-stu-id="61557-442">MVC controllers</span></span>

<span data-ttu-id="61557-443">Die Zuordnung von Controllern erfolgt nun in `UseEndpoints` .</span><span class="sxs-lookup"><span data-stu-id="61557-443">Mapping of controllers now takes place inside `UseEndpoints`.</span></span>

<span data-ttu-id="61557-444">Fügen Sie hinzu, `MapControllers` Wenn die APP Attribut Routing verwendet.</span><span class="sxs-lookup"><span data-stu-id="61557-444">Add `MapControllers` if the app uses attribute routing.</span></span> <span data-ttu-id="61557-445">Da das Routing Unterstützung für viele Frameworks in ASP.net Core 3,0 oder höher bietet, ist das Hinzufügen von Attribut Weiterleitungs Controllern ein Opt-in.</span><span class="sxs-lookup"><span data-stu-id="61557-445">Since routing includes support for many frameworks in ASP.NET Core 3.0 or later, adding attribute-routed controllers is opt-in.</span></span>

<span data-ttu-id="61557-446">Ersetzen Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="61557-446">Replace the following:</span></span>

* <span data-ttu-id="61557-447">`MapRoute` mit `MapControllerRoute`</span><span class="sxs-lookup"><span data-stu-id="61557-447">`MapRoute` with `MapControllerRoute`</span></span>
* <span data-ttu-id="61557-448">`MapAreaRoute` mit `MapAreaControllerRoute`</span><span class="sxs-lookup"><span data-stu-id="61557-448">`MapAreaRoute` with `MapAreaControllerRoute`</span></span>

<span data-ttu-id="61557-449">Da das Routing nun die Unterstützung für mehr als nur MVC umfasst, hat sich die Terminologie geändert, damit diese Methoden deutlich erkennen können, was Sie tun.</span><span class="sxs-lookup"><span data-stu-id="61557-449">Since routing now includes support for more than just MVC, the terminology has changed to make these methods clearly state what they do.</span></span> <span data-ttu-id="61557-450">Herkömmliche Routen wie `MapControllerRoute` / `MapAreaControllerRoute` / `MapDefaultControllerRoute` werden in der Reihenfolge angewendet, in der Sie hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="61557-450">Conventional routes such as `MapControllerRoute`/`MapAreaControllerRoute`/`MapDefaultControllerRoute` are applied in the order that they're added.</span></span> <span data-ttu-id="61557-451">Platzieren Sie zunächst spezifischere Routen (z. b. Routen für einen Bereich).</span><span class="sxs-lookup"><span data-stu-id="61557-451">Place more specific routes (such as routes for an area) first.</span></span>

<span data-ttu-id="61557-452">Im folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="61557-452">In the following example:</span></span>

* <span data-ttu-id="61557-453">`MapControllers`Fügt Unterstützung für Attribut Weiterleitungs Controller hinzu.</span><span class="sxs-lookup"><span data-stu-id="61557-453">`MapControllers` adds support for attribute-routed controllers.</span></span>
* <span data-ttu-id="61557-454">`MapAreaControllerRoute`Fügt eine konventionelle Route für Controller in einem Bereich hinzu.</span><span class="sxs-lookup"><span data-stu-id="61557-454">`MapAreaControllerRoute` adds a conventional route for controllers in an area.</span></span>
* <span data-ttu-id="61557-455">`MapControllerRoute`Fügt eine konventionelle Route für Controller hinzu.</span><span class="sxs-lookup"><span data-stu-id="61557-455">`MapControllerRoute` adds a conventional route for controllers.</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    ...

    app.UseRouting();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapControllers();
        endpoints.MapAreaControllerRoute(
            "admin",
            "admin",
            "Admin/{controller=Home}/{action=Index}/{id?}");
        endpoints.MapControllerRoute(
            "default", "{controller=Home}/{action=Index}/{id?}");
    });
}
```

#### <a name="async-suffix-removal-from-controller-action-names"></a><span data-ttu-id="61557-456">Asynchrones Suffix aus Controller-Aktions Namen entfernen</span><span class="sxs-lookup"><span data-stu-id="61557-456">Async suffix removal from controller action names</span></span>

<span data-ttu-id="61557-457">In ASP.net Core 3,0 entfernt ASP.net Core MVC das `Async` Suffix aus den Controller Aktions Namen.</span><span class="sxs-lookup"><span data-stu-id="61557-457">In ASP.NET Core 3.0, ASP.NET Core MVC removes the `Async` suffix from controller action names.</span></span> <span data-ttu-id="61557-458">Das Routing und die Verknüpfungs Generierung sind von dieser neuen Standardeinstellung betroffen.</span><span class="sxs-lookup"><span data-stu-id="61557-458">Both routing and link generation are impacted by this new default.</span></span> <span data-ttu-id="61557-459">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="61557-459">For example:</span></span>

```csharp
public class ProductsController : Controller
{
    public async Task<IActionResult> ListAsync()
    {
        var model = await _dbContext.Products.ToListAsync();
        return View(model);
    }
}
```

<span data-ttu-id="61557-460">Vor ASP.net Core 3,0:</span><span class="sxs-lookup"><span data-stu-id="61557-460">Prior to ASP.NET Core 3.0:</span></span>

* <span data-ttu-id="61557-461">Auf die vorherige Aktion kann auf der Route " *Products/listasync* " zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="61557-461">The preceding action could be accessed at the *Products/ListAsync* route.</span></span>
* <span data-ttu-id="61557-462">Die Link Generierung erforderte das Angeben des Suffixes `Async` .</span><span class="sxs-lookup"><span data-stu-id="61557-462">Link generation required specifying the `Async` suffix.</span></span> <span data-ttu-id="61557-463">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="61557-463">For example:</span></span>

    ```cshtml
    <a asp-controller="Products" asp-action="ListAsync">List</a>
    ```

<span data-ttu-id="61557-464">In ASP.net Core 3,0:</span><span class="sxs-lookup"><span data-stu-id="61557-464">In ASP.NET Core 3.0:</span></span>

* <span data-ttu-id="61557-465">Auf die vorangehende Aktion kann auf der Route " *Products/List* " zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="61557-465">The preceding action can be accessed at the *Products/List* route.</span></span>
* <span data-ttu-id="61557-466">Bei der Link Generierung muss das Suffix nicht angegeben werden `Async` .</span><span class="sxs-lookup"><span data-stu-id="61557-466">Link generation doesn't require specifying the `Async` suffix.</span></span> <span data-ttu-id="61557-467">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="61557-467">For example:</span></span>

    ```cshtml
    <a asp-controller="Products" asp-action="List">List</a>
    ```

<span data-ttu-id="61557-468">Diese Änderung wirkt sich nicht auf die mit dem-Attribut angegebenen Namen aus [`[ActionName]`](/dotnet/api/microsoft.aspnetcore.mvc.actionnameattribute) .</span><span class="sxs-lookup"><span data-stu-id="61557-468">This change doesn't affect names specified using the [`[ActionName]`](/dotnet/api/microsoft.aspnetcore.mvc.actionnameattribute) attribute.</span></span> <span data-ttu-id="61557-469">Das Standardverhalten kann mit dem folgenden Code in deaktiviert werden `Startup.ConfigureServices` :</span><span class="sxs-lookup"><span data-stu-id="61557-469">The default behavior can be disabled with the following code in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddMvc(options =>
    options.SuppressAsyncSuffixInActionNames = false);
```

#### <a name="changes-to-link-generation"></a><span data-ttu-id="61557-470">Änderungen an der Link Generierung</span><span class="sxs-lookup"><span data-stu-id="61557-470">Changes to link generation</span></span>

<span data-ttu-id="61557-471">Wie in der Dokumentation zu den [unterschieden aus früheren Versionen des Routings](xref:fundamentals/routing#differences-from-earlier-versions-of-routing)erläutert, gibt es einige Unterschiede bei der Link Generierung ( `Url.Link` z. b. mit und ähnlichen APIs).</span><span class="sxs-lookup"><span data-stu-id="61557-471">As explained in documentation on [differences from earlier versions of routing](xref:fundamentals/routing#differences-from-earlier-versions-of-routing), there are some differences in link generation (using `Url.Link` and similar APIs, for example).</span></span> <span data-ttu-id="61557-472">Dazu gehören:</span><span class="sxs-lookup"><span data-stu-id="61557-472">These include:</span></span>

* <span data-ttu-id="61557-473">Wenn Sie das Endpunkt Routing verwenden, wird die Groß-/Kleinschreibung von Routen Parametern in generierten URIs standardmäßig nicht zwangsläufig beibehalten.</span><span class="sxs-lookup"><span data-stu-id="61557-473">By default, when using endpoint routing, casing of route parameters in generated URIs is not necessarily preserved.</span></span> <span data-ttu-id="61557-474">Dieses Verhalten kann mit der- `IOutboundParameterTransformer` Schnittstelle gesteuert werden.</span><span class="sxs-lookup"><span data-stu-id="61557-474">This behavior can be controlled with the `IOutboundParameterTransformer` interface.</span></span>
* <span data-ttu-id="61557-475">Wenn Sie einen URI für eine ungültige Route generieren (ein Controller, eine Aktion oder eine Seite, die nicht vorhanden ist), wird unter Endpunkt Routing eine leere Zeichenfolge erstellt, anstatt einen ungültigen URI zu erzeugen.</span><span class="sxs-lookup"><span data-stu-id="61557-475">Generating a URI for an invalid route (a controller/action or page that doesn't exist) will produce an empty string under endpoint routing instead of producing an invalid URI.</span></span>
* <span data-ttu-id="61557-476">Ambient-Werte (Routen Parameter aus dem aktuellen Kontext) werden bei der Link Generierung mit dem Endpunkt Routing nicht automatisch verwendet.</span><span class="sxs-lookup"><span data-stu-id="61557-476">Ambient values (route parameters from the current context) are not automatically used in link generation with endpoint routing.</span></span> <span data-ttu-id="61557-477">Zuvor wurden bei der Erstellung eines Links zu einer anderen Aktion (oder Seite) nicht angegebene Routen Werte von den *aktuellen* Routen Werten abgeleitet.</span><span class="sxs-lookup"><span data-stu-id="61557-477">Previously, when generating a link to another action (or page), unspecified route values would be inferred from the *current* routes ambient values.</span></span> <span data-ttu-id="61557-478">Bei Verwendung des Endpunkt Routings müssen alle Routen Parameter während der Link Generierung explizit angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="61557-478">When using endpoint routing, all route parameters must be specified explicitly during link generation.</span></span>

### <a name="razor-pages"></a>Razor<span data-ttu-id="61557-479"> Pages</span><span class="sxs-lookup"><span data-stu-id="61557-479"> Pages</span></span>

<span data-ttu-id="61557-480">Die Zuordnung von Razor Seiten erfolgt nun in `UseEndpoints` .</span><span class="sxs-lookup"><span data-stu-id="61557-480">Mapping Razor Pages now takes place inside `UseEndpoints`.</span></span>

<span data-ttu-id="61557-481">Fügen Sie hinzu, `MapRazorPages` Wenn die APP Razor Seiten verwendet.</span><span class="sxs-lookup"><span data-stu-id="61557-481">Add `MapRazorPages` if the app uses Razor Pages.</span></span> <span data-ttu-id="61557-482">Da das Endpunkt Routing Unterstützung für viele Frameworks umfasst, ist das Hinzufügen von Razor Seiten jetzt deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="61557-482">Since Endpoint Routing includes support for many frameworks, adding Razor Pages is now opt-in.</span></span>

<span data-ttu-id="61557-483">In der folgenden `Startup.Configure` Methode `MapRazorPages` Fügt Unterstützung für Razor Seiten hinzu:</span><span class="sxs-lookup"><span data-stu-id="61557-483">In the following `Startup.Configure` method, `MapRazorPages` adds support for Razor Pages:</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    ...

    app.UseRouting();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapRazorPages();
    });
}
```

### <a name="use-mvc-without-endpoint-routing"></a><span data-ttu-id="61557-484">Verwenden von MVC ohne Endpunkt Routing</span><span class="sxs-lookup"><span data-stu-id="61557-484">Use MVC without Endpoint Routing</span></span>

<span data-ttu-id="61557-485">Die Verwendung von MVC über `UseMvc` oder `UseMvcWithDefaultRoute` in ASP.net Core 3,0 erfordert ein explizites Opt-in in `Startup.ConfigureServices` .</span><span class="sxs-lookup"><span data-stu-id="61557-485">Using MVC via `UseMvc` or `UseMvcWithDefaultRoute` in ASP.NET Core 3.0 requires an explicit opt-in inside `Startup.ConfigureServices`.</span></span> <span data-ttu-id="61557-486">Dies ist erforderlich, da MVC wissen muss, ob es während der Initialisierung auf die Autorisierung und die cors-Middleware zurückgreifen kann.</span><span class="sxs-lookup"><span data-stu-id="61557-486">This is required because MVC must know whether it can rely on the authorization and CORS Middleware during initialization.</span></span> <span data-ttu-id="61557-487">Es wird ein Analyzer bereitgestellt, der warnt, wenn die APP versucht, eine nicht unterstützte Konfiguration zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="61557-487">An analyzer is provided that warns if the app attempts to use an unsupported configuration.</span></span>

<span data-ttu-id="61557-488">Wenn die APP Legacy `IRouter` Unterstützung erfordert, deaktivieren `EnableEndpointRouting` Sie die Verwendung der folgenden Ansätze in `Startup.ConfigureServices` :</span><span class="sxs-lookup"><span data-stu-id="61557-488">If the app requires legacy `IRouter` support, disable `EnableEndpointRouting` using any of the following approaches in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddMvc(options => options.EnableEndpointRouting = false);
```

```csharp
services.AddControllers(options => options.EnableEndpointRouting = false);
```

```csharp
services.AddControllersWithViews(options => options.EnableEndpointRouting = false);
```

```csharp
services.AddRazorPages().AddMvcOptions(options => options.EnableEndpointRouting = false);
```

### <a name="health-checks"></a><span data-ttu-id="61557-489">Integritätsprüfungen</span><span class="sxs-lookup"><span data-stu-id="61557-489">Health checks</span></span>

<span data-ttu-id="61557-490">Integritätsprüfungen können als *routerware* mit Endpunkt Routing verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="61557-490">Health checks can be used as a *router-ware* with Endpoint Routing.</span></span>

<span data-ttu-id="61557-491">Fügen Sie hinzu `MapHealthChecks` , um Integritätsprüfungen mit Endpunkt Routing zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="61557-491">Add `MapHealthChecks` to use health checks with Endpoint Routing.</span></span> <span data-ttu-id="61557-492">Die- `MapHealthChecks` Methode akzeptiert Argumente ähnlich wie `UseHealthChecks` .</span><span class="sxs-lookup"><span data-stu-id="61557-492">The `MapHealthChecks` method accepts arguments similar to `UseHealthChecks`.</span></span> <span data-ttu-id="61557-493">Der Vorteil der Verwendung von `MapHealthChecks` over `UseHealthChecks` ist die Fähigkeit, Autorisierung anzuwenden und eine präzisere Kontrolle über die abgleichsrichtlinie zu haben.</span><span class="sxs-lookup"><span data-stu-id="61557-493">The advantage of using `MapHealthChecks` over `UseHealthChecks` is the ability to apply authorization and to have greater fine-grained control over the matching policy.</span></span>

<span data-ttu-id="61557-494">Im folgenden Beispiel `MapHealthChecks` wird für einen Integritäts Prüf Punkt aufgerufen `/healthz` :</span><span class="sxs-lookup"><span data-stu-id="61557-494">In the following example, `MapHealthChecks` is called for a health check endpoint at `/healthz`:</span></span>

```csharp
public void Configure(IApplicationBuilder app)
{
    ...

    app.UseRouting();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapHealthChecks("/healthz", new HealthCheckOptions() { });
    });
}
```

<a name="hostb"></a>

## <a name="hostbuilder-replaces-webhostbuilder"></a><span data-ttu-id="61557-495">Der hostbuilder ersetzt webhostbuilder.</span><span class="sxs-lookup"><span data-stu-id="61557-495">HostBuilder replaces WebHostBuilder</span></span>

<span data-ttu-id="61557-496">In den ASP.net Core 3,0-Vorlagen wird [generischer Host](xref:fundamentals/host/generic-host)verwendet.</span><span class="sxs-lookup"><span data-stu-id="61557-496">The ASP.NET Core 3.0 templates use [Generic Host](xref:fundamentals/host/generic-host).</span></span> <span data-ttu-id="61557-497">In früheren Versionen wurde [Webhost](xref:fundamentals/host/web-host)verwendet.</span><span class="sxs-lookup"><span data-stu-id="61557-497">Previous versions used [Web Host](xref:fundamentals/host/web-host).</span></span> <span data-ttu-id="61557-498">Der folgende Code zeigt die von der ASP.net Core 3,0-Vorlage generierte `Program` Klasse:</span><span class="sxs-lookup"><span data-stu-id="61557-498">The following code shows the ASP.NET Core 3.0 template generated `Program` class:</span></span>

[!code-csharp[](22-to-30/samples/Program.cs?name=snippet)]

<span data-ttu-id="61557-499">Der folgende Code zeigt die von der Vorlage generierte ASP.net Core 2,2- `Program` Klasse:</span><span class="sxs-lookup"><span data-stu-id="61557-499">The following code shows the ASP.NET Core 2.2 template-generated `Program` class:</span></span>

[!code-csharp[](22-to-30/samples/Program2.2.cs?name=snippet)]

<span data-ttu-id="61557-500"><xref:Microsoft.AspNetCore.Hosting.IWebHostBuilder>verbleibt in 3,0 und ist der Typ von, der `webBuilder` im vorangehenden Codebeispiel angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="61557-500"><xref:Microsoft.AspNetCore.Hosting.IWebHostBuilder> remains in 3.0 and is the type of the `webBuilder` seen in the preceding code sample.</span></span> <span data-ttu-id="61557-501"><xref:Microsoft.AspNetCore.Hosting.WebHostBuilder>wird in einer zukünftigen Version als veraltet markiert und durch ersetzt `HostBuilder` .</span><span class="sxs-lookup"><span data-stu-id="61557-501"><xref:Microsoft.AspNetCore.Hosting.WebHostBuilder> will be deprecated in a future release and replaced by `HostBuilder`.</span></span>

<span data-ttu-id="61557-502">Die signifikanteste Änderung von in `WebHostBuilder` `HostBuilder` ist die [Abhängigkeitsinjektion (di)](xref:fundamentals/dependency-injection).</span><span class="sxs-lookup"><span data-stu-id="61557-502">The most significant change from `WebHostBuilder` to `HostBuilder` is in [dependency injection (DI)](xref:fundamentals/dependency-injection).</span></span> <span data-ttu-id="61557-503">Wenn `HostBuilder` Sie verwenden, können Sie nur den folgenden in `Startup` den-Konstruktor einfügen:</span><span class="sxs-lookup"><span data-stu-id="61557-503">When using `HostBuilder`, you can only inject the following into `Startup`'s constructor:</span></span>

* <xref:Microsoft.Extensions.Configuration.IConfiguration>
* <xref:Microsoft.Extensions.Hosting.IHostEnvironment>
* <xref:Microsoft.AspNetCore.Hosting.IWebHostEnvironment>

<span data-ttu-id="61557-504">Die `HostBuilder` di-Einschränkungen:</span><span class="sxs-lookup"><span data-stu-id="61557-504">The `HostBuilder` DI constraints:</span></span>

* <span data-ttu-id="61557-505">Aktivieren Sie den di-Container nur ein einziges Mal.</span><span class="sxs-lookup"><span data-stu-id="61557-505">Enable the DI container to be built only one time.</span></span>
* <span data-ttu-id="61557-506">Vermeidet die resultierenden Probleme bei der Objekt Lebensdauer wie das Auflösen mehrerer Instanzen von Singletons.</span><span class="sxs-lookup"><span data-stu-id="61557-506">Avoids the resulting object lifetime issues like resolving multiple instances of singletons.</span></span>

<span data-ttu-id="61557-507">Weitere Informationen finden Sie unter [vermeiden der Start Dienst Injektion in ASP.net Core 3](https://andrewlock.net/avoiding-startup-service-injection-in-asp-net-core-3/).</span><span class="sxs-lookup"><span data-stu-id="61557-507">For more information, see [Avoiding Startup service injection in ASP.NET Core 3](https://andrewlock.net/avoiding-startup-service-injection-in-asp-net-core-3/).</span></span>

## <a name="addauthorization-moved-to-a-different-assembly"></a><span data-ttu-id="61557-508">Addauthorization in eine andere Assembly verschoben</span><span class="sxs-lookup"><span data-stu-id="61557-508">AddAuthorization moved to a different assembly</span></span>

<span data-ttu-id="61557-509">Die Methoden ASP.net Core 2,2 und niedriger `AddAuthorization` in *Microsoft. aspnetcore. Authorization. dll*:</span><span class="sxs-lookup"><span data-stu-id="61557-509">The ASP.NET Core 2.2 and lower `AddAuthorization` methods in *Microsoft.AspNetCore.Authorization.dll*:</span></span>

* <span data-ttu-id="61557-510">Wurden umbenannt `AddAuthorizationCore` .</span><span class="sxs-lookup"><span data-stu-id="61557-510">Have been renamed `AddAuthorizationCore`.</span></span>
* <span data-ttu-id="61557-511">Wurden in " *Microsoft. aspnetcore. Authorization. Policy. dll*" verschoben.</span><span class="sxs-lookup"><span data-stu-id="61557-511">Have been moved to *Microsoft.AspNetCore.Authorization.Policy.dll*.</span></span>

<span data-ttu-id="61557-512">Apps, die sowohl *Microsoft. aspnetcore. Authorization. dll* als auch *Microsoft. aspnetcore. Authorization. Policy. dll* verwenden, sind nicht betroffen.</span><span class="sxs-lookup"><span data-stu-id="61557-512">Apps that are using both *Microsoft.AspNetCore.Authorization.dll* and *Microsoft.AspNetCore.Authorization.Policy.dll* aren't impacted.</span></span>

<span data-ttu-id="61557-513">Apps, die nicht *Microsoft. aspnetcore. Authorization. Policy. dll* verwenden, sollten eine der folgenden Aktionen ausführen:</span><span class="sxs-lookup"><span data-stu-id="61557-513">Apps that are not using *Microsoft.AspNetCore.Authorization.Policy.dll* should do one of the following:</span></span>

* <span data-ttu-id="61557-514">Fügen Sie einen Verweis auf *Microsoft. aspnetcore. Authorization. Policy. dll*hinzu.</span><span class="sxs-lookup"><span data-stu-id="61557-514">Add a reference to *Microsoft.AspNetCore.Authorization.Policy.dll*.</span></span> <span data-ttu-id="61557-515">Diese Vorgehensweise funktioniert für die meisten apps und ist alles, was erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="61557-515">This approach works for most apps and is all that is required.</span></span>
* <span data-ttu-id="61557-516">Wechseln zu mithilfe von`AddAuthorizationCore`</span><span class="sxs-lookup"><span data-stu-id="61557-516">Switch to using `AddAuthorizationCore`</span></span>

<span data-ttu-id="61557-517">Weitere Informationen finden Sie unter [Breaking Change in (Breaking Change in `AddAuthorization(o =>` ) der Überlastung in einer anderen Assembly #386](https://github.com/aspnet/Announcements/issues/386).</span><span class="sxs-lookup"><span data-stu-id="61557-517">For more information, see [Breaking change in `AddAuthorization(o =>`) overload lives in a different assembly #386](https://github.com/aspnet/Announcements/issues/386).</span></span>

## <a name="identity-ui"></a><span data-ttu-id="61557-518">Benutzeroberfläche von Identity</span><span class="sxs-lookup"><span data-stu-id="61557-518">Identity UI</span></span>

Identity<span data-ttu-id="61557-519">Aktualisierungen der Benutzeroberfläche für ASP.net Core 3,0:</span><span class="sxs-lookup"><span data-stu-id="61557-519"> UI updates for ASP.NET Core 3.0:</span></span>

* <span data-ttu-id="61557-520">Fügen Sie einen Paket Verweis auf [Microsoft. aspnetcore hinzu. Identity Benutzeroberfläche](https://nuget.org/packages/Microsoft.AspNetCore.Identity.UI).</span><span class="sxs-lookup"><span data-stu-id="61557-520">Add a package reference to [Microsoft.AspNetCore.Identity.UI](https://nuget.org/packages/Microsoft.AspNetCore.Identity.UI).</span></span>
* <span data-ttu-id="61557-521">Apps, die keine Razor Seiten verwenden, müssen aufruft `MapRazorPages` .</span><span class="sxs-lookup"><span data-stu-id="61557-521">Apps that don't use Razor Pages must call `MapRazorPages`.</span></span> <span data-ttu-id="61557-522">Siehe [ Razor Seiten](#razor-pages) in diesem Dokument.</span><span class="sxs-lookup"><span data-stu-id="61557-522">See [Razor Pages](#razor-pages) in this document.</span></span>
* <span data-ttu-id="61557-523">Bootstrap 4 ist das Standard Framework für die Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="61557-523">Bootstrap 4 is the default UI framework.</span></span> <span data-ttu-id="61557-524">Legen `IdentityUIFrameworkVersion` Sie eine Projekt Eigenschaft fest, um die Standardeinstellung zu ändern.</span><span class="sxs-lookup"><span data-stu-id="61557-524">Set an `IdentityUIFrameworkVersion` project property to change the default.</span></span> <span data-ttu-id="61557-525">Weitere Informationen finden Sie in [dieser GitHub-Ankündigung](https://github.com/aspnet/Announcements/issues/380).</span><span class="sxs-lookup"><span data-stu-id="61557-525">For more information, see [this GitHub announcement](https://github.com/aspnet/Announcements/issues/380).</span></span>

## SignalR

<span data-ttu-id="61557-526">Der SignalR JavaScript-Client wurde von `@aspnet/signalr` in geändert `@microsoft/signalr` .</span><span class="sxs-lookup"><span data-stu-id="61557-526">The SignalR JavaScript client has changed from `@aspnet/signalr` to `@microsoft/signalr`.</span></span> <span data-ttu-id="61557-527">Um auf diese Änderung zu reagieren, ändern Sie die Verweise in " *Package. JSON* "-Dateien, `require` -Anweisungen und ECMAScript- `import` Anweisungen.</span><span class="sxs-lookup"><span data-stu-id="61557-527">To react to this change, change the references in *package.json* files, `require` statements, and ECMAScript `import` statements.</span></span>

### <a name="systemtextjson-is-the-default-protocol"></a><span data-ttu-id="61557-528">"System. Text. JSON" ist das Standardprotokoll.</span><span class="sxs-lookup"><span data-stu-id="61557-528">System.Text.Json is the default protocol</span></span>

<span data-ttu-id="61557-529">`System.Text.Json`ist nun das Standardhub Protokoll, das sowohl vom Client als auch vom Server verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="61557-529">`System.Text.Json` is now the default Hub protocol used by both the client and server.</span></span>

<span data-ttu-id="61557-530">In `Startup.ConfigureServices` wird aufgerufen, `AddJsonProtocol` um Serialisierungsoptionen festzulegen.</span><span class="sxs-lookup"><span data-stu-id="61557-530">In `Startup.ConfigureServices`, call `AddJsonProtocol` to set serializer options.</span></span>

<span data-ttu-id="61557-531">**Servers**</span><span class="sxs-lookup"><span data-stu-id="61557-531">**Server:**</span></span>

```csharp
services.AddSignalR(...)
        .AddJsonProtocol(options =>
        {
            options.PayloadSerializerOptions.WriteIndented = false;
        })
```

<span data-ttu-id="61557-532">**Ent**</span><span class="sxs-lookup"><span data-stu-id="61557-532">**Client:**</span></span>

```csharp
new HubConnectionBuilder()
    .WithUrl("/chatHub")
    .AddJsonProtocol(options =>
    {
        options.PayloadSerializerOptions.WriteIndented = false;
    })
    .Build();
```

### <a name="switch-to-newtonsoftjson"></a><span data-ttu-id="61557-533">Wechseln Sie zu "newtonsoft. JSON".</span><span class="sxs-lookup"><span data-stu-id="61557-533">Switch to Newtonsoft.Json</span></span>

<span data-ttu-id="61557-534">Wenn Sie [Funktionen von "newtonsoft. JSON" verwenden, die in "System. Text. JSON" nicht unterstützt](/dotnet/standard/serialization/system-text-json-migrate-from-newtonsoft-how-to)werden, können Sie zurück zu wechseln `Newtonsoft.Json` .</span><span class="sxs-lookup"><span data-stu-id="61557-534">If you're using [features of Newtonsoft.Json that aren't supported in System.Text.Json](/dotnet/standard/serialization/system-text-json-migrate-from-newtonsoft-how-to), you can switch back to `Newtonsoft.Json`.</span></span> <span data-ttu-id="61557-535">Weitere Informationen finden Sie weiter oben in diesem Artikel [unter Verwenden von Newton Soft. JSON in einem ASP.net Core 3,0- SignalR Projekt](#use-newtonsoftjson-in-an-aspnet-core-30-signalr-project) .</span><span class="sxs-lookup"><span data-stu-id="61557-535">See [Use Newtonsoft.Json in an ASP.NET Core 3.0 SignalR project](#use-newtonsoftjson-in-an-aspnet-core-30-signalr-project) earlier in this article.</span></span>

## <a name="redis-distributed-caches"></a><span data-ttu-id="61557-536">Verteilte redis-Caches</span><span class="sxs-lookup"><span data-stu-id="61557-536">Redis distributed caches</span></span>

<span data-ttu-id="61557-537">Das [Microsoft. Extensions. Caching. redis](https://www.nuget.org/packages/Microsoft.Extensions.Caching.Redis) -Paket ist für 3,0 ASP.net Core-Apps oder höher nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="61557-537">The [Microsoft.Extensions.Caching.Redis](https://www.nuget.org/packages/Microsoft.Extensions.Caching.Redis) package isn't available for ASP.NET Core 3.0 or later apps.</span></span> <span data-ttu-id="61557-538">Ersetzen Sie den Paket Verweis durch [Microsoft. Extensions. Caching. stackexchangeredis](https://www.nuget.org/packages/Microsoft.Extensions.Caching.StackExchangeRedis).</span><span class="sxs-lookup"><span data-stu-id="61557-538">Replace the package reference with [Microsoft.Extensions.Caching.StackExchangeRedis](https://www.nuget.org/packages/Microsoft.Extensions.Caching.StackExchangeRedis).</span></span> <span data-ttu-id="61557-539">Weitere Informationen finden Sie unter <xref:performance/caching/distributed>.</span><span class="sxs-lookup"><span data-stu-id="61557-539">For more information, see <xref:performance/caching/distributed>.</span></span>

## <a name="opt-in-to-runtime-compilation"></a><span data-ttu-id="61557-540">Abonnieren der Lauf Zeit Kompilierung</span><span class="sxs-lookup"><span data-stu-id="61557-540">Opt in to runtime compilation</span></span>

<span data-ttu-id="61557-541">Vor ASP.net Core 3,0 war die Lauf Zeit Kompilierung von Sichten eine implizite Funktion des Frameworks.</span><span class="sxs-lookup"><span data-stu-id="61557-541">Prior to ASP.NET Core 3.0, runtime compilation of views was an implicit feature of the framework.</span></span> <span data-ttu-id="61557-542">Die Lauf Zeit Kompilierung ergänzt die Kompilierung der Erstellung von Sichten.</span><span class="sxs-lookup"><span data-stu-id="61557-542">Runtime compilation supplements build-time compilation of views.</span></span> <span data-ttu-id="61557-543">Dadurch kann das Framework Razor Sichten und Seiten (*cshtml* -Dateien) kompilieren, wenn die Dateien geändert werden, ohne dass die gesamte APP neu erstellt werden muss.</span><span class="sxs-lookup"><span data-stu-id="61557-543">It allows the framework to compile Razor views and pages (*.cshtml* files) when the files are modified, without having to rebuild the entire app.</span></span> <span data-ttu-id="61557-544">Diese Funktion unterstützt das Szenario der schnellen Bearbeitung in der IDE und das Aktualisieren des Browsers, um die Änderungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="61557-544">This feature supports the scenario of making a quick edit in the IDE and refreshing the browser to view the changes.</span></span>

<span data-ttu-id="61557-545">In ASP.net Core 3,0 ist die Lauf Zeit Kompilierung ein Opt-in-Szenario.</span><span class="sxs-lookup"><span data-stu-id="61557-545">In ASP.NET Core 3.0, runtime compilation is an opt-in scenario.</span></span> <span data-ttu-id="61557-546">Die Kompilierzeit Kompilierung ist der einzige Mechanismus zum Anzeigen der Kompilierung, der standardmäßig aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="61557-546">Build-time compilation is the only mechanism for view compilation that's enabled by default.</span></span> <span data-ttu-id="61557-547">Die Laufzeit basiert auf Visual Studio oder [dotnet-Watch](xref:tutorials/dotnet-watch) in Visual Studio Code, um das Projekt neu zu erstellen, wenn Änderungen an *cshtml* -Dateien erkannt werden.</span><span class="sxs-lookup"><span data-stu-id="61557-547">The runtime relies on Visual Studio or [dotnet-watch](xref:tutorials/dotnet-watch) in Visual Studio Code to rebuild the project when it detects changes to *.cshtml* files.</span></span> <span data-ttu-id="61557-548">In Visual Studio werden Änderungen an *den CS*- *, cshtml*-oder *Razor* -Dateien im Projekt, das ausgeführt wird (<kbd>STRG + F5</kbd>), aber nicht debuggt (<kbd>F5</kbd>), die Neukompilierung des Projekts auslöst.</span><span class="sxs-lookup"><span data-stu-id="61557-548">In Visual Studio, changes to *.cs*, *.cshtml*, or *.razor* files in the project being run (<kbd>Ctrl+F5</kbd>), but not debugged (<kbd>F5</kbd>), trigger recompilation of the project.</span></span>

<span data-ttu-id="61557-549">So aktivieren Sie die Lauf Zeit Kompilierung in Ihrem ASP.net Core 3,0-Projekt:</span><span class="sxs-lookup"><span data-stu-id="61557-549">To enable runtime compilation in your ASP.NET Core 3.0 project:</span></span>

1. <span data-ttu-id="61557-550">Installieren Sie [Microsoft. aspnetcore. MVC. Razor . Runtimecompilation](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation) -nuget-Paket.</span><span class="sxs-lookup"><span data-stu-id="61557-550">Install the [Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation) NuGet package.</span></span>
1. <span data-ttu-id="61557-551">Update `Startup.ConfigureServices` zum aufzurufen `AddRazorRuntimeCompilation` :</span><span class="sxs-lookup"><span data-stu-id="61557-551">Update `Startup.ConfigureServices` to call `AddRazorRuntimeCompilation`:</span></span>

    <span data-ttu-id="61557-552">Verwenden Sie für ASP.net Core MVC den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="61557-552">For ASP.NET Core MVC, use the following code:</span></span>

    ```csharp
    services.AddControllersWithViews()
        .AddRazorRuntimeCompilation(...);
    ```
 
    <span data-ttu-id="61557-553">Verwenden Sie für ASP.net Core Razor Seiten den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="61557-553">For ASP.NET Core Razor Pages, use the following code:</span></span>
 
    ```csharp
    services.AddRazorPages()
        .AddRazorRuntimeCompilation(...);
    ```
 
<span data-ttu-id="61557-554">Das Beispiel unter https://github.com/aspnet/samples/tree/master/samples/aspnetcore/mvc/runtimecompilation zeigt ein Beispiel für die bedingte Aktivierung der Lauf Zeit Kompilierung in Entwicklungsumgebungen.</span><span class="sxs-lookup"><span data-stu-id="61557-554">The sample at https://github.com/aspnet/samples/tree/master/samples/aspnetcore/mvc/runtimecompilation shows an example of enabling runtime compilation conditionally in Development environments.</span></span>

<span data-ttu-id="61557-555">Weitere Informationen zur Razor Kompilierung von Dateien finden Sie unter <xref:mvc/views/view-compilation> .</span><span class="sxs-lookup"><span data-stu-id="61557-555">For more information on Razor file compilation, see <xref:mvc/views/view-compilation>.</span></span>

## <a name="migrate-libraries-via-multi-targeting"></a><span data-ttu-id="61557-556">Migrieren von Bibliotheken mithilfe der Zielplattform</span><span class="sxs-lookup"><span data-stu-id="61557-556">Migrate libraries via multi-targeting</span></span>

<span data-ttu-id="61557-557">Bibliotheken müssen häufig mehrere Versionen von ASP.net Core unterstützen.</span><span class="sxs-lookup"><span data-stu-id="61557-557">Libraries often need to support multiple versions of ASP.NET Core.</span></span> <span data-ttu-id="61557-558">Die meisten Bibliotheken, die für frühere Versionen von ASP.net Core kompiliert wurden, sollten ohne Probleme weiterhin funktionieren.</span><span class="sxs-lookup"><span data-stu-id="61557-558">Most libraries that were compiled against previous versions of ASP.NET Core should continue working without issues.</span></span> <span data-ttu-id="61557-559">Die folgenden Bedingungen erfordern eine Kreuz Kompilierung der APP:</span><span class="sxs-lookup"><span data-stu-id="61557-559">The following conditions require the app to be cross-compiled:</span></span>

* <span data-ttu-id="61557-560">Die Bibliothek basiert auf einer Funktion, die über eine binäre [Breaking Change](#breaking-api-changes)verfügt.</span><span class="sxs-lookup"><span data-stu-id="61557-560">The library relies on a feature that has a binary [breaking change](#breaking-api-changes).</span></span>
* <span data-ttu-id="61557-561">Die Bibliothek möchte die neuen Features in ASP.net Core 3,0 nutzen.</span><span class="sxs-lookup"><span data-stu-id="61557-561">The library wants to take advantage of new features in ASP.NET Core 3.0.</span></span> 

<span data-ttu-id="61557-562">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="61557-562">For example:</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFrameworks>netcoreapp3.0;netstandard2.0</TargetFrameworks>
  </PropertyGroup>

  <ItemGroup Condition="'$(TargetFramework)' == 'netcoreapp3.0'">
    <FrameworkReference Include="Microsoft.AspNetCore.App" />
  </ItemGroup>

  <ItemGroup Condition="'$(TargetFramework)' == 'netstandard2.0'">
    <PackageReference Include="Microsoft.AspNetCore" Version="2.1.0" />
  </ItemGroup>
</Project>
```

<span data-ttu-id="61557-563">Verwenden `#ifdefs` Sie, um ASP.net Core 3,0-spezifische APIs zu aktivieren:</span><span class="sxs-lookup"><span data-stu-id="61557-563">Use `#ifdefs` to enable ASP.NET Core 3.0-specific APIs:</span></span>

```csharp
var webRootFileProvider =
#if NETCOREAPP3_0
    GetRequiredService<IWebHostEnvironment>().WebRootFileProvider;
#elif NETSTANDARD2_0
    GetRequiredService<IHostingEnvironment>().WebRootFileProvider;
#else
#error unknown target framework
#endif
```

<span data-ttu-id="61557-564">Weitere Informationen zum Verwenden von ASP.net Core-APIs in einer Klassenbibliothek finden Sie unter <xref:fundamentals/target-aspnetcore> .</span><span class="sxs-lookup"><span data-stu-id="61557-564">For more information on using ASP.NET Core APIs in a class library, see <xref:fundamentals/target-aspnetcore>.</span></span>

## <a name="miscellaneous-changes"></a><span data-ttu-id="61557-565">Verschiedene Änderungen</span><span class="sxs-lookup"><span data-stu-id="61557-565">Miscellaneous changes</span></span>

<span data-ttu-id="61557-566">Das Validierungssystem in .NET Core 3.0 und höher behandelt Non-Nullable-Parameter oder gebundene Eigenschaften so, als würden sie ein `[Required]`-Attribut aufweisen.</span><span class="sxs-lookup"><span data-stu-id="61557-566">The validation system in .NET Core 3.0 and later treats non-nullable parameters or bound properties as if they had a `[Required]` attribute.</span></span> <span data-ttu-id="61557-567">Weitere Informationen finden Sie unter [[Required]-Attribut](xref:mvc/models/validation?view=aspnetcore-3.1#required-attribute).</span><span class="sxs-lookup"><span data-stu-id="61557-567">For more information, see [[Required] attribute](xref:mvc/models/validation?view=aspnetcore-3.1#required-attribute).</span></span>

### <a name="publish"></a><span data-ttu-id="61557-568">Veröffentlichen</span><span class="sxs-lookup"><span data-stu-id="61557-568">Publish</span></span>

<span data-ttu-id="61557-569">Löschen Sie die Ordner " *bin* " und " *obj* " im Projektverzeichnis.</span><span class="sxs-lookup"><span data-stu-id="61557-569">Delete the *bin* and *obj* folders in the project directory.</span></span>

## <a name="testserver"></a><span data-ttu-id="61557-570">TestServer</span><span class="sxs-lookup"><span data-stu-id="61557-570">TestServer</span></span>

<span data-ttu-id="61557-571">Erstellen Sie für apps, die <xref:Microsoft.AspNetCore.TestHost.TestServer> direkt mit dem [generischen Host](xref:fundamentals/host/web-host)verwendet werden, `TestServer` auf einem <xref:Microsoft.AspNetCore.Hosting.IWebHostBuilder> in <xref:Microsoft.Extensions.Hosting.GenericHostWebHostBuilderExtensions.ConfigureWebHost%2A> :</span><span class="sxs-lookup"><span data-stu-id="61557-571">For apps that use <xref:Microsoft.AspNetCore.TestHost.TestServer> directly with the [Generic Host](xref:fundamentals/host/web-host), create the `TestServer` on an <xref:Microsoft.AspNetCore.Hosting.IWebHostBuilder> in <xref:Microsoft.Extensions.Hosting.GenericHostWebHostBuilderExtensions.ConfigureWebHost%2A>:</span></span>

```csharp
[Fact]
public async Task GenericCreateAndStartHost_GetTestServer()
{
    using var host = await new HostBuilder()
        .ConfigureWebHost(webBuilder =>
        {
            webBuilder
                .UseTestServer()
                .Configure(app => { });
        })
    .StartAsync();

    var response = await host.GetTestServer().CreateClient().GetAsync("/");

    Assert.Equal(HttpStatusCode.NotFound, response.StatusCode);
}
```

<a name="break"></a>

## <a name="breaking-api-changes"></a><span data-ttu-id="61557-572">Wichtige API-Änderungen</span><span class="sxs-lookup"><span data-stu-id="61557-572">Breaking API changes</span></span>

<span data-ttu-id="61557-573">Wichtige Änderungen überprüfen:</span><span class="sxs-lookup"><span data-stu-id="61557-573">Review breaking changes:</span></span>

* [<span data-ttu-id="61557-574">Umfassende Liste der wichtigen Änderungen in der Version ASP.net Core 3,0</span><span class="sxs-lookup"><span data-stu-id="61557-574">Complete list of breaking changes in the ASP.NET Core 3.0 release</span></span>](https://github.com/aspnet/Announcements/issues?page=1&q=is%3Aissue+is%3Aopen+label%3A%22Breaking+change%22+label%3A3.0.0)
* <span data-ttu-id="61557-575">[Unterbrechen von API-Änderungen in Antifälschung, cors, Diagnose, MVC und Routing](https://github.com/aspnet/Announcements/issues/387).</span><span class="sxs-lookup"><span data-stu-id="61557-575">[Breaking API changes in Antiforgery, CORS, Diagnostics, MVC, and Routing](https://github.com/aspnet/Announcements/issues/387).</span></span> <span data-ttu-id="61557-576">Diese Liste enthält Breaking Changes für Kompatibilitätsoptionen.</span><span class="sxs-lookup"><span data-stu-id="61557-576">This list includes breaking changes for compatibility switches.</span></span>
* <span data-ttu-id="61557-577">Eine Zusammenfassung 2,2-zu-3,0-Änderungen in .net Core, ASP.net Core und Entity Framework Core finden Sie unter [Breaking Changes for Migration from Version 2,2 to 3,0](/dotnet/core/compatibility/2.2-3.0).</span><span class="sxs-lookup"><span data-stu-id="61557-577">For a summary of 2.2-to-3.0 breaking changes across .NET Core, ASP.NET Core, and Entity Framework Core, see [Breaking changes for migration from version 2.2 to 3.0](/dotnet/core/compatibility/2.2-3.0).</span></span>

## <a name="endpoint-routing-with-catch-all-parameter"></a><span data-ttu-id="61557-578">Endpunkt Routing mit Catch-All-Parameter</span><span class="sxs-lookup"><span data-stu-id="61557-578">Endpoint routing with catch-all parameter</span></span>

[!INCLUDE[](~/includes/catchall.md)]

## <a name="net-core-30-on-azure-app-service"></a><span data-ttu-id="61557-579">.Net Core 3,0 auf Azure App Service</span><span class="sxs-lookup"><span data-stu-id="61557-579">.NET Core 3.0 on Azure App Service</span></span>

<span data-ttu-id="61557-580">Das Rollout von .net Core auf Azure App Service ist abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="61557-580">The rollout of .NET Core to Azure App Service is finished.</span></span> <span data-ttu-id="61557-581">.Net Core 3,0 ist in allen Azure App Service Rechenzentren verfügbar.</span><span class="sxs-lookup"><span data-stu-id="61557-581">.NET Core 3.0 is available in all Azure App Service datacenters.</span></span>
