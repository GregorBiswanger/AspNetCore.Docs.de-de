---
title: Sichern von ASP.net Core Blazor-Server-apps
author: guardrex
description: Erfahren Sie, wie Sie Sicherheitsbedrohungen für Blazor Server-apps mindern.
monikerRange: '>= aspnetcore-3.0'
ms.author: riande
ms.custom: mvc
ms.date: 11/12/2019
no-loc:
- Blazor
- SignalR
uid: security/blazor/server
ms.openlocfilehash: 5cf83a4dd255959e8840fca3a8194b5b4e2ad0a8
ms.sourcegitcommit: 3fc3020961e1289ee5bf5f3c365ce8304d8ebf19
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/12/2019
ms.locfileid: "73963881"
---
# <a name="secure-aspnet-core-opno-locblazor-server-apps"></a><span data-ttu-id="cd249-103">Sichern von ASP.net Core Blazor-Server-apps</span><span class="sxs-lookup"><span data-stu-id="cd249-103">Secure ASP.NET Core Blazor Server apps</span></span>

<span data-ttu-id="cd249-104">Von [Javier calvarro Nelson](https://github.com/javiercn)</span><span class="sxs-lookup"><span data-stu-id="cd249-104">By [Javier Calvarro Nelson](https://github.com/javiercn)</span></span>

Blazor<span data-ttu-id="cd249-105"> Server-apps übernehmen ein *Zustands* behaftetes Datenverarbeitungs Modell, bei dem der Server und der Client eine langlebige Beziehung aufrechterhalten.</span><span class="sxs-lookup"><span data-stu-id="cd249-105"> Server apps adopt a *stateful* data processing model, where the server and client maintain a long-lived relationship.</span></span> <span data-ttu-id="cd249-106">Der persistente Status wird durch eine Verbindung verwaltet, die auch Verbindungen umfassen [kann, die](xref:blazor/state-management)potenziell langlebig sind.</span><span class="sxs-lookup"><span data-stu-id="cd249-106">The persistent state is maintained by a [circuit](xref:blazor/state-management), which can span connections that are also potentially long-lived.</span></span>

<span data-ttu-id="cd249-107">Wenn ein Benutzer eine Blazor Server-Website besucht, erstellt der Server eine Verbindung im Arbeitsspeicher des Servers.</span><span class="sxs-lookup"><span data-stu-id="cd249-107">When a user visits a Blazor Server site, the server creates a circuit in the server's memory.</span></span> <span data-ttu-id="cd249-108">Die Verbindung zeigt dem Browser an, welche Inhalte gerbt werden sollen, und antwortet auf Ereignisse, z. b. wenn der Benutzer eine Schaltfläche in der Benutzeroberfläche auswählt.</span><span class="sxs-lookup"><span data-stu-id="cd249-108">The circuit indicates to the browser what content to render and responds to events, such as when the user selects a button in the UI.</span></span> <span data-ttu-id="cd249-109">Um diese Aktionen auszuführen, ruft eine Verbindung JavaScript-Funktionen in den Browser-und .NET-Methoden des Benutzers auf dem Server auf.</span><span class="sxs-lookup"><span data-stu-id="cd249-109">To perform these actions, a circuit invokes JavaScript functions in the user's browser and .NET methods on the server.</span></span> <span data-ttu-id="cd249-110">Diese bidirektionale JavaScript-basierte Interaktion wird als [JavaScript-Interop (JS-Interop)](xref:blazor/javascript-interop)bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="cd249-110">This two-way JavaScript-based interaction is referred to as [JavaScript interop (JS interop)](xref:blazor/javascript-interop).</span></span>

<span data-ttu-id="cd249-111">Da die JS-Interop über das Internet erfolgt und der Client einen Remote Browser verwendet, haben Blazor Server-Apps die meisten Probleme mit der Web-App-Sicherheit gemeinsam.</span><span class="sxs-lookup"><span data-stu-id="cd249-111">Because JS interop occurs over the Internet and the client uses a remote browser, Blazor Server apps share most web app security concerns.</span></span> <span data-ttu-id="cd249-112">In diesem Thema werden häufige Bedrohungen für die Blazor von Server-apps beschrieben. es enthält Anleitungen zur Bedrohungsminderung, die auf apps mit Internet Zugriff</span><span class="sxs-lookup"><span data-stu-id="cd249-112">This topic describes common threats to Blazor Server apps and provides threat mitigation guidance focused on Internet-facing apps.</span></span>

<span data-ttu-id="cd249-113">In eingeschränkten Umgebungen, wie z. b. innerhalb von Unternehmensnetzwerken oder Intranets, sind einige der Hinweise zur Entschärfung:</span><span class="sxs-lookup"><span data-stu-id="cd249-113">In constrained environments, such as inside corporate networks or intranets, some of the mitigation guidance either:</span></span>

* <span data-ttu-id="cd249-114">Gilt nicht für die eingeschränkte Umgebung.</span><span class="sxs-lookup"><span data-stu-id="cd249-114">Doesn't apply in the constrained environment.</span></span>
* <span data-ttu-id="cd249-115">Die Implementierung der Kosten ist nicht sinnvoll, da das Sicherheitsrisiko in einer eingeschränkten Umgebung gering ist.</span><span class="sxs-lookup"><span data-stu-id="cd249-115">Isn't worth the cost to implement because the security risk is low in a constrained environment.</span></span>

## <a name="resource-exhaustion"></a><span data-ttu-id="cd249-116">Ressourcenauslastung</span><span class="sxs-lookup"><span data-stu-id="cd249-116">Resource exhaustion</span></span>

<span data-ttu-id="cd249-117">Die Ressourcenauslastung kann auftreten, wenn ein Client mit dem Server interagiert und der Server übermäßige Ressourcen beansprucht.</span><span class="sxs-lookup"><span data-stu-id="cd249-117">Resource exhaustion can occur when a client interacts with the server and causes the server to consume excessive resources.</span></span> <span data-ttu-id="cd249-118">Übermäßiger Ressourcenverbrauch hat hauptsächlich folgende Auswirkungen:</span><span class="sxs-lookup"><span data-stu-id="cd249-118">Excessive resource consumption primarily affects:</span></span>

* [<span data-ttu-id="cd249-119">CPU</span><span class="sxs-lookup"><span data-stu-id="cd249-119">CPU</span></span>](#cpu)
* [<span data-ttu-id="cd249-120">Arbeitsspeicher</span><span class="sxs-lookup"><span data-stu-id="cd249-120">Memory</span></span>](#memory)
* [<span data-ttu-id="cd249-121">Client Verbindungen</span><span class="sxs-lookup"><span data-stu-id="cd249-121">Client connections</span></span>](#client-connections)

<span data-ttu-id="cd249-122">DOS-Angriffe (Denial of Service) suchen in der Regel nach dem ausschöpfen der Ressourcen einer APP oder eines Servers.</span><span class="sxs-lookup"><span data-stu-id="cd249-122">Denial of service (DoS) attacks usually seek to exhaust an app or server's resources.</span></span> <span data-ttu-id="cd249-123">Die Ressourcenauslastung ist jedoch nicht notwendigerweise das Ergebnis eines Angriffs auf das System.</span><span class="sxs-lookup"><span data-stu-id="cd249-123">However, resource exhaustion isn't necessarily the result of an attack on the system.</span></span> <span data-ttu-id="cd249-124">Endliche Ressourcen können z. b. aufgrund einer hohen Benutzer Nachfrage aufgebraucht werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-124">For example, finite resources can be exhausted due to high user demand.</span></span> <span data-ttu-id="cd249-125">DOS wird weiter unten im Abschnitt [Denial of Service (DOS)-Angriffe](#denial-of-service-dos-attacks) behandelt.</span><span class="sxs-lookup"><span data-stu-id="cd249-125">DoS is covered further in the [Denial of service (DoS) attacks](#denial-of-service-dos-attacks) section.</span></span>

<span data-ttu-id="cd249-126">Ressourcen, die sich außerhalb des Blazor Frameworks befinden, wie z. b. Datenbanken und Datei Handles (für das Lesen und Schreiben von Dateien), können auch Ressourcenauslastungen erleben</span><span class="sxs-lookup"><span data-stu-id="cd249-126">Resources external to the Blazor framework, such as databases and file handles (used to read and write files), may also experience resource exhaustion.</span></span> <span data-ttu-id="cd249-127">Weitere Informationen finden Sie unter <xref:performance/performance-best-practices>.</span><span class="sxs-lookup"><span data-stu-id="cd249-127">For more information, see <xref:performance/performance-best-practices>.</span></span>

### <a name="cpu"></a><span data-ttu-id="cd249-128">CPU</span><span class="sxs-lookup"><span data-stu-id="cd249-128">CPU</span></span>

<span data-ttu-id="cd249-129">Die CPU-Auslastung kann auftreten, wenn ein oder mehrere Clients eine intensive CPU-Arbeit durch den Server erzwingen.</span><span class="sxs-lookup"><span data-stu-id="cd249-129">CPU exhaustion can occur when one or more clients force the server to perform intensive CPU work.</span></span>

<span data-ttu-id="cd249-130">Nehmen Sie beispielsweise eine Blazor Server-APP, die eine " *fbonnacci*"-Zahl berechnet.</span><span class="sxs-lookup"><span data-stu-id="cd249-130">For example, consider a Blazor Server app that calculates a *Fibonnacci number*.</span></span> <span data-ttu-id="cd249-131">Eine "fbonnacci"-Zahl wird aus einer "fbonnacci"-Sequenz erstellt, wobei jede Zahl in der Sequenz die Summe der beiden vorangehenden Zahlen ist.</span><span class="sxs-lookup"><span data-stu-id="cd249-131">A Fibonnacci number is produced from a Fibonnacci sequence, where each number in the sequence is the sum of the two preceding numbers.</span></span> <span data-ttu-id="cd249-132">Der Arbeitsaufwand, der erforderlich ist, um die Antwort zu erreichen, hängt von der Länge der Sequenz und der Größe des Anfangs Werts ab.</span><span class="sxs-lookup"><span data-stu-id="cd249-132">The amount of work required to reach the answer depends on the length of the sequence and the size of the initial value.</span></span> <span data-ttu-id="cd249-133">Wenn die APP keine Grenzwerte für die Anforderung eines Clients eingibt, können die CPU-intensiven Berechnungen die CPU-Zeit dominieren und die Leistung anderer Tasks verringern.</span><span class="sxs-lookup"><span data-stu-id="cd249-133">If the app doesn't place limits on a client's request, the CPU-intensive calculations may dominate the CPU's time and diminish the performance of other tasks.</span></span> <span data-ttu-id="cd249-134">Übermäßiger Ressourcenverbrauch ist ein Sicherheitsproblem, das sich auf die Verfügbarkeit auswirkt</span><span class="sxs-lookup"><span data-stu-id="cd249-134">Excessive resource consumption is a security concern impacting availability.</span></span>

<span data-ttu-id="cd249-135">Die CPU-Auslastung ist für alle öffentlich ausgerichteten apps von Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="cd249-135">CPU exhaustion is a concern for all public-facing apps.</span></span> <span data-ttu-id="cd249-136">In regulären Web-Apps sind Anforderungen und Verbindungen als Schutzmaßnahme, aber Blazor Server-Apps bieten nicht dieselben Sicherheitsvorkehrungen.</span><span class="sxs-lookup"><span data-stu-id="cd249-136">In regular web apps, requests and connections time out as a safeguard, but Blazor Server apps don't provide the same safeguards.</span></span> Blazor<span data-ttu-id="cd249-137"> Server-apps müssen geeignete Prüfungen und Beschränkungen einschließen, bevor Sie potenziell CPU-intensive Aufgaben durchführen können.</span><span class="sxs-lookup"><span data-stu-id="cd249-137"> Server apps must include appropriate checks and limits before performing potentially CPU-intensive work.</span></span>

### <a name="memory"></a><span data-ttu-id="cd249-138">Arbeitsspeicher</span><span class="sxs-lookup"><span data-stu-id="cd249-138">Memory</span></span>

<span data-ttu-id="cd249-139">Die Speicherauslastung kann auftreten, wenn ein oder mehrere Clients den Server zwingen, eine große Menge an Arbeitsspeicher zu belegen.</span><span class="sxs-lookup"><span data-stu-id="cd249-139">Memory exhaustion can occur when one or more clients force the server to consume a large amount of memory.</span></span>

<span data-ttu-id="cd249-140">Angenommen, eine APP mit BlazorServer und einer Komponente, die eine Liste von Elementen annimmt und anzeigt.</span><span class="sxs-lookup"><span data-stu-id="cd249-140">For example, consider a Blazor-server side app with a component that accepts and displays a list of items.</span></span> <span data-ttu-id="cd249-141">Wenn die Blazor-App keine Grenzwerte für die Anzahl zulässiger Elemente oder die Anzahl der Elemente zurückgibt, die auf dem Client gerendert werden, kann die speicherintensive Verarbeitung und das Rendering den Speicher des Servers bis zu dem Punkt, an dem die Leistung des Servers leidet, dominieren.</span><span class="sxs-lookup"><span data-stu-id="cd249-141">If the Blazor app doesn't place limits on the number of items allowed or the number of items rendered back to the client, the memory-intensive processing and rendering may dominate the server's memory to the point where performance of the server suffers.</span></span> <span data-ttu-id="cd249-142">Der Server stürzt möglicherweise ab oder stürzt ab, wenn er abgestürzt ist.</span><span class="sxs-lookup"><span data-stu-id="cd249-142">The server may crash or slow to the point that it appears to have crashed.</span></span>

<span data-ttu-id="cd249-143">Sehen Sie sich das folgende Szenario für die Wartung und Anzeige einer Liste von Elementen an, die zu einem potenziellen Speicher Auslastungs Szenario auf dem Server gehören:</span><span class="sxs-lookup"><span data-stu-id="cd249-143">Consider the following scenario for maintaining and displaying a list of items that pertain to a potential memory exhaustion scenario on the server:</span></span>

* <span data-ttu-id="cd249-144">Die Elemente in einer `List<MyItem>` Eigenschaft oder einem Feld verwenden den Arbeitsspeicher des Servers.</span><span class="sxs-lookup"><span data-stu-id="cd249-144">The items in a `List<MyItem>` property or field use the server's memory.</span></span> <span data-ttu-id="cd249-145">Wenn die APP zulässt, dass die Liste der Elemente unbegrenzt wächst, besteht das Risiko, dass der Server nicht über genügend Arbeitsspeicher verfügt.</span><span class="sxs-lookup"><span data-stu-id="cd249-145">If the app allows the list of items to grow unbounded, there's a risk of the server running out of memory.</span></span> <span data-ttu-id="cd249-146">Wenn nicht genügend Arbeitsspeicher verfügbar ist, wird die aktuelle Sitzung beendet (Absturz), und alle gleichzeitigen Sitzungen in dieser Serverinstanz erhalten eine Ausnahme aufgrund ungenügenden Arbeitsspeichers.</span><span class="sxs-lookup"><span data-stu-id="cd249-146">Running out of memory causes the current session to end (crash) and all of the concurrent sessions in that server instance receive an out-of-memory exception.</span></span> <span data-ttu-id="cd249-147">Um zu verhindern, dass dieses Szenario auftritt, muss die APP eine Datenstruktur verwenden, die ein Element Limit für gleichzeitige Benutzer erzwingt.</span><span class="sxs-lookup"><span data-stu-id="cd249-147">To prevent this scenario from occurring, the app must use a data structure that imposes an item limit on concurrent users.</span></span>
* <span data-ttu-id="cd249-148">Wenn ein pagingschema nicht zum Rendern verwendet wird, verwendet der Server zusätzlichen Arbeitsspeicher für Objekte, die nicht auf der Benutzeroberfläche sichtbar sind.</span><span class="sxs-lookup"><span data-stu-id="cd249-148">If a paging scheme isn't used for rendering, the server uses additional memory for objects that aren't visible in the UI.</span></span> <span data-ttu-id="cd249-149">Ohne eine Beschränkung der Anzahl von Elementen können Speicheranforderungen den verfügbaren Server Arbeitsspeicher ausschöpfen.</span><span class="sxs-lookup"><span data-stu-id="cd249-149">Without a limit on the number of items, memory demands may exhaust the available server memory.</span></span> <span data-ttu-id="cd249-150">Um dieses Szenario zu verhindern, verwenden Sie einen der folgenden Ansätze:</span><span class="sxs-lookup"><span data-stu-id="cd249-150">To prevent this scenario, use one of the following approaches:</span></span>
  * <span data-ttu-id="cd249-151">Verwenden Sie beim Rendern paginierte Listen.</span><span class="sxs-lookup"><span data-stu-id="cd249-151">Use paginated lists when rendering.</span></span>
  * <span data-ttu-id="cd249-152">Zeigen Sie nur die ersten 100 bis 1.000 Elemente an, und fordern Sie den Benutzer auf, Suchkriterien einzugeben, um Elemente außerhalb der angezeigten Elemente zu suchen.</span><span class="sxs-lookup"><span data-stu-id="cd249-152">Only display the first 100 to 1,000 items and require the user to enter search criteria to find items beyond the items displayed.</span></span>
  * <span data-ttu-id="cd249-153">Implementieren Sie für ein erweitertes renderingszenario Listen oder Raster, die *Virtualisierung*unterstützen.</span><span class="sxs-lookup"><span data-stu-id="cd249-153">For a more advanced rendering scenario, implement lists or grids that support *virtualization*.</span></span> <span data-ttu-id="cd249-154">Mit der Virtualisierung wird nur eine Teilmenge der Elemente, die derzeit für den Benutzer sichtbar sind, von Listen dargestellt.</span><span class="sxs-lookup"><span data-stu-id="cd249-154">Using virtualization, lists only render a subset of items currently visible to the user.</span></span> <span data-ttu-id="cd249-155">Wenn der Benutzer mit der Scrollleiste in der Benutzeroberfläche interagiert, rendert die Komponente nur die Elemente, die für die Anzeige benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-155">When the user interacts with the scrollbar in the UI, the component renders only those items required for display.</span></span> <span data-ttu-id="cd249-156">Die Elemente, die derzeit nicht für die Anzeige erforderlich sind, können im sekundären Speicher gespeichert werden. Dies ist der ideale Ansatz.</span><span class="sxs-lookup"><span data-stu-id="cd249-156">The items that aren't currently required for display can be held in secondary storage, which is the ideal approach.</span></span> <span data-ttu-id="cd249-157">Nicht angezeigte Elemente können auch im Arbeitsspeicher gespeichert werden, was weniger ideal ist.</span><span class="sxs-lookup"><span data-stu-id="cd249-157">Undisplayed items can also be held in memory, which is less ideal.</span></span>

Blazor<span data-ttu-id="cd249-158"> Server-Apps bieten ein ähnliches Programmiermodell für andere Benutzeroberflächen-Frameworks für Zustands behaftete apps, wie z. b. WPF, Windows Forms oder Blazor Webassembly.</span><span class="sxs-lookup"><span data-stu-id="cd249-158"> Server apps offer a similar programming model to other UI frameworks for stateful apps, such as WPF, Windows Forms, or Blazor WebAssembly.</span></span> <span data-ttu-id="cd249-159">Der Hauptunterschied besteht darin, dass in mehreren Benutzeroberflächen-Frameworks der von der APP genutzte Arbeitsspeicher zum Client gehört und nur den einzelnen Client beeinträchtigt.</span><span class="sxs-lookup"><span data-stu-id="cd249-159">The main difference is that in several of the UI frameworks the memory consumed by the app belongs to the client and only affects that individual client.</span></span> <span data-ttu-id="cd249-160">Beispielsweise wird eine Blazor Webassembly-App vollständig auf dem Client ausgeführt und verwendet nur Client Speicherressourcen.</span><span class="sxs-lookup"><span data-stu-id="cd249-160">For example, a Blazor WebAssembly app runs entirely on the client and only uses client memory resources.</span></span> <span data-ttu-id="cd249-161">Im Blazor Server Szenario gehört der von der APP belegte Arbeitsspeicher zum Server und wird von Clients auf der Server Instanz gemeinsam genutzt.</span><span class="sxs-lookup"><span data-stu-id="cd249-161">In the Blazor Server scenario, the memory consumed by the app belongs to the server and is shared among clients on the server instance.</span></span>

<span data-ttu-id="cd249-162">Serverseitige Speicheranforderungen sind bei allen Blazor Server-apps zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="cd249-162">Server-side memory demands are a consideration for all Blazor Server apps.</span></span> <span data-ttu-id="cd249-163">Die meisten Web-Apps sind jedoch zustandslos, und der während der Verarbeitung einer Anforderung verwendete Arbeitsspeicher wird freigegeben, wenn die Antwort zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-163">However, most web apps are stateless, and the memory used while processing a request is released when the response is returned.</span></span> <span data-ttu-id="cd249-164">Als allgemeine Empfehlung können Sie Clients nicht gestatten, eine nicht gebundene Speichermenge wie in einer anderen serverseitigen App zuzuordnen, die Clientverbindungen beibehält.</span><span class="sxs-lookup"><span data-stu-id="cd249-164">As a general recommendation, don't permit clients to allocate an unbound amount of memory as in any other server-side app that persists client connections.</span></span> <span data-ttu-id="cd249-165">Der von einer Blazor Server-App genutzte Arbeitsspeicher wird für einen längeren Zeitraum als eine einzelne Anforderung beibehalten.</span><span class="sxs-lookup"><span data-stu-id="cd249-165">The memory consumed by a Blazor Server app persists for a longer time than a single request.</span></span>

> [!NOTE]
> <span data-ttu-id="cd249-166">Während der Entwicklung kann ein Profiler verwendet oder eine Ablauf Verfolgung erfasst werden, um die Speicheranforderungen von Clients zu bewerten.</span><span class="sxs-lookup"><span data-stu-id="cd249-166">During development, a profiler can be used or a trace captured to assess memory demands of clients.</span></span> <span data-ttu-id="cd249-167">Ein Profiler oder eine Ablauf Verfolgung erfasst nicht den Arbeitsspeicher, der einem bestimmten Client zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="cd249-167">A profiler or trace won't capture the memory allocated to a specific client.</span></span> <span data-ttu-id="cd249-168">Um die Arbeitsspeicher Nutzung eines bestimmten Clients während der Entwicklung zu erfassen, erfassen Sie einen Dump, und untersuchen Sie die Speichernachfrage aller Objekte, die auf die Verbindung eines Benutzers basieren.</span><span class="sxs-lookup"><span data-stu-id="cd249-168">To capture the memory use of a specific client during development, capture a dump and examine the memory demand of all the objects rooted at a user's circuit.</span></span>

### <a name="client-connections"></a><span data-ttu-id="cd249-169">Client Verbindungen</span><span class="sxs-lookup"><span data-stu-id="cd249-169">Client connections</span></span>

<span data-ttu-id="cd249-170">Die Verbindungs Erschöpfung kann auftreten, wenn ein oder mehrere Clients zu viele gleichzeitige Verbindungen mit dem Server öffnen, wodurch verhindert wird, dass andere Clients neue Verbindungen herstellen.</span><span class="sxs-lookup"><span data-stu-id="cd249-170">Connection exhaustion can occur when one or more clients open too many concurrent connections to the server, preventing other clients from establishing new connections.</span></span>

Blazor<span data-ttu-id="cd249-171"> Clients eine einzelne Verbindung pro Sitzung herstellen und die Verbindung geöffnet lassen, solange das Browserfenster geöffnet ist.</span><span class="sxs-lookup"><span data-stu-id="cd249-171"> clients establish a single connection per session and keep the connection open for as long as the browser window is open.</span></span> <span data-ttu-id="cd249-172">Die Anforderungen auf dem Server, die alle Verbindungen aufrechtzuerhalten, sind nicht spezifisch für Blazor-apps.</span><span class="sxs-lookup"><span data-stu-id="cd249-172">The demands on the server of maintaining all of the connections isn't specific to Blazor apps.</span></span> <span data-ttu-id="cd249-173">Aufgrund der permanenten Natur der Verbindungen und der Zustands behafteten Natur Blazor Server-Apps ist die Verbindungs Erschöpfung ein höheres Risiko für die Verfügbarkeit der app.</span><span class="sxs-lookup"><span data-stu-id="cd249-173">Given the persistent nature of the connections and the stateful nature of Blazor Server apps, connection exhaustion is a greater risk to availability of the app.</span></span>

<span data-ttu-id="cd249-174">Standardmäßig gibt es keine Beschränkung für die Anzahl der Verbindungen pro Benutzer für eine Blazor Server-app.</span><span class="sxs-lookup"><span data-stu-id="cd249-174">By default, there's no limit on the number of connections per user for a Blazor Server app.</span></span> <span data-ttu-id="cd249-175">Wenn die APP eine Verbindungs Beschränkung erfordert, sollten Sie einen oder mehrere der folgenden Ansätze verwenden:</span><span class="sxs-lookup"><span data-stu-id="cd249-175">If the app requires a connection limit, take one or more of the following approaches:</span></span>

* <span data-ttu-id="cd249-176">Fordern Sie eine Authentifizierung an, die auf natürliche Weise die Fähigkeit von nicht autorisierten Benutzern für die Verbindung mit der APP einschränkt.</span><span class="sxs-lookup"><span data-stu-id="cd249-176">Require authentication, which naturally limits the ability of unauthorized users to connect to the app.</span></span> <span data-ttu-id="cd249-177">Damit dieses Szenario effektiv ist, müssen Benutzer daran gehindert werden, neue Benutzer bei der Bereitstellung zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="cd249-177">For this scenario to be effective, users must be prevented from provisioning new users at will.</span></span>
* <span data-ttu-id="cd249-178">Beschränken Sie die Anzahl der Verbindungen pro Benutzer.</span><span class="sxs-lookup"><span data-stu-id="cd249-178">Limit the number of connections per user.</span></span> <span data-ttu-id="cd249-179">Das Einschränken von Verbindungen kann über die folgenden Ansätze erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-179">Limiting connections can be accomplished via the following approaches.</span></span> <span data-ttu-id="cd249-180">Achten Sie darauf, dass berechtigte Benutzer auf die App zugreifen können (z. b. Wenn ein Verbindungs Limit basierend auf der IP-Adresse des Clients hergestellt wird).</span><span class="sxs-lookup"><span data-stu-id="cd249-180">Exercise care to allow legitimate users to access the app (for example, when a connection limit is established based on the client's IP address).</span></span>
  * <span data-ttu-id="cd249-181">Auf App-Ebene:</span><span class="sxs-lookup"><span data-stu-id="cd249-181">At the app level:</span></span>
    * <span data-ttu-id="cd249-182">Erweiterbarkeit des Endpunkt Routings.</span><span class="sxs-lookup"><span data-stu-id="cd249-182">Endpoint routing extensibility.</span></span>
    * <span data-ttu-id="cd249-183">Fordern Sie eine Authentifizierung zum Herstellen einer Verbindung mit der APP an, und verfolgen Sie die aktiven Sitzungen pro Benutzer nach.</span><span class="sxs-lookup"><span data-stu-id="cd249-183">Require authentication to connect to the app and keep track of the active sessions per user.</span></span>
    * <span data-ttu-id="cd249-184">Ablehnen neuer Sitzungen, wenn ein Grenzwert erreicht wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-184">Reject new sessions upon reaching a limit.</span></span>
    * <span data-ttu-id="cd249-185">Proxys können mithilfe eines Proxys, z. b. mit dem [Azure SignalR-Dienst](/azure/azure-signalr/signalr-overview) , der Verbindungen von Clients zu einer APP Multiplexing, WebSocket-Verbindungen mit einer App herstellen.</span><span class="sxs-lookup"><span data-stu-id="cd249-185">Proxy WebSocket connections to an app through the use of a proxy, such as the [Azure SignalR Service](/azure/azure-signalr/signalr-overview) that multiplexes connections from clients to an app.</span></span> <span data-ttu-id="cd249-186">Dadurch wird eine APP mit größerer Verbindungskapazität bereitgestellt, als von einem einzelnen Client festgelegt werden kann. Dadurch wird verhindert, dass ein Client die Verbindungen mit dem Server erschöpft.</span><span class="sxs-lookup"><span data-stu-id="cd249-186">This provides an app with greater connection capacity than a single client can establish, preventing a client from exhausting the connections to the server.</span></span>
  * <span data-ttu-id="cd249-187">Auf Serverebene: Verwenden Sie vor der APP einen Proxy/Gateway.</span><span class="sxs-lookup"><span data-stu-id="cd249-187">At the server level: Use a proxy/gateway in front of the app.</span></span> <span data-ttu-id="cd249-188">Beispielsweise können Sie mit der [Azure-Front-Door](/azure/frontdoor/front-door-overview) das globale Routing von Webdatenverkehr in eine APP definieren, verwalten und überwachen.</span><span class="sxs-lookup"><span data-stu-id="cd249-188">For example, [Azure Front Door](/azure/frontdoor/front-door-overview) enables you to define, manage, and monitor the global routing of web traffic to an app.</span></span>

## <a name="denial-of-service-dos-attacks"></a><span data-ttu-id="cd249-189">DOS-Angriffe (Denial of Service)</span><span class="sxs-lookup"><span data-stu-id="cd249-189">Denial of service (DoS) attacks</span></span>

<span data-ttu-id="cd249-190">DOS-Angriffe (Denial of Service) beinhalten einen Client, der bewirkt, dass der Server eine oder mehrere seiner Ressourcen abwehrt, wodurch die APP nicht mehr verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="cd249-190">Denial of service (DoS) attacks involve a client causing the server to exhaust one or more of its resources making the app unavailable.</span></span> Blazor<span data-ttu-id="cd249-191"> Server-Apps enthalten einige Standard Limits und basieren auf anderen ASP.net Core und SignalR Limits zum Schutz vor DoS-Angriffen:</span><span class="sxs-lookup"><span data-stu-id="cd249-191"> Server apps include some default limits and rely on other ASP.NET Core and SignalR limits to protect against DoS attacks:</span></span>

| <span data-ttu-id="cd249-192">Limit für Blazor Server-App</span><span class="sxs-lookup"><span data-stu-id="cd249-192">Blazor Server app limit</span></span>                            | <span data-ttu-id="cd249-193">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="cd249-193">Description</span></span> | <span data-ttu-id="cd249-194">Default</span><span class="sxs-lookup"><span data-stu-id="cd249-194">Default</span></span> |
| ------------------------------------------------------- | ----------- | ------- |
| `CircuitOptions.DisconnectedCircuitMaxRetained`         | <span data-ttu-id="cd249-195">Maximale Anzahl von Verbindungen, die von einem bestimmten Server gleichzeitig im Arbeitsspeicher enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="cd249-195">Maximum number of disconnected circuits that a given server holds in memory at a time.</span></span> | <span data-ttu-id="cd249-196">100</span><span class="sxs-lookup"><span data-stu-id="cd249-196">100</span></span> |
| `CircuitOptions.DisconnectedCircuitRetentionPeriod`     | <span data-ttu-id="cd249-197">Maximale Zeitspanne, für die eine getrennte Verbindung im Arbeitsspeicher gehalten wird, bevor Sie abgebrochen wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-197">Maximum amount of time a disconnected circuit is held in memory before being torn down.</span></span> | <span data-ttu-id="cd249-198">3 Minuten</span><span class="sxs-lookup"><span data-stu-id="cd249-198">3 minutes</span></span> |
| `CircuitOptions.JSInteropDefaultCallTimeout`            | <span data-ttu-id="cd249-199">Maximale Zeitspanne, die der Server wartet, bevor ein Timeout für einen asynchronen JavaScript-Funktionsaufruf auftritt.</span><span class="sxs-lookup"><span data-stu-id="cd249-199">Maximum amount of time the server waits before timing out an asynchronous JavaScript function invocation.</span></span> | <span data-ttu-id="cd249-200">1 Minute</span><span class="sxs-lookup"><span data-stu-id="cd249-200">1 minute</span></span> |
| `CircuitOptions.MaxBufferedUnacknowledgedRenderBatches` | <span data-ttu-id="cd249-201">Maximale Anzahl nicht bestätigter renderbatches, die der Server zu einem gegebenen Zeitpunkt pro Verbindung aufbewahrt, um eine robuste erneute Verbindung zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="cd249-201">Maximum number of unacknowledged render batches the server keeps in memory per circuit at a given time to support robust reconnection.</span></span> <span data-ttu-id="cd249-202">Nach Erreichen des Limits beendet der Server die Erstellung neuer Rendering-Batches, bis mindestens ein Stapel vom Client bestätigt wurde.</span><span class="sxs-lookup"><span data-stu-id="cd249-202">After reaching the limit, the server stops producing new render batches until one or more batches have been acknowledged by the client.</span></span> | <span data-ttu-id="cd249-203">10</span><span class="sxs-lookup"><span data-stu-id="cd249-203">10</span></span> |


| SignalR<span data-ttu-id="cd249-204"> und ASP.net Core Limit</span><span class="sxs-lookup"><span data-stu-id="cd249-204"> and ASP.NET Core limit</span></span>             | <span data-ttu-id="cd249-205">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="cd249-205">Description</span></span> | <span data-ttu-id="cd249-206">Default</span><span class="sxs-lookup"><span data-stu-id="cd249-206">Default</span></span> |
| ------------------------------------------ | ----------- | ------- |
| `CircuitOptions.MaximumReceiveMessageSize` | <span data-ttu-id="cd249-207">Nachrichtengröße für eine einzelne Nachricht.</span><span class="sxs-lookup"><span data-stu-id="cd249-207">Message size for an individual message.</span></span> | <span data-ttu-id="cd249-208">32 KB</span><span class="sxs-lookup"><span data-stu-id="cd249-208">32 KB</span></span> |

## <a name="interactions-with-the-browser-client"></a><span data-ttu-id="cd249-209">Interaktionen mit dem Browser (Client)</span><span class="sxs-lookup"><span data-stu-id="cd249-209">Interactions with the browser (client)</span></span>

<span data-ttu-id="cd249-210">Ein Client interagiert mit dem Server über die JS-Interop-Ereignis Verteilung und-Rendering.</span><span class="sxs-lookup"><span data-stu-id="cd249-210">A client interacts with the server through JS interop event dispatching and render completion.</span></span> <span data-ttu-id="cd249-211">Die Kommunikation zwischen js und Interop erfolgt in beide Richtungen zwischen JavaScript und .net:</span><span class="sxs-lookup"><span data-stu-id="cd249-211">JS interop communication goes both ways between JavaScript and .NET:</span></span>

* <span data-ttu-id="cd249-212">Browser Ereignisse werden asynchron vom Client an den Server gesendet.</span><span class="sxs-lookup"><span data-stu-id="cd249-212">Browser events are dispatched from the client to the server in an asynchronous fashion.</span></span>
* <span data-ttu-id="cd249-213">Der Server antwortet, dass die Benutzeroberfläche bei Bedarf asynchron erneut ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-213">The server responds asynchronously rerendering the UI as necessary.</span></span>

### <a name="javascript-functions-invoked-from-net"></a><span data-ttu-id="cd249-214">Aus .net aufgerufene JavaScript-Funktionen</span><span class="sxs-lookup"><span data-stu-id="cd249-214">JavaScript functions invoked from .NET</span></span>

<span data-ttu-id="cd249-215">Für Aufrufe von .NET-Methoden an JavaScript:</span><span class="sxs-lookup"><span data-stu-id="cd249-215">For calls from .NET methods to JavaScript:</span></span>

* <span data-ttu-id="cd249-216">Alle Aufrufe haben einen konfigurierbaren Timeout, nach dem Sie fehlschlagen, und geben eine <xref:System.OperationCanceledException> an den Aufrufer zurück.</span><span class="sxs-lookup"><span data-stu-id="cd249-216">All invocations have a configurable timeout after which they fail, returning a <xref:System.OperationCanceledException> to the caller.</span></span>
  * <span data-ttu-id="cd249-217">Es gibt ein Standard Timeout für die Aufrufe (`CircuitOptions.JSInteropDefaultCallTimeout`) von einer Minute.</span><span class="sxs-lookup"><span data-stu-id="cd249-217">There's a default timeout for the calls (`CircuitOptions.JSInteropDefaultCallTimeout`) of one minute.</span></span> <span data-ttu-id="cd249-218">Informationen zum Konfigurieren dieses Limits finden Sie unter <xref:blazor/javascript-interop#harden-js-interop-calls>.</span><span class="sxs-lookup"><span data-stu-id="cd249-218">To configure this limit, see <xref:blazor/javascript-interop#harden-js-interop-calls>.</span></span>
  * <span data-ttu-id="cd249-219">Es kann ein Abbruch Token bereitgestellt werden, um den Abbruch pro Abruf zu steuern.</span><span class="sxs-lookup"><span data-stu-id="cd249-219">A cancellation token can be provided to control the cancellation on a per-call basis.</span></span> <span data-ttu-id="cd249-220">Verlassen Sie sich nach Möglichkeit auf das standardmäßige Aufruf Timeout und einen zeitgebundenen Aufruf an den Client, wenn ein Abbruch Token bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-220">Rely on the default call timeout where possible and time-bound any call to the client if a cancellation token is provided.</span></span>
* <span data-ttu-id="cd249-221">Das Ergebnis eines JavaScript-Aufrufes kann nicht vertrauenswürdig sein.</span><span class="sxs-lookup"><span data-stu-id="cd249-221">The result of a JavaScript call can't be trusted.</span></span> <span data-ttu-id="cd249-222">Der Blazor App-Client, der im Browser ausgeführt wird, sucht die JavaScript-Funktion, die aufgerufen werden soll.</span><span class="sxs-lookup"><span data-stu-id="cd249-222">The Blazor app client running in the browser searches for the JavaScript function to invoke.</span></span> <span data-ttu-id="cd249-223">Die-Funktion wird aufgerufen, und entweder wird das Ergebnis oder ein Fehler erzeugt.</span><span class="sxs-lookup"><span data-stu-id="cd249-223">The function is invoked, and either the result or an error is produced.</span></span> <span data-ttu-id="cd249-224">Ein böswilliger Client kann versuchen, Folgendes zu tun:</span><span class="sxs-lookup"><span data-stu-id="cd249-224">A malicious client can attempt to:</span></span>
  * <span data-ttu-id="cd249-225">Ein Problem in der APP wird verursacht, indem ein Fehler von der JavaScript-Funktion zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-225">Cause an issue in the app by returning an error from the JavaScript function.</span></span>
  * <span data-ttu-id="cd249-226">Bewirken Sie ein unbeabsichtigtes Verhalten auf dem Server, indem Sie ein unerwartetes Ergebnis der JavaScript-Funktion zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="cd249-226">Induce an unintended behavior on the server by returning an unexpected result from the JavaScript function.</span></span>

<span data-ttu-id="cd249-227">Treffen Sie die folgenden Vorsichtsmaßnahmen, um vor den vorangehenden Szenarien zu schützen:</span><span class="sxs-lookup"><span data-stu-id="cd249-227">Take the following precautions to guard against the preceding scenarios:</span></span>

* <span data-ttu-id="cd249-228">Umschließen von JS-Interop-aufrufen innerhalb von [try-catch-](/dotnet/csharp/language-reference/keywords/try-catch) Anweisungen, um Fehler zu berücksichtigen, die während der Aufrufe auftreten können.</span><span class="sxs-lookup"><span data-stu-id="cd249-228">Wrap JS interop calls within [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) statements to account for errors that might occur during the invocations.</span></span> <span data-ttu-id="cd249-229">Weitere Informationen finden Sie unter <xref:blazor/handle-errors#javascript-interop>.</span><span class="sxs-lookup"><span data-stu-id="cd249-229">For more information, see <xref:blazor/handle-errors#javascript-interop>.</span></span>
* <span data-ttu-id="cd249-230">Überprüfen Sie die von den js-Interop-Aufrufen zurückgegebenen Daten, einschließlich der Fehlermeldungen, bevor Sie eine Aktion ausführen.</span><span class="sxs-lookup"><span data-stu-id="cd249-230">Validate data returned from JS interop invocations, including error messages, before taking any action.</span></span>

### <a name="net-methods-invoked-from-the-browser"></a><span data-ttu-id="cd249-231">Vom Browser aufgerufene .NET-Methoden</span><span class="sxs-lookup"><span data-stu-id="cd249-231">.NET methods invoked from the browser</span></span>

<span data-ttu-id="cd249-232">Keine Vertrauenswürdigkeit von Aufrufen von JavaScript zu .NET-Methoden.</span><span class="sxs-lookup"><span data-stu-id="cd249-232">Don't trust calls from JavaScript to .NET methods.</span></span> <span data-ttu-id="cd249-233">Wenn eine .NET-Methode für JavaScript verfügbar gemacht wird, sollten Sie Bedenken, wie die .NET-Methode aufgerufen wird:</span><span class="sxs-lookup"><span data-stu-id="cd249-233">When a .NET method is exposed to JavaScript, consider how the .NET method is invoked:</span></span>

* <span data-ttu-id="cd249-234">Behandeln Sie jede .NET-Methode, die für JavaScript verfügbar gemacht wird, wie ein öffentlicher Endpunkt der app.</span><span class="sxs-lookup"><span data-stu-id="cd249-234">Treat any .NET method exposed to JavaScript as you would a public endpoint to the app.</span></span>
  * <span data-ttu-id="cd249-235">Überprüfen der Eingabe.</span><span class="sxs-lookup"><span data-stu-id="cd249-235">Validate input.</span></span>
    * <span data-ttu-id="cd249-236">Stellen Sie sicher, dass die Werte in den erwarteten Bereichen liegen</span><span class="sxs-lookup"><span data-stu-id="cd249-236">Ensure that values are within expected ranges.</span></span>
    * <span data-ttu-id="cd249-237">Stellen Sie sicher, dass der Benutzer über die Berechtigung verfügt, die angeforderte Aktion auszuführen.</span><span class="sxs-lookup"><span data-stu-id="cd249-237">Ensure that the user has permission to perform the action requested.</span></span>
  * <span data-ttu-id="cd249-238">Weisen Sie im Rahmen des .NET-Methoden Auffüllens keine übermäßige Menge von Ressourcen zu.</span><span class="sxs-lookup"><span data-stu-id="cd249-238">Don't allocate an excessive quantity of resources as part of the .NET method invocation.</span></span> <span data-ttu-id="cd249-239">Führen Sie z. b. Prüfungen durch und platzieren Sie Grenzwerte für CPU-und Speicherauslastung.</span><span class="sxs-lookup"><span data-stu-id="cd249-239">For example, perform checks and place limits on CPU and memory use.</span></span>
  * <span data-ttu-id="cd249-240">Berücksichtigen Sie, dass statische Methoden und Instanzmethoden für JavaScript-Clients verfügbar gemacht werden können.</span><span class="sxs-lookup"><span data-stu-id="cd249-240">Take into account that static and instance methods can be exposed to JavaScript clients.</span></span> <span data-ttu-id="cd249-241">Vermeiden Sie das Freigeben des Zustands Sitzungs übergreifend, es sei denn, der Entwurf erfordert den Freigabe Zustand mit entsprechenden Einschränkungen.</span><span class="sxs-lookup"><span data-stu-id="cd249-241">Avoid sharing state across sessions unless the design calls for sharing state with appropriate constraints.</span></span>
    * <span data-ttu-id="cd249-242">Für Instanzmethoden, die über `DotNetReference` Objekte verfügbar gemacht werden, die ursprünglich über Abhängigkeitsinjektion (di) erstellt wurden, sollten die Objekte als Bereichs bezogene Objekte registriert werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-242">For instance methods exposed through `DotNetReference` objects that are originally created through dependency injection (DI), the objects should be registered as scoped objects.</span></span> <span data-ttu-id="cd249-243">Dies gilt für jeden di-Dienst, der von der Blazor Server-App verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-243">This applies to any DI service that the Blazor Server app uses.</span></span>
    * <span data-ttu-id="cd249-244">Vermeiden Sie bei statischen Methoden das Einrichten des Zustands, der nicht auf den Client beschränkt werden kann, es sei denn, die APP teilt den Status nicht explizit für alle Benutzer einer Serverinstanz frei.</span><span class="sxs-lookup"><span data-stu-id="cd249-244">For static methods, avoid establishing state that can't be scoped to the client unless the app is explicitly sharing state by-design across all users on a server instance.</span></span>
  * <span data-ttu-id="cd249-245">Vermeiden Sie das Übergeben von benutzerdefinierten Daten in Parameter an JavaScript-Aufrufe.</span><span class="sxs-lookup"><span data-stu-id="cd249-245">Avoid passing user-supplied data in parameters to JavaScript calls.</span></span> <span data-ttu-id="cd249-246">Wenn die Übergabe von Daten in Parametern wirklich erforderlich ist, müssen Sie sicherstellen, dass der JavaScript-Code die Übergabe der Daten ohne die Einführung von [XSS-Sicherheitsrisiken (Cross-Site Scripting](#cross-site-scripting-xss)</span><span class="sxs-lookup"><span data-stu-id="cd249-246">If passing data in parameters is absolutely required, ensure that the JavaScript code handles passing the data without introducing [Cross-site scripting (XSS)](#cross-site-scripting-xss) vulnerabilities.</span></span> <span data-ttu-id="cd249-247">Schreiben Sie z. b. keine vom Benutzer bereitgestellten Daten in die Dokumentobjektmodell (DOM), indem Sie die `innerHTML`-Eigenschaft eines Elements festlegen.</span><span class="sxs-lookup"><span data-stu-id="cd249-247">For example, don't write user-supplied data to the Document Object Model (DOM) by setting the `innerHTML` property of an element.</span></span> <span data-ttu-id="cd249-248">Verwenden Sie die [Inhalts Sicherheitsrichtlinie (Content Security Policy, CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) , um `eval` und andere unsichere JavaScript-Primitive zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="cd249-248">Consider using [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) to disable `eval` and other unsafe JavaScript primitives.</span></span>
* <span data-ttu-id="cd249-249">Vermeiden Sie die Implementierung der benutzerdefinierten Verteilung von .net-aufrufen zusätzlich zur Verteiler Implementierung des Frameworks.</span><span class="sxs-lookup"><span data-stu-id="cd249-249">Avoid implementing custom dispatching of .NET invocations on top of the framework's dispatching implementation.</span></span> <span data-ttu-id="cd249-250">Das verfügbar machen von .NET-Methoden für den Browser ist ein erweitertes Szenario, das für die allgemeine Blazor Entwicklung nicht empfohlen wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-250">Exposing .NET methods to the browser is an advanced scenario, not recommended for general Blazor development.</span></span>

### <a name="events"></a><span data-ttu-id="cd249-251">Ereignisse</span><span class="sxs-lookup"><span data-stu-id="cd249-251">Events</span></span>

<span data-ttu-id="cd249-252">Ereignisse stellen einen Einstiegspunkt für eine Blazor Server-App bereit.</span><span class="sxs-lookup"><span data-stu-id="cd249-252">Events provide an entry point to a Blazor Server app.</span></span> <span data-ttu-id="cd249-253">Die gleichen Regeln für das Schützen von Endpunkten in Web-Apps gelten für die Ereignis Behandlung in Blazor Server-apps.</span><span class="sxs-lookup"><span data-stu-id="cd249-253">The same rules for safeguarding endpoints in web apps apply to event handling in Blazor Server apps.</span></span> <span data-ttu-id="cd249-254">Ein böswilliger Client kann alle Daten senden, die er als Nutzlast für ein Ereignis senden möchte.</span><span class="sxs-lookup"><span data-stu-id="cd249-254">A malicious client can send any data it wishes to send as the payload for an event.</span></span>

<span data-ttu-id="cd249-255">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="cd249-255">For example:</span></span>

* <span data-ttu-id="cd249-256">Ein Änderungs Ereignis für eine `<select>` könnte einen Wert senden, der nicht innerhalb der Optionen liegt, die die APP dem Client vorgelegt hat.</span><span class="sxs-lookup"><span data-stu-id="cd249-256">A change event for a `<select>` could send a value that isn't within the options that the app presented to the client.</span></span>
* <span data-ttu-id="cd249-257">Eine `<input>` kann beliebige Textdaten an den Server senden, wobei die Client seitige Validierung umgangen wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-257">An `<input>` could send any text data to the server, bypassing client-side validation.</span></span>

<span data-ttu-id="cd249-258">Die APP muss die Daten für jedes Ereignis validieren, das die APP behandelt.</span><span class="sxs-lookup"><span data-stu-id="cd249-258">The app must validate the data for any event that the app handles.</span></span> <span data-ttu-id="cd249-259">Die Blazor Framework- [Formular Komponenten](xref:blazor/forms-validation) führen grundlegende Überprüfungen durch.</span><span class="sxs-lookup"><span data-stu-id="cd249-259">The Blazor framework [forms components](xref:blazor/forms-validation) perform basic validations.</span></span> <span data-ttu-id="cd249-260">Wenn die APP benutzerdefinierte Formular Komponenten verwendet, muss benutzerdefinierter Code geschrieben werden, um die Ereignisdaten entsprechend zu validieren.</span><span class="sxs-lookup"><span data-stu-id="cd249-260">If the app uses custom forms components, custom code must be written to validate event data as appropriate.</span></span>

Blazor<span data-ttu-id="cd249-261"> Server Ereignisse asynchron sind, können mehrere Ereignisse an den Server weitergeleitet werden, bevor die app durch die Erstellung eines neuen Rendering Zeit zum reagieren hat.</span><span class="sxs-lookup"><span data-stu-id="cd249-261"> Server events are asynchronous, so multiple events can be dispatched to the server before the app has time to react by producing a new render.</span></span> <span data-ttu-id="cd249-262">Dies hat einige Sicherheitsaspekte zu bedenken.</span><span class="sxs-lookup"><span data-stu-id="cd249-262">This has some security implications to consider.</span></span> <span data-ttu-id="cd249-263">Das Einschränken von Client Aktionen in der APP muss innerhalb von Ereignis Handlern erfolgen und ist nicht vom aktuellen gerenderten Ansichts Zustand abhängig.</span><span class="sxs-lookup"><span data-stu-id="cd249-263">Limiting client actions in the app must be performed inside event handlers and not depend on the current rendered view state.</span></span>

<span data-ttu-id="cd249-264">Stellen Sie sich eine-Counter-Komponente vor, die es einem Benutzer ermöglicht, einen-Wert maximal dreimal zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="cd249-264">Consider a counter component that should allow a user to increment a counter a maximum of three times.</span></span> <span data-ttu-id="cd249-265">Die Schaltfläche zum Erhöhen des Zählers basiert bedingt auf dem Wert `count`:</span><span class="sxs-lookup"><span data-stu-id="cd249-265">The button to increment the counter is conditionally based on the value of `count`:</span></span>

```cshtml
<p>Count: @count<p>

@if (count < 3)
{
    <button @onclick="IncrementCount" value="Increment count" />
}

@code 
{
    private int count = 0;

    private void IncrementCount()
    {
        count++;
    }
}
```

<span data-ttu-id="cd249-266">Ein Client kann ein oder mehrere Inkrement-Ereignisse verteilen, bevor das Framework ein neues Rendering dieser Komponente erzeugt.</span><span class="sxs-lookup"><span data-stu-id="cd249-266">A client can dispatch one or more increment events before the framework produces a new render of this component.</span></span> <span data-ttu-id="cd249-267">Das Ergebnis ist, dass die `count` durch den Benutzer *dreimal* erhöht werden kann, da die Schaltfläche nicht schnell genug von der Benutzeroberfläche entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-267">The result is that the `count` can be incremented *over three times* by the user because the button isn't removed by the UI quickly enough.</span></span> <span data-ttu-id="cd249-268">Im folgenden Beispiel wird die richtige Methode zum Erreichen des Limits von drei `count` Inkrementen gezeigt:</span><span class="sxs-lookup"><span data-stu-id="cd249-268">The correct way to achieve the limit of three `count` increments is shown in the following example:</span></span>

```cshtml
<p>Count: @count<p>

@if (count < 3)
{
    <button @onclick="IncrementCount" value="Increment count" />
}

@code 
{
    private int count = 0;

    private void IncrementCount()
    {
        if (count < 3)
        {
            count++;
        }
    }
}
```

<span data-ttu-id="cd249-269">Wenn Sie die `if (count < 3) { ... }` Prüfung innerhalb des Handlers hinzufügen, basiert die Entscheidung für die Inkrement-`count` auf dem aktuellen App-Zustand.</span><span class="sxs-lookup"><span data-stu-id="cd249-269">By adding the `if (count < 3) { ... }` check inside the handler, the decision to increment `count` is based on the current app state.</span></span> <span data-ttu-id="cd249-270">Die Entscheidung basiert nicht auf dem Status der Benutzeroberfläche, wie es im vorherigen Beispiel der Fall war, das möglicherweise vorübergehend veraltet ist.</span><span class="sxs-lookup"><span data-stu-id="cd249-270">The decision isn't based on the state of the UI as it was in the previous example, which might be temporarily stale.</span></span>

### <a name="guard-against-multiple-dispatches"></a><span data-ttu-id="cd249-271">Schutz vor mehreren sendet</span><span class="sxs-lookup"><span data-stu-id="cd249-271">Guard against multiple dispatches</span></span>

<span data-ttu-id="cd249-272">Wenn ein Ereignis Rückruf einen Vorgang mit langer Ausführungszeit aufruft, z. b. das Abrufen von Daten aus einem externen Dienst oder einer externen Datenbank, empfiehlt sich die Verwendung eines Schutzes.</span><span class="sxs-lookup"><span data-stu-id="cd249-272">If an event callback invokes a long running operation, such as fetching data from an external service or database, consider using a guard.</span></span> <span data-ttu-id="cd249-273">Der Wächter kann verhindern, dass der Benutzer mehrere Vorgänge in die Warteschlange eingereiht, während der Vorgang durch visuelles Feedback ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-273">The guard can prevent the user from queueing up multiple operations while the operation is in progress with visual feedback.</span></span> <span data-ttu-id="cd249-274">Der folgende Komponenten Code legt `isLoading` auf `true` fest, während `GetForecastAsync` Daten vom Server abruft.</span><span class="sxs-lookup"><span data-stu-id="cd249-274">The following component code sets `isLoading` to `true` while `GetForecastAsync` obtains data from the server.</span></span> <span data-ttu-id="cd249-275">Obwohl `isLoading` `true`ist, wird die Schaltfläche in der Benutzeroberfläche deaktiviert:</span><span class="sxs-lookup"><span data-stu-id="cd249-275">While `isLoading` is `true`, the button is disabled in the UI:</span></span>

```cshtml
@page "/fetchdata"
@using BlazorServerSample.Data
@inject WeatherForecastService ForecastService

<button disabled="@isLoading" @onclick="UpdateForecasts">Update</button>

@code {
    private bool isLoading;
    private WeatherForecast[] forecasts;

    private async Task UpdateForecasts()
    {
        if (!isLoading)
        {
            isLoading = true;
            forecasts = await ForecastService.GetForecastAsync(DateTime.Now);
            isLoading = false;
        }
    }
}
```

### <a name="cancel-early-and-avoid-use-after-dispose"></a><span data-ttu-id="cd249-276">Früh abbrechen und Verwendung nach dem verwerfen vermeiden</span><span class="sxs-lookup"><span data-stu-id="cd249-276">Cancel early and avoid use-after-dispose</span></span>

<span data-ttu-id="cd249-277">Zusätzlich zur Verwendung eines Wächter, wie im Abschnitt [Schutz vor mehreren](#guard-against-multiple-dispatches) Verteilungen beschrieben, empfiehlt es sich, eine <xref:System.Threading.CancellationToken> zu verwenden, um Vorgänge mit langer Ausführungszeit abzubrechen, wenn die Komponente verworfen wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-277">In addition to using a guard as described in the [Guard against multiple dispatches](#guard-against-multiple-dispatches) section, consider using a <xref:System.Threading.CancellationToken> to cancel long-running operations when the component is disposed.</span></span> <span data-ttu-id="cd249-278">Dieser Ansatz bietet den zusätzlichen Vorteil, dass die Verwendung von " *Use-After-* verwerfen" in Komponenten vermieden wird:</span><span class="sxs-lookup"><span data-stu-id="cd249-278">This approach has the added benefit of avoiding *use-after-dispose* in components:</span></span>

```cshtml
@implements IDisposable

...

@code {
    private readonly CancellationTokenSource TokenSource = 
        new CancellationTokenSource();

    private async Task UpdateForecasts()
    {
        ...

        forecasts = await ForecastService.GetForecastAsync(DateTime.Now, 
            TokenSource.Token);

        if (TokenSource.Token.IsCancellationRequested)
        {
           return;
        }

        ...
    }

    public void Dispose()
    {
        CancellationTokenSource.Cancel();
    }
}
```

### <a name="avoid-events-that-produce-large-amounts-of-data"></a><span data-ttu-id="cd249-279">Vermeiden von Ereignissen, die große Datenmengen verursachen</span><span class="sxs-lookup"><span data-stu-id="cd249-279">Avoid events that produce large amounts of data</span></span>

<span data-ttu-id="cd249-280">Einige DOM-Ereignisse, wie z. b. `oninput` oder `onscroll`, können eine große Datenmenge verursachen.</span><span class="sxs-lookup"><span data-stu-id="cd249-280">Some DOM events, such as `oninput` or `onscroll`, can produce a large amount of data.</span></span> <span data-ttu-id="cd249-281">Vermeiden Sie die Verwendung dieser Ereignisse in Blazor Server-apps.</span><span class="sxs-lookup"><span data-stu-id="cd249-281">Avoid using these events in Blazor server apps.</span></span>

## <a name="additional-security-guidance"></a><span data-ttu-id="cd249-282">Zusätzliche Sicherheits Leit Fäden</span><span class="sxs-lookup"><span data-stu-id="cd249-282">Additional security guidance</span></span>

<span data-ttu-id="cd249-283">Die Richtlinien zum Sichern von ASP.net Core-apps gelten für Blazor Server-apps und werden in den folgenden Abschnitten behandelt:</span><span class="sxs-lookup"><span data-stu-id="cd249-283">The guidance for securing ASP.NET Core apps apply to Blazor Server apps and are covered in the following sections:</span></span>

* [<span data-ttu-id="cd249-284">Protokollierung und sensible Daten</span><span class="sxs-lookup"><span data-stu-id="cd249-284">Logging and sensitive data</span></span>](#logging-and-sensitive-data)
* [<span data-ttu-id="cd249-285">Schützen von Informationen während der Übertragung mit HTTPS</span><span class="sxs-lookup"><span data-stu-id="cd249-285">Protect information in transit with HTTPS</span></span>](#protect-information-in-transit-with-https)
* <span data-ttu-id="cd249-286">[Cross-Site Scripting (XSS)](#cross-site-scripting-xss))</span><span class="sxs-lookup"><span data-stu-id="cd249-286">[Cross-site scripting (XSS)](#cross-site-scripting-xss))</span></span>
* [<span data-ttu-id="cd249-287">Cross-Origin-Schutz</span><span class="sxs-lookup"><span data-stu-id="cd249-287">Cross-origin protection</span></span>](#cross-origin-protection)
* [<span data-ttu-id="cd249-288">Click-Jacking</span><span class="sxs-lookup"><span data-stu-id="cd249-288">Click-jacking</span></span>](#click-jacking)
* [<span data-ttu-id="cd249-289">Offene Umleitungen</span><span class="sxs-lookup"><span data-stu-id="cd249-289">Open redirects</span></span>](#open-redirects)

### <a name="logging-and-sensitive-data"></a><span data-ttu-id="cd249-290">Protokollierung und sensible Daten</span><span class="sxs-lookup"><span data-stu-id="cd249-290">Logging and sensitive data</span></span>

<span data-ttu-id="cd249-291">Die JS-Interop-Interaktionen zwischen Client und Server werden in den Protokollen des Servers mit <xref:Microsoft.Extensions.Logging.ILogger> Instanzen aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="cd249-291">JS interop interactions between the client and server are recorded in the server's logs with <xref:Microsoft.Extensions.Logging.ILogger> instances.</span></span> Blazor<span data-ttu-id="cd249-292"> vermeidet das Protokollieren von sensiblen Informationen, z. b. tatsächlichen Ereignissen oder JS-Interop-Eingaben und-Ausgaben</span><span class="sxs-lookup"><span data-stu-id="cd249-292"> avoids logging sensitive information, such as actual events or JS interop inputs and outputs.</span></span>

<span data-ttu-id="cd249-293">Wenn auf dem Server ein Fehler auftritt, wird der Client vom Framework benachrichtigt, und die Sitzung wird abgebrochen.</span><span class="sxs-lookup"><span data-stu-id="cd249-293">When an error occurs on the server, the framework notifies the client and tears down the session.</span></span> <span data-ttu-id="cd249-294">Standardmäßig erhält der Client eine allgemeine Fehlermeldung, die in den Entwicklertools des Browsers angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-294">By default, the client receives a generic error message that can be seen in the browser's developer tools.</span></span>

<span data-ttu-id="cd249-295">Der Client seitige Fehler enthält nicht die Aufruf Liste und bietet keine Details zur Ursache des Fehlers, aber Server Protokolle enthalten diese Informationen.</span><span class="sxs-lookup"><span data-stu-id="cd249-295">The client-side error doesn't include the callstack and doesn't provide detail on the cause of the error, but server logs do contain such information.</span></span> <span data-ttu-id="cd249-296">Zu Entwicklungszwecken können dem Client vertrauliche Fehlerinformationen zur Verfügung gestellt werden, indem ausführliche Fehler aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-296">For development purposes, sensitive error information can be made available to the client by enabling detailed errors.</span></span>

<span data-ttu-id="cd249-297">Ausführliche Fehler ermöglichen:</span><span class="sxs-lookup"><span data-stu-id="cd249-297">Enable detailed errors with:</span></span>

* <span data-ttu-id="cd249-298">`CircuitOptions.DetailedErrors`</span><span class="sxs-lookup"><span data-stu-id="cd249-298">`CircuitOptions.DetailedErrors`.</span></span>
* <span data-ttu-id="cd249-299">`DetailedErrors` Konfigurationsschlüssel.</span><span class="sxs-lookup"><span data-stu-id="cd249-299">`DetailedErrors` configuration key.</span></span> <span data-ttu-id="cd249-300">Legen Sie beispielsweise die `ASPNETCORE_DETAILEDERRORS`-Umgebungsvariable auf den Wert `true`fest.</span><span class="sxs-lookup"><span data-stu-id="cd249-300">For example, set the `ASPNETCORE_DETAILEDERRORS` environment variable to a value of `true`.</span></span>

> [!WARNING]
> <span data-ttu-id="cd249-301">Das verfügbar machen von Fehlerinformationen für Clients im Internet stellt ein Sicherheitsrisiko dar, das immer vermieden werden sollte.</span><span class="sxs-lookup"><span data-stu-id="cd249-301">Exposing error information to clients on the Internet is a security risk that should always be avoided.</span></span>

### <a name="protect-information-in-transit-with-https"></a><span data-ttu-id="cd249-302">Schützen von Informationen während der Übertragung mit HTTPS</span><span class="sxs-lookup"><span data-stu-id="cd249-302">Protect information in transit with HTTPS</span></span>

Blazor<span data-ttu-id="cd249-303"> Server verwendet für die Kommunikation zwischen dem Client und dem Server SignalR.</span><span class="sxs-lookup"><span data-stu-id="cd249-303"> Server uses SignalR for communication between the client and the server.</span></span> Blazor<span data-ttu-id="cd249-304"> Server verwendet normalerweise den Transport, der SignalR aushandiert, normalerweise websockets.</span><span class="sxs-lookup"><span data-stu-id="cd249-304"> Server normally uses the transport that SignalR negotiates, which is typically WebSockets.</span></span>

Blazor<span data-ttu-id="cd249-305"> Server gewährleistet nicht die Integrität und Vertraulichkeit der Daten, die zwischen dem Server und dem Client gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-305"> Server doesn't ensure the integrity and confidentiality of the data sent between the server and the client.</span></span> <span data-ttu-id="cd249-306">Verwenden Sie immer HTTPS.</span><span class="sxs-lookup"><span data-stu-id="cd249-306">Always use HTTPS.</span></span>

### <a name="cross-site-scripting-xss"></a><span data-ttu-id="cd249-307">Cross-Site Scripting (XSS)</span><span class="sxs-lookup"><span data-stu-id="cd249-307">Cross-site scripting (XSS)</span></span>

<span data-ttu-id="cd249-308">Cross-Site Scripting (XSS) ermöglicht es einer nicht autorisierten Partei, beliebige Logik im Kontext des Browsers auszuführen.</span><span class="sxs-lookup"><span data-stu-id="cd249-308">Cross-site scripting (XSS) allows an unauthorized party to execute arbitrary logic in the context of the browser.</span></span> <span data-ttu-id="cd249-309">Eine kompromittierte app könnte ggf. beliebigen Code auf dem Client ausführen.</span><span class="sxs-lookup"><span data-stu-id="cd249-309">A compromised app could potentially run arbitrary code on the client.</span></span> <span data-ttu-id="cd249-310">Das Sicherheitsrisiko kann verwendet werden, um potenziell eine Reihe schädlicher Aktionen für den Server auszuführen:</span><span class="sxs-lookup"><span data-stu-id="cd249-310">The vulnerability could be used to potentially perform a number of malicious actions against the server:</span></span>

* <span data-ttu-id="cd249-311">Senden Sie gefälschte/ungültige Ereignisse an den Server.</span><span class="sxs-lookup"><span data-stu-id="cd249-311">Dispatch fake/invalid events to the server.</span></span>
* <span data-ttu-id="cd249-312">Dispatchvervollständigung/ungültige Rendering-Vervollständigung.</span><span class="sxs-lookup"><span data-stu-id="cd249-312">Dispatch fail/invalid render completions.</span></span>
* <span data-ttu-id="cd249-313">Vermeiden Sie das Verteilen von Rendering-Vervollständigungen.</span><span class="sxs-lookup"><span data-stu-id="cd249-313">Avoid dispatching render completions.</span></span>
* <span data-ttu-id="cd249-314">Dispatchinterop-Aufrufe von JavaScript an .net.</span><span class="sxs-lookup"><span data-stu-id="cd249-314">Dispatch interop calls from JavaScript to .NET.</span></span>
* <span data-ttu-id="cd249-315">Ändern Sie die Antwort von Interop-Aufrufen von .net auf JavaScript.</span><span class="sxs-lookup"><span data-stu-id="cd249-315">Modify the response of interop calls from .NET to JavaScript.</span></span>
* <span data-ttu-id="cd249-316">Vermeiden Sie die Verteilung von .net an JS-Interop-Ergebnisse.</span><span class="sxs-lookup"><span data-stu-id="cd249-316">Avoid dispatching .NET to JS interop results.</span></span>

<span data-ttu-id="cd249-317">Das Blazor Server-Framework führt Maßnahmen zum Schutz vor einigen der vorangegangenen Bedrohungen aus:</span><span class="sxs-lookup"><span data-stu-id="cd249-317">The Blazor Server framework takes steps to protect against some of the preceding threats:</span></span>

* <span data-ttu-id="cd249-318">Beendet das Generieren neuer UI-Updates, wenn der Client keine Rendering-Batches anerkennt.</span><span class="sxs-lookup"><span data-stu-id="cd249-318">Stops producing new UI updates if the client isn't acknowledging render batches.</span></span> <span data-ttu-id="cd249-319">Konfiguriert mit `CircuitOptions.MaxBufferedUnacknowledgedRenderBatches`.</span><span class="sxs-lookup"><span data-stu-id="cd249-319">Configured with `CircuitOptions.MaxBufferedUnacknowledgedRenderBatches`.</span></span>
* <span data-ttu-id="cd249-320">Gibt ein Timeout für einen beliebigen .net-zu-JavaScript-Aufrufe nach einer Minute aus, ohne eine Antwort vom Client zu erhalten</span><span class="sxs-lookup"><span data-stu-id="cd249-320">Times out any .NET to JavaScript call after one minute without receiving a response from the client.</span></span> <span data-ttu-id="cd249-321">Konfiguriert mit `CircuitOptions.JSInteropDefaultCallTimeout`.</span><span class="sxs-lookup"><span data-stu-id="cd249-321">Configured with `CircuitOptions.JSInteropDefaultCallTimeout`.</span></span>
* <span data-ttu-id="cd249-322">Führt bei der JS-Interop eine grundlegende Validierung für alle Eingaben aus, die vom Browser stammen:</span><span class="sxs-lookup"><span data-stu-id="cd249-322">Performs basic validation on all input coming from the browser during JS interop:</span></span>
  * <span data-ttu-id="cd249-323">.Net-Verweise sind gültig und vom Typ, der von der .NET-Methode erwartet wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-323">.NET references are valid and of the type expected by the .NET method.</span></span>
  * <span data-ttu-id="cd249-324">Die Daten sind nicht falsch formatiert.</span><span class="sxs-lookup"><span data-stu-id="cd249-324">The data isn't malformed.</span></span>
  * <span data-ttu-id="cd249-325">Die richtige Anzahl von Argumenten für die-Methode ist in der Nutzlast vorhanden.</span><span class="sxs-lookup"><span data-stu-id="cd249-325">The correct number of arguments for the method are present in the payload.</span></span>
  * <span data-ttu-id="cd249-326">Die Argumente oder das Ergebnis können ordnungsgemäß deserialisiert werden, bevor die-Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-326">The arguments or result can be deserialized correctly before invoking the method.</span></span>
* <span data-ttu-id="cd249-327">Führt eine grundlegende Validierung in allen Eingaben aus, die aus dem Browser von verteilten Ereignissen stammen:</span><span class="sxs-lookup"><span data-stu-id="cd249-327">Performs basic validation in all input coming from the browser from dispatched events:</span></span>
  * <span data-ttu-id="cd249-328">Das Ereignis hat einen gültigen Typ.</span><span class="sxs-lookup"><span data-stu-id="cd249-328">The event has a valid type.</span></span>
  * <span data-ttu-id="cd249-329">Die Daten für das Ereignis können deserialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-329">The data for the event can be deserialized.</span></span>
  * <span data-ttu-id="cd249-330">Dem Ereignis ist ein Ereignishandler zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="cd249-330">There's an event handler associated with the event.</span></span>

<span data-ttu-id="cd249-331">Zusätzlich zu den Sicherheitsvorkehrungen, die das Framework implementiert, muss die APP vom Entwickler codiert werden, um Bedrohungen vor Bedrohungen zu schützen und geeignete Maßnahmen zu ergreifen:</span><span class="sxs-lookup"><span data-stu-id="cd249-331">In addition to the safeguards that the framework implements, the app must be coded by the developer to safeguard against threats and take appropriate actions:</span></span>

* <span data-ttu-id="cd249-332">Validieren Sie Daten immer, wenn Ereignisse behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-332">Always validate data when handling events.</span></span>
* <span data-ttu-id="cd249-333">Ergreifen Sie die entsprechende Aktion, wenn Sie ungültige Daten empfangen</span><span class="sxs-lookup"><span data-stu-id="cd249-333">Take appropriate action upon receiving invalid data:</span></span>
  * <span data-ttu-id="cd249-334">Ignorieren Sie die Daten, und geben Sie zurück.</span><span class="sxs-lookup"><span data-stu-id="cd249-334">Ignore the data and return.</span></span> <span data-ttu-id="cd249-335">Dadurch kann die APP die Verarbeitung von Anforderungen fortsetzen.</span><span class="sxs-lookup"><span data-stu-id="cd249-335">This allows the app to continue processing requests.</span></span>
  * <span data-ttu-id="cd249-336">Wenn die APP ermittelt, dass die Eingabe unrechtmäßig ist und nicht von einem legitimen Client erstellt werden konnte, lösen Sie eine Ausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="cd249-336">If the app determines that the input is illegitimate and couldn't be produced by legitimate client, throw an exception.</span></span> <span data-ttu-id="cd249-337">Wenn eine Ausnahme ausgelöst wird, wird die Verbindung abgebrochen, und die Sitzung wird beendet.</span><span class="sxs-lookup"><span data-stu-id="cd249-337">Throwing an exception tears down the circuit and ends the session.</span></span>
* <span data-ttu-id="cd249-338">Vertrauen Sie nicht der Fehlermeldung, die von den in den Protokollen enthaltenen Rendering-Batch-Vervollständigungen bereitgestellt wird</span><span class="sxs-lookup"><span data-stu-id="cd249-338">Don't trust the error message provided by render batch completions included in the logs.</span></span> <span data-ttu-id="cd249-339">Der Fehler wird vom Client bereitgestellt und kann im Allgemeinen nicht als vertrauenswürdig eingestuft werden, da der Client möglicherweise gefährdet ist.</span><span class="sxs-lookup"><span data-stu-id="cd249-339">The error is provided by the client and can't generally be trusted, as the client might be compromised.</span></span>
* <span data-ttu-id="cd249-340">Vertrauen Sie der Eingabe für JS-Interop-Aufrufe in keiner Richtung zwischen den JavaScript-und .NET-Methoden.</span><span class="sxs-lookup"><span data-stu-id="cd249-340">Don't trust the input on JS interop calls in either direction between JavaScript and .NET methods.</span></span>
* <span data-ttu-id="cd249-341">Die APP ist dafür verantwortlich, zu überprüfen, ob der Inhalt von Argumenten und Ergebnissen gültig ist, auch wenn die Argumente oder Ergebnisse ordnungsgemäß deserialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-341">The app is responsible for validating that the content of arguments and results are valid, even if the arguments or results are correctly deserialized.</span></span>

<span data-ttu-id="cd249-342">Damit ein XSS-Sicherheitsrisiko vorhanden ist, muss die APP Benutzereingaben auf der gerenderten Seite einbinden.</span><span class="sxs-lookup"><span data-stu-id="cd249-342">For a XSS vulnerability to exist, the app must incorporate user input in the rendered page.</span></span> Blazor<span data-ttu-id="cd249-343"> Server Komponenten führen einen Kompilierzeit Schritt aus, bei dem das Markup in einer *Razor* -Datei in C# Verfahrens Logik transformiert wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-343"> Server components execute a compile-time step where the markup in a *.razor* file is transformed into procedural C# logic.</span></span> <span data-ttu-id="cd249-344">Zur Laufzeit erstellt die C# Logik eine *renderbaum* Struktur, die die Elemente, den Text und die untergeordneten Komponenten beschreibt.</span><span class="sxs-lookup"><span data-stu-id="cd249-344">At runtime, the C# logic builds a *render tree* describing the elements, text, and child components.</span></span> <span data-ttu-id="cd249-345">Dies wird über eine Sequenz von JavaScript-Anweisungen auf das DOM des Browsers angewendet (oder wird bei der vorab Generierung in HTML serialisiert):</span><span class="sxs-lookup"><span data-stu-id="cd249-345">This is applied to the browser's DOM via a sequence of JavaScript instructions (or is serialized to HTML in the case of prerendering):</span></span>

* <span data-ttu-id="cd249-346">Benutzereingaben, die über normale Razor-Syntax gerendert werden (z. b. `@someStringValue`), machen keine XSS-Sicherheits Anfälligkeit verfügbar, da der Razor-Syntax dem DOM über Befehle hinzugefügt wird, die nur Text schreiben können.</span><span class="sxs-lookup"><span data-stu-id="cd249-346">User input rendered via normal Razor syntax (for example, `@someStringValue`) doesn't expose a XSS vulnerability because the Razor syntax is added to the DOM via commands that can only write text.</span></span> <span data-ttu-id="cd249-347">Auch wenn der Wert HTML-Markup enthält, wird der Wert als statischer Text angezeigt.</span><span class="sxs-lookup"><span data-stu-id="cd249-347">Even if the value includes HTML markup, the value is displayed as static text.</span></span> <span data-ttu-id="cd249-348">Bei der vorab Generierung ist die Ausgabe HTML-codiert, wodurch der Inhalt auch als statischer Text angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-348">When prerendering, the output is HTML-encoded, which also displays the content as static text.</span></span>
* <span data-ttu-id="cd249-349">Skript Tags sind nicht zulässig und sollten nicht in die Komponenten-Rendering-Struktur der APP eingeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-349">Script tags aren't allowed and shouldn't be included in the app's component render tree.</span></span> <span data-ttu-id="cd249-350">Wenn ein Skripttag im Markup einer Komponente enthalten ist, wird ein Kompilierzeitfehler generiert.</span><span class="sxs-lookup"><span data-stu-id="cd249-350">If a script tag is included in a component's markup, a compile-time error is generated.</span></span>
* <span data-ttu-id="cd249-351">Komponenten Autoren können Komponenten in C# erstellen, ohne Razor zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="cd249-351">Component authors can author components in C# without using Razor.</span></span> <span data-ttu-id="cd249-352">Der Komponenten Autor ist für die Verwendung der richtigen APIs verantwortlich, wenn die Ausgabe ausgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-352">The component author is responsible for using the correct APIs when emitting output.</span></span> <span data-ttu-id="cd249-353">Verwenden Sie beispielsweise `builder.AddContent(0, someUserSuppliedString)` und *nicht* `builder.AddMarkupContent(0, someUserSuppliedString)`, da letztere ein XSS-Sicherheitsrisiko erzeugen könnte.</span><span class="sxs-lookup"><span data-stu-id="cd249-353">For example, use `builder.AddContent(0, someUserSuppliedString)` and *not* `builder.AddMarkupContent(0, someUserSuppliedString)`, as the latter could create a XSS vulnerability.</span></span>

<span data-ttu-id="cd249-354">Im Rahmen des Schutzes vor XSS-Angriffen sollten Sie die Implementierung von XSS-entschärfungen in Erwägung gezogen werden, z. b. [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP)</span><span class="sxs-lookup"><span data-stu-id="cd249-354">As part of protecting against XSS attacks, consider implementing XSS mitigations, such as [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP).</span></span>

<span data-ttu-id="cd249-355">Weitere Informationen finden Sie unter <xref:security/cross-site-scripting>.</span><span class="sxs-lookup"><span data-stu-id="cd249-355">For more information, see <xref:security/cross-site-scripting>.</span></span>

### <a name="cross-origin-protection"></a><span data-ttu-id="cd249-356">Cross-Origin-Schutz</span><span class="sxs-lookup"><span data-stu-id="cd249-356">Cross-origin protection</span></span>

<span data-ttu-id="cd249-357">Cross-Origin-Angriffe betreffen einen Client von einem anderen Ursprung, der eine Aktion auf dem Server ausführt.</span><span class="sxs-lookup"><span data-stu-id="cd249-357">Cross-origin attacks involve a client from a different origin performing an action against the server.</span></span> <span data-ttu-id="cd249-358">Bei der bösartigen Aktion handelt es sich in der Regel um eine GET-Anforderung oder eine Formular Bereitstellung (Website übergreifende Anforderungs Fälschung, CSRF), aber auch das Öffnen eines bösartigen websockets ist möglich.</span><span class="sxs-lookup"><span data-stu-id="cd249-358">The malicious action is typically a GET request or a form POST (Cross-Site Request Forgery, CSRF), but opening a malicious WebSocket is also possible.</span></span> Blazor<span data-ttu-id="cd249-359"> Server-Apps bieten [dieselben Garantien wie jede andere SignalR-APP, die das Hub-Protokoll Angebot verwendet](xref:signalr/security):</span><span class="sxs-lookup"><span data-stu-id="cd249-359"> Server apps offer [the same guarantees that any other SignalR app using the hub protocol offer](xref:signalr/security):</span></span>

* <span data-ttu-id="cd249-360">der Zugriff auf Blazor Server-Apps ist über-und-übergreifend möglich, es sei denn, es werden weitere Measures zum verhindern</span><span class="sxs-lookup"><span data-stu-id="cd249-360">Blazor Server apps can be accessed cross-origin unless additional measures are taken to prevent it.</span></span> <span data-ttu-id="cd249-361">Wenn Sie den Ursprungs übergreifenden Zugriff deaktivieren möchten, deaktivieren Sie cors im Endpunkt, indem Sie die cors-Middleware zur Pipeline hinzufügen und die `DisableCorsAttribute` den Metadaten des Blazor Endpunkts hinzufügen oder den Satz zulässiger Ursprünge einschränken, indem Sie [SignalR für die Ursprungs übergreifende Ressourcen Freigabe konfigurieren](xref:signalr/security#cross-origin-resource-sharing).</span><span class="sxs-lookup"><span data-stu-id="cd249-361">To disable cross-origin access, either disable CORS in the endpoint by adding the CORS middleware to the pipeline and adding the `DisableCorsAttribute` to the Blazor endpoint metadata or limit the set of allowed origins by [configuring SignalR for cross-origin resource sharing](xref:signalr/security#cross-origin-resource-sharing).</span></span>
* <span data-ttu-id="cd249-362">Wenn cors aktiviert ist, sind möglicherweise zusätzliche Schritte erforderlich, um die APP abhängig von der cors-Konfiguration zu schützen.</span><span class="sxs-lookup"><span data-stu-id="cd249-362">If CORS is enabled, extra steps might be required to protect the app depending on the CORS configuration.</span></span> <span data-ttu-id="cd249-363">Wenn cors global aktiviert ist, kann cors für den Blazor serverhub deaktiviert werden, indem die `DisableCorsAttribute` Metadaten den Endpunkt Metadaten nach dem Aufrufen von `hub.MapBlazorHub()`hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-363">If CORS is globally enabled, CORS can be disabled for the Blazor Server hub by adding the `DisableCorsAttribute` metadata to the endpoint metadata after calling `hub.MapBlazorHub()`.</span></span>

<span data-ttu-id="cd249-364">Weitere Informationen finden Sie unter <xref:security/anti-request-forgery>.</span><span class="sxs-lookup"><span data-stu-id="cd249-364">For more information, see <xref:security/anti-request-forgery>.</span></span>

### <a name="click-jacking"></a><span data-ttu-id="cd249-365">Click-Jacking</span><span class="sxs-lookup"><span data-stu-id="cd249-365">Click-jacking</span></span>

<span data-ttu-id="cd249-366">Click-Jacking umfasst das Rendern einer Site als `<iframe>` innerhalb einer Website von einem anderen Ursprung aus, um den Benutzer zur Ausführung von Aktionen auf der Site zu bringen, die angegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-366">Click-jacking involves rendering a site as an `<iframe>` inside a site from a different origin in order to trick the user into performing actions on the site under attack.</span></span>

<span data-ttu-id="cd249-367">Um eine APP vor dem Rendering innerhalb einer `<iframe>`zu schützen, verwenden Sie die [Inhalts Sicherheitsrichtlinie (Content Security Policy, CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) und den `X-Frame-Options`-Header.</span><span class="sxs-lookup"><span data-stu-id="cd249-367">To protect an app from rendering inside of an `<iframe>`, use [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) and the `X-Frame-Options` header.</span></span> <span data-ttu-id="cd249-368">Weitere Informationen finden Sie unter [MDN-Webdokumentation: X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options).</span><span class="sxs-lookup"><span data-stu-id="cd249-368">For more information, see [MDN web docs: X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options).</span></span>

### <a name="open-redirects"></a><span data-ttu-id="cd249-369">Offene Umleitungen</span><span class="sxs-lookup"><span data-stu-id="cd249-369">Open redirects</span></span>

<span data-ttu-id="cd249-370">Wenn eine Blazor Server-App-Sitzung gestartet wird, führt der Server eine grundlegende Überprüfung der URLs aus, die im Rahmen des Starts der Sitzung gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-370">When a Blazor Server app session starts, the server performs basic validation of the URLs sent as part of starting the session.</span></span> <span data-ttu-id="cd249-371">Das Framework überprüft, ob die Basis-URL ein übergeordnetes Element der aktuellen URL ist, bevor die Verbindung hergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-371">The framework checks that the base URL is a parent of the current URL before establishing the circuit.</span></span> <span data-ttu-id="cd249-372">Vom Framework werden keine weiteren Überprüfungen durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="cd249-372">No additional checks are performed by the framework.</span></span>

<span data-ttu-id="cd249-373">Wenn ein Benutzer einen Link auf dem Client auswählt, wird die URL für den Link an den Server gesendet, der bestimmt, welche Aktion ausgeführt werden soll.</span><span class="sxs-lookup"><span data-stu-id="cd249-373">When a user selects a link on the client, the URL for the link is sent to the server, which determines what action to take.</span></span> <span data-ttu-id="cd249-374">Die APP kann z. b. eine Client seitige Navigation ausführen oder im Browser angeben, dass Sie zum neuen Speicherort wechseln soll.</span><span class="sxs-lookup"><span data-stu-id="cd249-374">For example, the app may perform a client-side navigation or indicate to the browser to go to the new location.</span></span>

<span data-ttu-id="cd249-375">Komponenten können Navigationsanforderungen auch Programm gesteuert durch die Verwendung von `NavigationManager`auslöst.</span><span class="sxs-lookup"><span data-stu-id="cd249-375">Components can also trigger navigation requests programatically through the use of `NavigationManager`.</span></span> <span data-ttu-id="cd249-376">In solchen Szenarien führt die APP möglicherweise eine Client seitige Navigation aus oder zeigt dem Browser an, dass Sie zum neuen Speicherort wechseln soll.</span><span class="sxs-lookup"><span data-stu-id="cd249-376">In such scenarios, the app might perform a client-side navigation or indicate to the browser to go to the new location.</span></span>

<span data-ttu-id="cd249-377">Komponenten müssen Folgendes ausführen:</span><span class="sxs-lookup"><span data-stu-id="cd249-377">Components must:</span></span>

* <span data-ttu-id="cd249-378">Vermeiden Sie die Verwendung von Benutzereingaben als Teil der navigationcallgumente.</span><span class="sxs-lookup"><span data-stu-id="cd249-378">Avoid using user input as part of the navigation call arguments.</span></span>
* <span data-ttu-id="cd249-379">Überprüfen Sie die Argumente, um sicherzustellen, dass das Ziel von der APP zugelassen wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-379">Validate arguments to ensure that the target is allowed by the app.</span></span>

<span data-ttu-id="cd249-380">Andernfalls kann ein böswilliger Benutzer erzwingen, dass der Browser an eine von Angreifern gesteuerte Website weitergeleitet wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-380">Otherwise, a malicious user can force the browser to go to an attacker-controlled site.</span></span> <span data-ttu-id="cd249-381">In diesem Szenario gibt der Angreifer einen Trick für die APP aus, um einige Benutzereingaben als Teil des auffalls der `NavigationManager.Navigate`-Methode zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="cd249-381">In this scenario, the attacker tricks the app into using some user input as part of the invocation of the `NavigationManager.Navigate` method.</span></span>

<span data-ttu-id="cd249-382">Diese Empfehlung gilt auch für das Rendern von Verknüpfungen als Teil der APP:</span><span class="sxs-lookup"><span data-stu-id="cd249-382">This advice also applies when rendering links as part of the app:</span></span>

* <span data-ttu-id="cd249-383">Verwenden Sie nach Möglichkeit relative Links.</span><span class="sxs-lookup"><span data-stu-id="cd249-383">If possible, use relative links.</span></span>
* <span data-ttu-id="cd249-384">Überprüfen Sie, ob absolute Linkziele gültig sind, bevor Sie Sie in eine Seite einschließen.</span><span class="sxs-lookup"><span data-stu-id="cd249-384">Validate that absolute link destinations are valid before including them in a page.</span></span>

<span data-ttu-id="cd249-385">Weitere Informationen finden Sie unter <xref:security/preventing-open-redirects>.</span><span class="sxs-lookup"><span data-stu-id="cd249-385">For more information, see <xref:security/preventing-open-redirects>.</span></span>

## <a name="authentication-and-authorization"></a><span data-ttu-id="cd249-386">Authentifizierung und Autorisierung</span><span class="sxs-lookup"><span data-stu-id="cd249-386">Authentication and authorization</span></span>

<span data-ttu-id="cd249-387">Anleitungen zur Authentifizierung und Autorisierung finden Sie unter <xref:security/blazor/index>.</span><span class="sxs-lookup"><span data-stu-id="cd249-387">For guidance on authentication and authorization, see <xref:security/blazor/index>.</span></span>

## <a name="security-checklist"></a><span data-ttu-id="cd249-388">Sicherheits Checkliste</span><span class="sxs-lookup"><span data-stu-id="cd249-388">Security checklist</span></span>

<span data-ttu-id="cd249-389">Die folgende Liste mit Sicherheitsüberlegungen ist nicht umfassend:</span><span class="sxs-lookup"><span data-stu-id="cd249-389">The following list of security considerations isn't comprehensive:</span></span>

* <span data-ttu-id="cd249-390">Überprüfen Sie die Argumente von Ereignissen.</span><span class="sxs-lookup"><span data-stu-id="cd249-390">Validate arguments from events.</span></span>
* <span data-ttu-id="cd249-391">Überprüfen von Eingaben und Ergebnissen aus js-Interop-aufrufen.</span><span class="sxs-lookup"><span data-stu-id="cd249-391">Validate inputs and results from JS interop calls.</span></span>
* <span data-ttu-id="cd249-392">Vermeiden Sie die Verwendung der Benutzereingaben für .net-und JS-Interop-Aufrufe (oder überprüfen Sie vorher)</span><span class="sxs-lookup"><span data-stu-id="cd249-392">Avoid using (or validate beforehand) user input for .NET to JS interop calls.</span></span>
* <span data-ttu-id="cd249-393">Verhindern, dass der Client eine nicht gebundene Arbeitsspeicher Menge zuordnet.</span><span class="sxs-lookup"><span data-stu-id="cd249-393">Prevent the client from allocating an unbound amount of memory.</span></span>
  * <span data-ttu-id="cd249-394">Daten innerhalb der Komponente.</span><span class="sxs-lookup"><span data-stu-id="cd249-394">Data within the component.</span></span>
  * <span data-ttu-id="cd249-395">`DotNetObject` Verweise, die an den Client zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="cd249-395">`DotNetObject` references returned to the client.</span></span>
* <span data-ttu-id="cd249-396">Schutz vor mehreren Dispatches.</span><span class="sxs-lookup"><span data-stu-id="cd249-396">Guard against multiple dispatches.</span></span>
* <span data-ttu-id="cd249-397">Abbrechen von Vorgängen mit langer Ausführungszeit, wenn die Komponente verworfen wird.</span><span class="sxs-lookup"><span data-stu-id="cd249-397">Cancel long-running operations when the component is disposed.</span></span>
* <span data-ttu-id="cd249-398">Vermeiden Sie Ereignisse, die große Datenmengen verursachen.</span><span class="sxs-lookup"><span data-stu-id="cd249-398">Avoid events that produce large amounts of data.</span></span>
* <span data-ttu-id="cd249-399">Vermeiden Sie die Verwendung von Benutzereingaben als Teil von Aufrufen von `NavigationManager.Navigate`, und überprüfen Sie Benutzereingaben für URLs mit einem Satz zulässiger Ursprünge zuerst, wenn dies unvermeidlich ist.</span><span class="sxs-lookup"><span data-stu-id="cd249-399">Avoid using user input as part of calls to `NavigationManager.Navigate` and validate user input for URLs against a set of allowed origins first if unavoidable.</span></span>
* <span data-ttu-id="cd249-400">Treffen Sie keine Autorisierungs Entscheidungen auf Grundlage des Status der Benutzeroberfläche, sondern nur aus dem Komponenten Zustand.</span><span class="sxs-lookup"><span data-stu-id="cd249-400">Don't make authorization decisions based on the state of the UI but only from component state.</span></span>
* <span data-ttu-id="cd249-401">Verwenden Sie die [Inhalts Sicherheitsrichtlinie (Content Security Policy, CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) zum Schutz vor XSS-Angriffen.</span><span class="sxs-lookup"><span data-stu-id="cd249-401">Consider using [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) to protect against XSS attacks.</span></span>
* <span data-ttu-id="cd249-402">Verwenden Sie ggf. CSP und [X-Frame-Optionen](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options) zum Schutz vor Click-Jacking.</span><span class="sxs-lookup"><span data-stu-id="cd249-402">Consider using CSP and [X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options) to protect against click-jacking.</span></span>
* <span data-ttu-id="cd249-403">Stellen Sie sicher, dass cors-Einstellungen geeignet sind, wenn Sie cors aktivieren oder cors für Blazor-apps explizit deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="cd249-403">Ensure CORS settings are appropriate when enabling CORS or explicitly disable CORS for Blazor apps.</span></span>
* <span data-ttu-id="cd249-404">Testen Sie, um sicherzustellen, dass die serverseitigen Grenzwerte für die Blazor-App eine akzeptable Benutzer Leistung ohne akzeptable Risikostufen bieten.</span><span class="sxs-lookup"><span data-stu-id="cd249-404">Test to ensure that the server-side limits for the Blazor app provide an acceptable user experience without unacceptable levels of risk.</span></span>
