---
title: Hosten von ASP.NET Core unter Windows mit IIS
author: guardrex
description: Erfahren Sie, wie ASP.NET Core-Apps in Windows Server Internet Information Services (IIS) gehostet werden.
monikerRange: '>= aspnetcore-2.1'
ms.author: riande
ms.custom: mvc
ms.date: 01/13/2020
uid: host-and-deploy/iis/index
ms.openlocfilehash: bf035bc65f0f120f52e55effe4d413bfecdf735d
ms.sourcegitcommit: 2388c2a7334ce66b6be3ffbab06dd7923df18f60
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/14/2020
ms.locfileid: "75952081"
---
# <a name="host-aspnet-core-on-windows-with-iis"></a><span data-ttu-id="940df-103">Hosten von ASP.NET Core unter Windows mit IIS</span><span class="sxs-lookup"><span data-stu-id="940df-103">Host ASP.NET Core on Windows with IIS</span></span>

<span data-ttu-id="940df-104">Von [Luke Latham](https://github.com/guardrex)</span><span class="sxs-lookup"><span data-stu-id="940df-104">By [Luke Latham](https://github.com/guardrex)</span></span>

<span data-ttu-id="940df-105">Ein Tutorial zum Veröffentlichen einer ASP.NET Core-App auf einem IIS-Server finden Sie unter <xref:tutorials/publish-to-iis>.</span><span class="sxs-lookup"><span data-stu-id="940df-105">For a tutorial experience on publishing an ASP.NET Core app to an IIS server, see <xref:tutorials/publish-to-iis>.</span></span>

[<span data-ttu-id="940df-106">Installieren des .NET Core Hosting-Pakets</span><span class="sxs-lookup"><span data-stu-id="940df-106">Install the .NET Core Hosting Bundle</span></span>](#install-the-net-core-hosting-bundle)

## <a name="supported-operating-systems"></a><span data-ttu-id="940df-107">Unterstützte Betriebssysteme</span><span class="sxs-lookup"><span data-stu-id="940df-107">Supported operating systems</span></span>

<span data-ttu-id="940df-108">Die folgenden Betriebssysteme werden unterstützt:</span><span class="sxs-lookup"><span data-stu-id="940df-108">The following operating systems are supported:</span></span>

* <span data-ttu-id="940df-109">Windows 7 oder höher</span><span class="sxs-lookup"><span data-stu-id="940df-109">Windows 7 or later</span></span>
* <span data-ttu-id="940df-110">Windows Server 2008 R2 oder höher</span><span class="sxs-lookup"><span data-stu-id="940df-110">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="940df-111">Der [HTTP.sys-Server](xref:fundamentals/servers/httpsys) (zuvor WebListener genannt) funktioniert nicht in einer Reverseproxykonfiguration mit IIS.</span><span class="sxs-lookup"><span data-stu-id="940df-111">[HTTP.sys server](xref:fundamentals/servers/httpsys) (formerly called WebListener) doesn't work in a reverse proxy configuration with IIS.</span></span> <span data-ttu-id="940df-112">Verwenden Sie den [Kestrel-Server](xref:fundamentals/servers/kestrel).</span><span class="sxs-lookup"><span data-stu-id="940df-112">Use the [Kestrel server](xref:fundamentals/servers/kestrel).</span></span>

<span data-ttu-id="940df-113">Weitere Informationen zum Hosten in Azure finden Sie unter <xref:host-and-deploy/azure-apps/index>.</span><span class="sxs-lookup"><span data-stu-id="940df-113">For information on hosting in Azure, see <xref:host-and-deploy/azure-apps/index>.</span></span>

<span data-ttu-id="940df-114">Anleitungen zur Problembehandlung finden Sie unter <xref:test/troubleshoot>.</span><span class="sxs-lookup"><span data-stu-id="940df-114">For troubleshooting guidance, see <xref:test/troubleshoot>.</span></span>

## <a name="supported-platforms"></a><span data-ttu-id="940df-115">Unterstützte Plattformen</span><span class="sxs-lookup"><span data-stu-id="940df-115">Supported platforms</span></span>

<span data-ttu-id="940df-116">Apps, die für Bereitstellungen für 32-Bit-Systeme (x86) oder 64-Bit-Systeme (x64) veröffentlicht wurden, werden unterstützt.</span><span class="sxs-lookup"><span data-stu-id="940df-116">Apps published for 32-bit (x86) or 64-bit (x64) deployment are supported.</span></span> <span data-ttu-id="940df-117">Stellen Sie eine 32-Bit-App mit einem .NET Core SDK für 32-Bit (x86) bereit, es sei denn:</span><span class="sxs-lookup"><span data-stu-id="940df-117">Deploy a 32-bit app with a 32-bit (x86) .NET Core SDK unless the app:</span></span>

* <span data-ttu-id="940df-118">Die App benötigt den größeren Adressraum des virtuellen Arbeitsspeichers, der 64-Bit-Apps zur Verfügung steht.</span><span class="sxs-lookup"><span data-stu-id="940df-118">Requires the larger virtual memory address space available to a 64-bit app.</span></span>
* <span data-ttu-id="940df-119">Die App erfordert den größeren IIS-Stapel.</span><span class="sxs-lookup"><span data-stu-id="940df-119">Requires the larger IIS stack size.</span></span>
* <span data-ttu-id="940df-120">Die App weist native 64-Bit-Abhängigkeiten auf.</span><span class="sxs-lookup"><span data-stu-id="940df-120">Has 64-bit native dependencies.</span></span>

<span data-ttu-id="940df-121">Verwenden Sie ein .NET Core SDK für 64-Bit (x64), um eine 64-Bit-App zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="940df-121">Use a 64-bit (x64) .NET Core SDK to publish a 64-bit app.</span></span> <span data-ttu-id="940df-122">Auf dem Hostsystem muss eine 64-Bit-Runtime vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="940df-122">A 64-bit runtime must be present on the host system.</span></span>

::: moniker range=">= aspnetcore-2.2"

## <a name="hosting-models"></a><span data-ttu-id="940df-123">Hostingmodelle</span><span class="sxs-lookup"><span data-stu-id="940df-123">Hosting models</span></span>

### <a name="in-process-hosting-model"></a><span data-ttu-id="940df-124">In-Process-Hostingmodell</span><span class="sxs-lookup"><span data-stu-id="940df-124">In-process hosting model</span></span>

<span data-ttu-id="940df-125">Beim Einsatz von In-Process-Hosting wird eine ASP.NET Core-App im gleichen Prozess wie ihr IIS-Arbeitsprozess ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="940df-125">Using in-process hosting, an ASP.NET Core app runs in the same process as its IIS worker process.</span></span> <span data-ttu-id="940df-126">Durch das In-Process-Hosting wird die Leistung des Out-of-Process-Hosting verbessert, da Anforderungen nicht per Proxy über den Loopbackadapter weitergeleitet werden. Dabei handelt es sich um eine Netzwerkschnittstelle, die ausgehenden Netzwerkdatenverkehr zum selben Computer zurück leitet.</span><span class="sxs-lookup"><span data-stu-id="940df-126">In-process hosting provides improved performance over out-of-process hosting because requests aren't proxied over the loopback adapter, a network interface that returns outgoing network traffic back to the same machine.</span></span> <span data-ttu-id="940df-127">IIS erledigt das Prozessmanagement mit dem [Windows-Prozessaktivierungsdienst (Process Activation Service, WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span><span class="sxs-lookup"><span data-stu-id="940df-127">IIS handles process management with the [Windows Process Activation Service (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span></span>

<span data-ttu-id="940df-128">Das [ASP.NET Core-Modul](xref:host-and-deploy/aspnet-core-module):</span><span class="sxs-lookup"><span data-stu-id="940df-128">The [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module):</span></span>

* <span data-ttu-id="940df-129">Führt die Initialisierung von Apps aus.</span><span class="sxs-lookup"><span data-stu-id="940df-129">Performs app initialization.</span></span>
  * <span data-ttu-id="940df-130">Lädt die [CoreCLR](/dotnet/standard/glossary#coreclr).</span><span class="sxs-lookup"><span data-stu-id="940df-130">Loads the [CoreCLR](/dotnet/standard/glossary#coreclr).</span></span>
  * <span data-ttu-id="940df-131">Ruft `Program.Main`.</span><span class="sxs-lookup"><span data-stu-id="940df-131">Calls `Program.Main`.</span></span>
* <span data-ttu-id="940df-132">Behandelt die Lebensdauer der nativen IIS-Anforderung.</span><span class="sxs-lookup"><span data-stu-id="940df-132">Handles the lifetime of the IIS native request.</span></span>

<span data-ttu-id="940df-133">Das In-Process-Hostingmodell wird nicht für ASP.NET Core-Apps unterstützt, die auf .NET Framework abzielen.</span><span class="sxs-lookup"><span data-stu-id="940df-133">The in-process hosting model isn't supported for ASP.NET Core apps that target the .NET Framework.</span></span>

<span data-ttu-id="940df-134">Das folgende Diagramm zeigt die Beziehung zwischen IIS, dem ASP.NET Core-Modul und einer In-Process gehosteten App:</span><span class="sxs-lookup"><span data-stu-id="940df-134">The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted in-process:</span></span>

![Das ASP.NET Core-Modul im In-Process-Hostingszenario](index/_static/ancm-inprocess.png)

<span data-ttu-id="940df-136">Eine Anforderung geht aus dem Web beim HTTP.sys-Treiber im Kernelmodus ein.</span><span class="sxs-lookup"><span data-stu-id="940df-136">A request arrives from the web to the kernel-mode HTTP.sys driver.</span></span> <span data-ttu-id="940df-137">Der Treiber leitet die native Anforderung an IIS auf dem konfigurierten Port der Webseite weiter, normalerweise 80 (HTTP) oder 443 (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="940df-137">The driver routes the native request to IIS on the website's configured port, usually 80 (HTTP) or 443 (HTTPS).</span></span> <span data-ttu-id="940df-138">Das ASP.NET Core-Modul empfängt die native Anforderung und übergibt sie an den IIS-HTTP-Server (`IISHttpServer`).</span><span class="sxs-lookup"><span data-stu-id="940df-138">The ASP.NET Core Module receives the native request and passes it to IIS HTTP Server (`IISHttpServer`).</span></span> <span data-ttu-id="940df-139">Der IIS-HTTP-Server ist eine prozessinterne Serverimplementierung für IIS, die die Anforderung vom nativen Modus in den verwalteten Modus konvertiert.</span><span class="sxs-lookup"><span data-stu-id="940df-139">IIS HTTP Server is an in-process server implementation for IIS that converts the request from native to managed.</span></span>

<span data-ttu-id="940df-140">Nachdem der IIS-HTTP-Server die Anforderung verarbeitet hat, wird die Anforderung per Push an die Middlewarepipeline von ASP.NET Core übertragen.</span><span class="sxs-lookup"><span data-stu-id="940df-140">After the IIS HTTP Server processes the request, the request is pushed into the ASP.NET Core middleware pipeline.</span></span> <span data-ttu-id="940df-141">Die Middleware-Pipeline behandelt die Anforderung und gibt sie als `HttpContext`-Instanz an die App-Logik weiter.</span><span class="sxs-lookup"><span data-stu-id="940df-141">The middleware pipeline handles the request and passes it on as an `HttpContext` instance to the app's logic.</span></span> <span data-ttu-id="940df-142">Die Antwort der App wird über den IIS-HTTP-Server zurück an IIS übergeben.</span><span class="sxs-lookup"><span data-stu-id="940df-142">The app's response is passed back to IIS through IIS HTTP Server.</span></span> <span data-ttu-id="940df-143">IIS übermittelt die Antwort an den Client, der die Anforderung initiiert hat.</span><span class="sxs-lookup"><span data-stu-id="940df-143">IIS sends the response to the client that initiated the request.</span></span>

<span data-ttu-id="940df-144">In-Process-Hosting ist eine wählbare Option für vorhandene Apps. Die [dotnet new](/dotnet/core/tools/dotnet-new)-Vorlagen sehen das In-Process-Hostingmodell aber als Standard für alle IIS- und IIS Express-Szenarios vor.</span><span class="sxs-lookup"><span data-stu-id="940df-144">In-process hosting is opt-in for existing apps, but [dotnet new](/dotnet/core/tools/dotnet-new) templates default to the in-process hosting model for all IIS and IIS Express scenarios.</span></span>

<span data-ttu-id="940df-145">`CreateDefaultBuilder` fügt eine <xref:Microsoft.AspNetCore.Hosting.Server.IServer>-Instanz hinzu, indem die <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIIS*>-Methode aufgerufen wird, um die [CoreCLR](/dotnet/standard/glossary#coreclr) zu starten und die App im IIS-Workerprozess zu hosten (*w3wp.exe* oder *iisexpress.exe*).</span><span class="sxs-lookup"><span data-stu-id="940df-145">`CreateDefaultBuilder` adds an <xref:Microsoft.AspNetCore.Hosting.Server.IServer> instance by calling the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIIS*> method to boot the [CoreCLR](/dotnet/standard/glossary#coreclr) and host the app inside of the IIS worker process (*w3wp.exe* or *iisexpress.exe*).</span></span> <span data-ttu-id="940df-146">Leistungstests weisen darauf hin, dass das In-Process-Hosting einer .NET Core-App einen weitaus höheren Anforderungsdurchsatz im Vergleich zum Out-of-Process-Hosting der App mit Weiterleitung der Anforderungen über einen Proxy an [Kestrel](xref:fundamentals/servers/kestrel) Server bietet.</span><span class="sxs-lookup"><span data-stu-id="940df-146">Performance tests indicate that hosting a .NET Core app in-process delivers significantly higher request throughput compared to hosting the app out-of-process and proxying requests to [Kestrel](xref:fundamentals/servers/kestrel) server.</span></span>

::: moniker-end

::: moniker range=">= aspnetcore-3.0"

> [!NOTE]
> <span data-ttu-id="940df-147">Apps, die als einzelne ausführbare Datei veröffentlicht wurden, können vom In-Prozess-Hostingmodell nicht geladen werden.</span><span class="sxs-lookup"><span data-stu-id="940df-147">Apps published as a single file executable can't be loaded by the in-process hosting model.</span></span>

::: moniker-end

::: moniker range=">= aspnetcore-2.2"

### <a name="out-of-process-hosting-model"></a><span data-ttu-id="940df-148">Out-of-Process-Hostingmodell</span><span class="sxs-lookup"><span data-stu-id="940df-148">Out-of-process hosting model</span></span>

<span data-ttu-id="940df-149">Da ASP.NET Core-Apps in einem Prozess getrennt vom IIS-Arbeitsprozess ausgeführt werden, führt das ASP.NET Core-Modul die Prozessverwaltung durch.</span><span class="sxs-lookup"><span data-stu-id="940df-149">Because ASP.NET Core apps run in a process separate from the IIS worker process, the ASP.NET Core Module handles process management.</span></span> <span data-ttu-id="940df-150">Das Modul startet den Prozess für die ASP.NET Core-App, wenn die erste Anforderung eingeht und startet die App neu, wenn sie heruntergefahren wird oder abstürzt.</span><span class="sxs-lookup"><span data-stu-id="940df-150">The module starts the process for the ASP.NET Core app when the first request arrives and restarts the app if it shuts down or crashes.</span></span> <span data-ttu-id="940df-151">Dies ist im Prinzip das gleiche Verhalten wie bei Apps, die prozessintern ausgeführt und durch den [Windows-Prozessaktivierungsdienst (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was) verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="940df-151">This is essentially the same behavior as seen with apps that run in-process that are managed by the [Windows Process Activation Service (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span></span>

<span data-ttu-id="940df-152">Das folgende Diagramm zeigt die Beziehung zwischen IIS, dem ASP.NET Core-Modul und einer Out-of-Process gehosteten App:</span><span class="sxs-lookup"><span data-stu-id="940df-152">The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted out-of-process:</span></span>

![Das ASP.NET Core-Modul im Out-of-Process-Hostingszenario](index/_static/ancm-outofprocess.png)

<span data-ttu-id="940df-154">Anforderungen gehen aus dem Internet an den Treiber „HTTP.sys“ ein, der im Kernelmodus betrieben wird.</span><span class="sxs-lookup"><span data-stu-id="940df-154">Requests arrive from the web to the kernel-mode HTTP.sys driver.</span></span> <span data-ttu-id="940df-155">Der Treiber leitet die Anforderungen an IIS auf dem konfigurierten Port der Webseite weiter, normalerweise 80 (HTTP) oder 443 (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="940df-155">The driver routes the requests to IIS on the website's configured port, usually 80 (HTTP) or 443 (HTTPS).</span></span> <span data-ttu-id="940df-156">Das Modul leitet die Anforderung an Kestrel auf einem zufälligen Port der App weiter, der nicht Port 80 oder 443 entspricht.</span><span class="sxs-lookup"><span data-stu-id="940df-156">The module forwards the requests to Kestrel on a random port for the app, which isn't port 80 or 443.</span></span>

<span data-ttu-id="940df-157">Das Modul gibt den Port über die Umgebungsvariable beim Start an. Die <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIISIntegration*>-Erweiterung konfiguriert den Server so, dass er auf `http://localhost:{PORT}` lauscht.</span><span class="sxs-lookup"><span data-stu-id="940df-157">The module specifies the port via an environment variable at startup, and the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIISIntegration*> extension configures the server to listen on `http://localhost:{PORT}`.</span></span> <span data-ttu-id="940df-158">Zusätzliche Überprüfungen werden durchgeführt. Anforderungen, die nicht vom Modul stammen, werden abgelehnt.</span><span class="sxs-lookup"><span data-stu-id="940df-158">Additional checks are performed, and requests that don't originate from the module are rejected.</span></span> <span data-ttu-id="940df-159">Das Modul unterstützt die HTTPS-Weiterleitung nicht. Deshalb werden Anforderungen über HTTP weitergeleitet, selbst wenn sie von IIS über HTTPS empfangen wurden.</span><span class="sxs-lookup"><span data-stu-id="940df-159">The module doesn't support HTTPS forwarding, so requests are forwarded over HTTP even if received by IIS over HTTPS.</span></span>

<span data-ttu-id="940df-160">Nachdem Kestrel die Anforderung vom Modul erhalten hat, wird die Anforderung in die Middleware-Pipeline von ASP.NET Core eingestellt.</span><span class="sxs-lookup"><span data-stu-id="940df-160">After Kestrel picks up the request from the module, the request is pushed into the ASP.NET Core middleware pipeline.</span></span> <span data-ttu-id="940df-161">Die Middleware-Pipeline behandelt die Anforderung und gibt sie als `HttpContext`-Instanz an die App-Logik weiter.</span><span class="sxs-lookup"><span data-stu-id="940df-161">The middleware pipeline handles the request and passes it on as an `HttpContext` instance to the app's logic.</span></span> <span data-ttu-id="940df-162">Die durch IIS-Integration hinzugefügte Middleware aktualisiert das Schema, die Remote-IP und die Pfadbasis, um der Weiterleitung der Anforderung an Kestrel Rechnung zu tragen.</span><span class="sxs-lookup"><span data-stu-id="940df-162">Middleware added by IIS Integration updates the scheme, remote IP, and pathbase to account for forwarding the request to Kestrel.</span></span> <span data-ttu-id="940df-163">Die Antwort der App wird dann an IIS zurückgegeben, wo sie per Push an den HTTP-Client zurückgegeben wird, der die Anforderung initiiert hat.</span><span class="sxs-lookup"><span data-stu-id="940df-163">The app's response is passed back to IIS, which pushes it back out to the HTTP client that initiated the request.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="940df-164">ASP.NET Core wird mit [Kestrel Server](xref:fundamentals/servers/kestrel) ausgeliefert, einem plattformübergreifenden HTTP-Standardserver.</span><span class="sxs-lookup"><span data-stu-id="940df-164">ASP.NET Core ships with [Kestrel server](xref:fundamentals/servers/kestrel), a default, cross-platform HTTP server.</span></span>

<span data-ttu-id="940df-165">Wenn Sie [IIS](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture) oder [IIS Express](/iis/extensions/introduction-to-iis-express/iis-express-overview) verwenden, wird die App in einem anderen Prozess als im IIS-Workerprozess (*Out-of-Process*) mit dem [Kestrel-Server](xref:fundamentals/servers/index#kestrel) ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="940df-165">When using [IIS](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture) or [IIS Express](/iis/extensions/introduction-to-iis-express/iis-express-overview), the app runs in a process separate from the IIS worker process (*out-of-process*) with the [Kestrel server](xref:fundamentals/servers/index#kestrel).</span></span>

<span data-ttu-id="940df-166">Da ASP.NET Core-Apps in einem Prozess getrennt vom IIS-Arbeitsprozess ausgeführt werden, führt das Modul die Prozessverwaltung durch.</span><span class="sxs-lookup"><span data-stu-id="940df-166">Because ASP.NET Core apps run in a process separate from the IIS worker process, the module handles process management.</span></span> <span data-ttu-id="940df-167">Das Modul startet den Prozess für die ASP.NET Core-App, wenn die erste Anforderung eingeht und startet die App neu, wenn sie heruntergefahren wird oder abstürzt.</span><span class="sxs-lookup"><span data-stu-id="940df-167">The module starts the process for the ASP.NET Core app when the first request arrives and restarts the app if it shuts down or crashes.</span></span> <span data-ttu-id="940df-168">Dies ist im Prinzip das gleiche Verhalten wie bei Apps, die prozessintern ausgeführt und durch den [Windows-Prozessaktivierungsdienst (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was) verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="940df-168">This is essentially the same behavior as seen with apps that run in-process that are managed by the [Windows Process Activation Service (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span></span>

<span data-ttu-id="940df-169">Das folgende Diagramm zeigt die Beziehung zwischen IIS, dem ASP.NET Core-Modul und einer Out-of-Process gehosteten App:</span><span class="sxs-lookup"><span data-stu-id="940df-169">The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted out-of-process:</span></span>

![ASP.NET Core-Modul](index/_static/ancm-outofprocess.png)

<span data-ttu-id="940df-171">Anforderungen gehen aus dem Internet an den Treiber „HTTP.sys“ ein, der im Kernelmodus betrieben wird.</span><span class="sxs-lookup"><span data-stu-id="940df-171">Requests arrive from the web to the kernel-mode HTTP.sys driver.</span></span> <span data-ttu-id="940df-172">Der Treiber leitet die Anforderungen an IIS auf dem konfigurierten Port der Webseite weiter, normalerweise 80 (HTTP) oder 443 (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="940df-172">The driver routes the requests to IIS on the website's configured port, usually 80 (HTTP) or 443 (HTTPS).</span></span> <span data-ttu-id="940df-173">Das Modul leitet die Anforderung an Kestrel auf einem zufälligen Port der App weiter, der nicht Port 80 oder 443 entspricht.</span><span class="sxs-lookup"><span data-stu-id="940df-173">The module forwards the requests to Kestrel on a random port for the app, which isn't port 80 or 443.</span></span>

<span data-ttu-id="940df-174">Das Modul gibt den Port über die Umgebungsvariable beim Start an. Die [Middleware für die Integration von IIS](xref:host-and-deploy/iis/index#enable-the-iisintegration-components) konfiguriert den Server so, dass er auf `http://localhost:{port}` lauscht.</span><span class="sxs-lookup"><span data-stu-id="940df-174">The module specifies the port via an environment variable at startup, and the [IIS Integration Middleware](xref:host-and-deploy/iis/index#enable-the-iisintegration-components) configures the server to listen on `http://localhost:{port}`.</span></span> <span data-ttu-id="940df-175">Zusätzliche Überprüfungen werden durchgeführt. Anforderungen, die nicht vom Modul stammen, werden abgelehnt.</span><span class="sxs-lookup"><span data-stu-id="940df-175">Additional checks are performed, and requests that don't originate from the module are rejected.</span></span> <span data-ttu-id="940df-176">Das Modul unterstützt die HTTPS-Weiterleitung nicht. Deshalb werden Anforderungen über HTTP weitergeleitet, selbst wenn sie von IIS über HTTPS empfangen wurden.</span><span class="sxs-lookup"><span data-stu-id="940df-176">The module doesn't support HTTPS forwarding, so requests are forwarded over HTTP even if received by IIS over HTTPS.</span></span>

<span data-ttu-id="940df-177">Nachdem Kestrel die Anforderung vom Modul erhalten hat, wird die Anforderung in die Middleware-Pipeline von ASP.NET Core eingestellt.</span><span class="sxs-lookup"><span data-stu-id="940df-177">After Kestrel picks up the request from the module, the request is pushed into the ASP.NET Core middleware pipeline.</span></span> <span data-ttu-id="940df-178">Die Middleware-Pipeline behandelt die Anforderung und gibt sie als `HttpContext`-Instanz an die App-Logik weiter.</span><span class="sxs-lookup"><span data-stu-id="940df-178">The middleware pipeline handles the request and passes it on as an `HttpContext` instance to the app's logic.</span></span> <span data-ttu-id="940df-179">Die durch IIS-Integration hinzugefügte Middleware aktualisiert das Schema, die Remote-IP und die Pfadbasis, um der Weiterleitung der Anforderung an Kestrel Rechnung zu tragen.</span><span class="sxs-lookup"><span data-stu-id="940df-179">Middleware added by IIS Integration updates the scheme, remote IP, and pathbase to account for forwarding the request to Kestrel.</span></span> <span data-ttu-id="940df-180">Die Antwort der App wird dann an IIS zurückgegeben, wo sie per Push an den HTTP-Client zurückgegeben wird, der die Anforderung initiiert hat.</span><span class="sxs-lookup"><span data-stu-id="940df-180">The app's response is passed back to IIS, which pushes it back out to the HTTP client that initiated the request.</span></span>

<span data-ttu-id="940df-181">`CreateDefaultBuilder` konfiguriert [Kestrel](xref:fundamentals/servers/kestrel) Server als Webserver und aktiviert die IIS-Integration durch Konfigurierung des Basispfads und Ports für das [ASP.NET Core-Modul](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="940df-181">`CreateDefaultBuilder` configures [Kestrel](xref:fundamentals/servers/kestrel) server as the web server and enables IIS Integration by configuring the base path and port for the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span></span>

<span data-ttu-id="940df-182">Das ASP.NET Core-Modul generiert einen dynamischen Port, der dem Back-End-Prozess zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="940df-182">The ASP.NET Core Module generates a dynamic port to assign to the backend process.</span></span> <span data-ttu-id="940df-183">`CreateDefaultBuilder` ruft die <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIISIntegration*>-Methode auf.</span><span class="sxs-lookup"><span data-stu-id="940df-183">`CreateDefaultBuilder` calls the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIISIntegration*> method.</span></span> <span data-ttu-id="940df-184">`UseIISIntegration` konfiguriert Kestrel so, dass an dem dynamischen Port an der Localhost-IP-Adresse (`127.0.0.1`) gelauscht wird.</span><span class="sxs-lookup"><span data-stu-id="940df-184">`UseIISIntegration` configures Kestrel to listen on the dynamic port at the localhost IP address (`127.0.0.1`).</span></span> <span data-ttu-id="940df-185">Wenn der dynamische Port 1234 ist, lauscht Kestrel an `127.0.0.1:1234`.</span><span class="sxs-lookup"><span data-stu-id="940df-185">If the dynamic port is 1234, Kestrel listens at `127.0.0.1:1234`.</span></span> <span data-ttu-id="940df-186">Diese Konfiguration ersetzt andere Konfigurationen von:</span><span class="sxs-lookup"><span data-stu-id="940df-186">This configuration replaces other URL configurations provided by:</span></span>

* `UseUrls`
* [<span data-ttu-id="940df-187">der Listen-API von Kestrel</span><span class="sxs-lookup"><span data-stu-id="940df-187">Kestrel's Listen API</span></span>](xref:fundamentals/servers/kestrel#endpoint-configuration)
* <span data-ttu-id="940df-188">der [Konfiguration](xref:fundamentals/configuration/index) (oder [der Befehlszeilenoption „--urls](xref:fundamentals/host/web-host#override-configuration))</span><span class="sxs-lookup"><span data-stu-id="940df-188">[Configuration](xref:fundamentals/configuration/index) (or [command-line --urls option](xref:fundamentals/host/web-host#override-configuration))</span></span>

<span data-ttu-id="940df-189">Aufrufe von `UseUrls` oder der `Listen`-API von Kestrel sind nicht erforderlich, wenn das Modul verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="940df-189">Calls to `UseUrls` or Kestrel's `Listen` API aren't required when using the module.</span></span> <span data-ttu-id="940df-190">Wenn `UseUrls` oder `Listen` aufgerufen wird, lauscht Kestrel an dem Port, der bei der bei Ausführung der App ohne den IIS angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="940df-190">If `UseUrls` or `Listen` is called, Kestrel listens on the port specified only when running the app without IIS.</span></span>

::: moniker-end

<span data-ttu-id="940df-191">Einen Konfigurationsleitfaden für das ASP.NET Core-Modul finden Sie unter <xref:host-and-deploy/aspnet-core-module>.</span><span class="sxs-lookup"><span data-stu-id="940df-191">For ASP.NET Core Module configuration guidance, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

<span data-ttu-id="940df-192">Weitere Informationen zum Hosten finden Sie unter [Hosten in ASP.NET Core](xref:fundamentals/index#host).</span><span class="sxs-lookup"><span data-stu-id="940df-192">For more information on hosting, see [Host in ASP.NET Core](xref:fundamentals/index#host).</span></span>

## <a name="application-configuration"></a><span data-ttu-id="940df-193">Anwendungskonfiguration</span><span class="sxs-lookup"><span data-stu-id="940df-193">Application configuration</span></span>

### <a name="enable-the-iisintegration-components"></a><span data-ttu-id="940df-194">Aktivieren der IISIntegration-Komponenten</span><span class="sxs-lookup"><span data-stu-id="940df-194">Enable the IISIntegration components</span></span>

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="940df-195">Rufen Sie beim Erstellen eines Hosts in `CreateHostBuilder` (*Program.cs*) <xref:Microsoft.Extensions.Hosting.Host.CreateDefaultBuilder*> ab, um die IIS-Integration zu aktivieren:</span><span class="sxs-lookup"><span data-stu-id="940df-195">When building a host in `CreateHostBuilder` (*Program.cs*), call <xref:Microsoft.Extensions.Hosting.Host.CreateDefaultBuilder*> to enable IIS integration:</span></span>

```csharp
public static IHostBuilder CreateHostBuilder(string[] args) =>
    Host.CreateDefaultBuilder(args)
        ...
```

<span data-ttu-id="940df-196">Weitere Informationen zu `CreateDefaultBuilder` finden Sie unter <xref:fundamentals/host/generic-host#default-builder-settings>.</span><span class="sxs-lookup"><span data-stu-id="940df-196">For more information on `CreateDefaultBuilder`, see <xref:fundamentals/host/generic-host#default-builder-settings>.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-3.0"

<span data-ttu-id="940df-197">Rufen Sie beim Erstellen eines Hosts in `CreateWebHostBuilder` (*Program.cs*) <xref:Microsoft.AspNetCore.WebHost.CreateDefaultBuilder*> ab, um die IIS-Integration zu aktivieren:</span><span class="sxs-lookup"><span data-stu-id="940df-197">When building a host in `CreateWebHostBuilder` (*Program.cs*), call <xref:Microsoft.AspNetCore.WebHost.CreateDefaultBuilder*> to enable IIS integration:</span></span>

```csharp
public static IWebHostBuilder CreateWebHostBuilder(string[] args) =>
    WebHost.CreateDefaultBuilder(args)
        ...
```

<span data-ttu-id="940df-198">Weitere Informationen zu `CreateDefaultBuilder` finden Sie unter <xref:fundamentals/host/web-host#set-up-a-host>.</span><span class="sxs-lookup"><span data-stu-id="940df-198">For more information on `CreateDefaultBuilder`, see <xref:fundamentals/host/web-host#set-up-a-host>.</span></span>

::: moniker-end

### <a name="iis-options"></a><span data-ttu-id="940df-199">IIS-Optionen</span><span class="sxs-lookup"><span data-stu-id="940df-199">IIS options</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="940df-200">**In-Process-Hostingmodell**</span><span class="sxs-lookup"><span data-stu-id="940df-200">**In-process hosting model**</span></span>

<span data-ttu-id="940df-201">Schließen Sie zur Konfiguration von IIS-Serveroptionen eine Dienstkonfiguration für <xref:Microsoft.AspNetCore.Builder.IISServerOptions> in <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*> ein.</span><span class="sxs-lookup"><span data-stu-id="940df-201">To configure IIS Server options, include a service configuration for <xref:Microsoft.AspNetCore.Builder.IISServerOptions> in <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>.</span></span> <span data-ttu-id="940df-202">Mit dem folgenden Beispiel wird AutomaticAuthentication deaktiviert:</span><span class="sxs-lookup"><span data-stu-id="940df-202">The following example disables AutomaticAuthentication:</span></span>

```csharp
services.Configure<IISServerOptions>(options => 
{
    options.AutomaticAuthentication = false;
});
```

::: moniker-end

::: moniker range=">= aspnetcore-3.0"

| <span data-ttu-id="940df-203">Option</span><span class="sxs-lookup"><span data-stu-id="940df-203">Option</span></span>                         | <span data-ttu-id="940df-204">Standard</span><span class="sxs-lookup"><span data-stu-id="940df-204">Default</span></span> | <span data-ttu-id="940df-205">Einstellung</span><span class="sxs-lookup"><span data-stu-id="940df-205">Setting</span></span> |
| ------------------------------ | :-----: | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="940df-206">Bei Festlegung auf `true` legt der Server den per [Windows-Authentifizierung](xref:security/authentication/windowsauth) authentifizierten `HttpContext.User` fest.</span><span class="sxs-lookup"><span data-stu-id="940df-206">If `true`, IIS Server sets the `HttpContext.User` authenticated by [Windows Authentication](xref:security/authentication/windowsauth).</span></span> <span data-ttu-id="940df-207">Bei Festlegung auf `false` stellt der Server nur eine Identität für `HttpContext.User` bereit und antwortet auf explizite Anforderungen durch `AuthenticationScheme`.</span><span class="sxs-lookup"><span data-stu-id="940df-207">If `false`, the server only provides an identity for `HttpContext.User` and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="940df-208">Die Windows-Authentifizierung muss in IIS aktiviert sein, damit `AutomaticAuthentication` funktioniert.</span><span class="sxs-lookup"><span data-stu-id="940df-208">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> <span data-ttu-id="940df-209">Weitere Informationen finden Sie unter [Windows-Authentifizierung](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="940df-209">For more information, see [Windows Authentication](xref:security/authentication/windowsauth).</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="940df-210">Legt den Anzeigename fest, der Benutzern auf Anmeldungsseiten angezeigt wird</span><span class="sxs-lookup"><span data-stu-id="940df-210">Sets the display name shown to users on login pages.</span></span> |
| `AllowSynchronousIO`           | `false` | <span data-ttu-id="940df-211">Steuert, ob eine synchrone Eingabe/Ausgabe für `HttpContext.Request` und `HttpContext.Response` zulässig ist.</span><span class="sxs-lookup"><span data-stu-id="940df-211">Whether synchronous IO is allowed for the `HttpContext.Request` and the `HttpContext.Response`.</span></span> |
| `MaxRequestBodySize`           | `30000000`  | <span data-ttu-id="940df-212">Dient zum Abrufen oder Festlegen der maximalen Größe des Anforderungstexts für `HttpRequest`.</span><span class="sxs-lookup"><span data-stu-id="940df-212">Gets or sets the max request body size for the `HttpRequest`.</span></span> <span data-ttu-id="940df-213">Beachten Sie, dass IIS selbst das Limit `maxAllowedContentLength` aufweist, das vor der in den `IISServerOptions` festgelegten `MaxRequestBodySize` verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="940df-213">Note that IIS itself has the limit `maxAllowedContentLength` which will be processed before the `MaxRequestBodySize` set in the `IISServerOptions`.</span></span> <span data-ttu-id="940df-214">Das Ändern von `MaxRequestBodySize` hat keine Auswirkungen auf `maxAllowedContentLength`.</span><span class="sxs-lookup"><span data-stu-id="940df-214">Changing the `MaxRequestBodySize` won't affect the `maxAllowedContentLength`.</span></span> <span data-ttu-id="940df-215">Zum Erhöhen von `maxAllowedContentLength` fügen Sie einen Eintrag in *web.config* hinzu, um `maxAllowedContentLength` auf einen höheren Wert festzulegen.</span><span class="sxs-lookup"><span data-stu-id="940df-215">To increase `maxAllowedContentLength`, add an entry in the *web.config* to set `maxAllowedContentLength` to a higher value.</span></span> <span data-ttu-id="940df-216">Weitere Informationen hierzu finden Sie unter [Konfiguration](/iis/configuration/system.webServer/security/requestFiltering/requestLimits/#configuration).</span><span class="sxs-lookup"><span data-stu-id="940df-216">For more details, see [Configuration](/iis/configuration/system.webServer/security/requestFiltering/requestLimits/#configuration).</span></span> |

<span data-ttu-id="940df-217">**Out-of-Process-Hostingmodell**</span><span class="sxs-lookup"><span data-stu-id="940df-217">**Out-of-process hosting model**</span></span>

::: moniker-end

::: moniker range="< aspnetcore-3.0"

| <span data-ttu-id="940df-218">Option</span><span class="sxs-lookup"><span data-stu-id="940df-218">Option</span></span>                         | <span data-ttu-id="940df-219">Standard</span><span class="sxs-lookup"><span data-stu-id="940df-219">Default</span></span> | <span data-ttu-id="940df-220">Einstellung</span><span class="sxs-lookup"><span data-stu-id="940df-220">Setting</span></span> |
| ------------------------------ | :-----: | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="940df-221">Bei Festlegung auf `true` legt der Server den per [Windows-Authentifizierung](xref:security/authentication/windowsauth) authentifizierten `HttpContext.User` fest.</span><span class="sxs-lookup"><span data-stu-id="940df-221">If `true`, IIS Server sets the `HttpContext.User` authenticated by [Windows Authentication](xref:security/authentication/windowsauth).</span></span> <span data-ttu-id="940df-222">Bei Festlegung auf `false` stellt der Server nur eine Identität für `HttpContext.User` bereit und antwortet auf explizite Anforderungen durch `AuthenticationScheme`.</span><span class="sxs-lookup"><span data-stu-id="940df-222">If `false`, the server only provides an identity for `HttpContext.User` and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="940df-223">Die Windows-Authentifizierung muss in IIS aktiviert sein, damit `AutomaticAuthentication` funktioniert.</span><span class="sxs-lookup"><span data-stu-id="940df-223">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> <span data-ttu-id="940df-224">Weitere Informationen finden Sie unter [Windows-Authentifizierung](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="940df-224">For more information, see [Windows Authentication](xref:security/authentication/windowsauth).</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="940df-225">Legt den Anzeigename fest, der Benutzern auf Anmeldungsseiten angezeigt wird</span><span class="sxs-lookup"><span data-stu-id="940df-225">Sets the display name shown to users on login pages.</span></span> |

::: moniker-end

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="940df-226">**Out-of-Process-Hostingmodell**</span><span class="sxs-lookup"><span data-stu-id="940df-226">**Out-of-process hosting model**</span></span>

::: moniker-end

<span data-ttu-id="940df-227">Schließen Sie zur Konfiguration von IIS-Optionen eine Dienstkonfiguration für <xref:Microsoft.AspNetCore.Builder.IISOptions> in <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*> ein.</span><span class="sxs-lookup"><span data-stu-id="940df-227">To configure IIS options, include a service configuration for <xref:Microsoft.AspNetCore.Builder.IISOptions> in <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>.</span></span> <span data-ttu-id="940df-228">Im folgenden Beispiel wird Verhindert, dass die App `HttpContext.Connection.ClientCertificate` auffüllt:</span><span class="sxs-lookup"><span data-stu-id="940df-228">The following example prevents the app from populating `HttpContext.Connection.ClientCertificate`:</span></span>

```csharp
services.Configure<IISOptions>(options => 
{
    options.ForwardClientCertificate = false;
});
```

| <span data-ttu-id="940df-229">Option</span><span class="sxs-lookup"><span data-stu-id="940df-229">Option</span></span>                         | <span data-ttu-id="940df-230">Standard</span><span class="sxs-lookup"><span data-stu-id="940df-230">Default</span></span> | <span data-ttu-id="940df-231">Einstellung</span><span class="sxs-lookup"><span data-stu-id="940df-231">Setting</span></span> |
| ------------------------------ | :-----: | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="940df-232">Bei Festlegung auf `true` legt die [Middleware für die IIS-Integration](#enable-the-iisintegration-components) den per [Windows-Authentifizierung](xref:security/authentication/windowsauth) authentifizierten `HttpContext.User` fest.</span><span class="sxs-lookup"><span data-stu-id="940df-232">If `true`, [IIS Integration Middleware](#enable-the-iisintegration-components) sets the `HttpContext.User` authenticated by [Windows Authentication](xref:security/authentication/windowsauth).</span></span> <span data-ttu-id="940df-233">Bei Festlegung auf `false` stellt die Middleware nur eine Identität für `HttpContext.User` bereit und antwortet auf explizite Anforderungen durch `AuthenticationScheme`.</span><span class="sxs-lookup"><span data-stu-id="940df-233">If `false`, the middleware only provides an identity for `HttpContext.User` and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="940df-234">Die Windows-Authentifizierung muss in IIS aktiviert sein, damit `AutomaticAuthentication` funktioniert.</span><span class="sxs-lookup"><span data-stu-id="940df-234">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> <span data-ttu-id="940df-235">Weitere Informationen finden Sie im Thema [Windows-Authentifizierung](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="940df-235">For more information, see the [Windows Authentication](xref:security/authentication/windowsauth) topic.</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="940df-236">Legt den Anzeigename fest, der Benutzern auf Anmeldungsseiten angezeigt wird</span><span class="sxs-lookup"><span data-stu-id="940df-236">Sets the display name shown to users on login pages.</span></span> |
| `ForwardClientCertificate`     | `true`  | <span data-ttu-id="940df-237">Wenn diese Option `true` ist und der Anforderungsheader `MS-ASPNETCORE-CLIENTCERT` vorhanden ist, wird das `HttpContext.Connection.ClientCertificate` aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="940df-237">If `true` and the `MS-ASPNETCORE-CLIENTCERT` request header is present, the `HttpContext.Connection.ClientCertificate` is populated.</span></span> |

### <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="940df-238">Proxyserver und Lastenausgleichsszenarien</span><span class="sxs-lookup"><span data-stu-id="940df-238">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="940df-239">Die [Middleware für die Integration von IIS](#enable-the-iisintegration-components), die die Middleware für weitergeleitete Header konfiguriert, und das ASP.NET Core-Modul sind so konfiguriert, dass sie das Schema (HTTP/HTTPS) und die Remote-IP-Adresse an die Stelle weiterleiten, von der die Anforderung stammte.</span><span class="sxs-lookup"><span data-stu-id="940df-239">The [IIS Integration Middleware](#enable-the-iisintegration-components), which configures Forwarded Headers Middleware, and the ASP.NET Core Module are configured to forward the scheme (HTTP/HTTPS) and the remote IP address where the request originated.</span></span> <span data-ttu-id="940df-240">Möglicherweise ist zusätzliche Konfiguration für Apps erforderlich, die hinter weiteren Proxyservern und Lastenausgleichsmodulen (Load Balancer) gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="940df-240">Additional configuration might be required for apps hosted behind additional proxy servers and load balancers.</span></span> <span data-ttu-id="940df-241">Weitere Informationen hierzu feinden Sie unter [Konfigurieren von ASP.NET Core zur Verwendung mit Proxyservern und Lastenausgleich](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="940df-241">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

### <a name="webconfig-file"></a><span data-ttu-id="940df-242">Datei „web.config“</span><span class="sxs-lookup"><span data-stu-id="940df-242">web.config file</span></span>

<span data-ttu-id="940df-243">Mit der Datei *web.config* wird das [ASP.NET Core-Modul](xref:host-and-deploy/aspnet-core-module) konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="940df-243">The *web.config* file configures the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span></span> <span data-ttu-id="940df-244">Die Erstellung, Transformation und Veröffentlichung der Datei *web.config* wird bei der Projektveröffentlichung von einem MSBuild-Ziel (`_TransformWebConfig`) abgewickelt.</span><span class="sxs-lookup"><span data-stu-id="940df-244">Creating, transforming, and publishing the *web.config* file is handled by an MSBuild target (`_TransformWebConfig`) when the project is published.</span></span> <span data-ttu-id="940df-245">Dieses Ziel ist in den Web SDK-Zielen (`Microsoft.NET.Sdk.Web`) vorhanden.</span><span class="sxs-lookup"><span data-stu-id="940df-245">This target is present in the Web SDK targets (`Microsoft.NET.Sdk.Web`).</span></span> <span data-ttu-id="940df-246">Das SDK wird am Anfang der Projektdatei festgelegt:</span><span class="sxs-lookup"><span data-stu-id="940df-246">The SDK is set at the top of the project file:</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
```

<span data-ttu-id="940df-247">Wenn im Projekt keine Datei namens *web.config* vorhanden ist, wird sie zur Konfiguration des ASP.NET Core-Moduls mit dem richtigen *processPath*- und *arguments*-Attribut erstellt und in die [veröffentlichte Ausgabe](xref:host-and-deploy/directory-structure) verschoben.</span><span class="sxs-lookup"><span data-stu-id="940df-247">If a *web.config* file isn't present in the project, the file is created with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to [published output](xref:host-and-deploy/directory-structure).</span></span>

<span data-ttu-id="940df-248">Ist eine Datei namens *web.config* im Projekt vorhanden, wird sie zur Konfiguration des ASP.NET Core-Moduls mit dem richtigen *processPath*- und *arguments*-Attribut transformiert und in die veröffentlichte Ausgabe verschoben.</span><span class="sxs-lookup"><span data-stu-id="940df-248">If a *web.config* file is present in the project, the file is transformed with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to published output.</span></span> <span data-ttu-id="940df-249">Die Transformation ändert die IIS-Konfigurationseinstellungen in der Datei nicht.</span><span class="sxs-lookup"><span data-stu-id="940df-249">The transformation doesn't modify IIS configuration settings in the file.</span></span>

<span data-ttu-id="940df-250">Die Datei *web.config* kann zusätzliche IIS-Konfigurationseinstellungen zum Steuern der aktiven IIS-Module bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="940df-250">The *web.config* file may provide additional IIS configuration settings that control active IIS modules.</span></span> <span data-ttu-id="940df-251">Informationen zu IIS-Modulen, die Anforderungen mit ASP.NET Core-Apps verarbeiten können, finden Sie im Thema [IIS-Module](xref:host-and-deploy/iis/modules).</span><span class="sxs-lookup"><span data-stu-id="940df-251">For information on IIS modules that are capable of processing requests with ASP.NET Core apps, see the [IIS modules](xref:host-and-deploy/iis/modules) topic.</span></span>

<span data-ttu-id="940df-252">Um zu verhindern, dass das Web-SDK die Datei *web.config* transformiert, verwenden Sie die Eigenschaft **\<IsTransformWebConfigDisabled>** in der Projektdatei:</span><span class="sxs-lookup"><span data-stu-id="940df-252">To prevent the Web SDK from transforming the *web.config* file, use the **\<IsTransformWebConfigDisabled>** property in the project file:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="940df-253">Wenn die Transformation der Datei durch das Web-SDK deaktiviert wird, müssen die Attribute *processPath* und *arguments* manuell durch den Entwickler festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="940df-253">When disabling the Web SDK from transforming the file, the *processPath* and *arguments* should be manually set by the developer.</span></span> <span data-ttu-id="940df-254">Weitere Informationen finden Sie unter <xref:host-and-deploy/aspnet-core-module>.</span><span class="sxs-lookup"><span data-stu-id="940df-254">For more information, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

### <a name="webconfig-file-location"></a><span data-ttu-id="940df-255">Speicherort der Datei „web.config“</span><span class="sxs-lookup"><span data-stu-id="940df-255">web.config file location</span></span>

<span data-ttu-id="940df-256">Zum Erstellen des [ASP.NET Core-Moduls](xref:host-and-deploy/aspnet-core-module) muss die Datei *web.config* im [Inhaltsstammpfad](xref:fundamentals/index#content-root) (normalerweise dem App-Basispfad) der bereitgestellten App vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="940df-256">In order to set up the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) correctly, the *web.config* file must be present at the [content root](xref:fundamentals/index#content-root) path (typically the app base path) of the deployed app.</span></span> <span data-ttu-id="940df-257">Dies ist der physische Pfad der Website, der in IIS bereitgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="940df-257">This is the same location as the website physical path provided to IIS.</span></span> <span data-ttu-id="940df-258">Die Datei *Web.config* wird im Stammverzeichnis der App benötigt, um die Veröffentlichung mehrerer Apps mit Web Deploy zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="940df-258">The *web.config* file is required at the root of the app to enable the publishing of multiple apps using Web Deploy.</span></span>

<span data-ttu-id="940df-259">Im physischen Pfad der App sind vertrauliche Dateien vorhanden, wie z.B. *\<assembly_name>.runtimeconfig.json*, *\<assembly_name>.xml* (XML-Dokumentationskommentare) und *\<assembly_name>.deps.json*.</span><span class="sxs-lookup"><span data-stu-id="940df-259">Sensitive files exist on the app's physical path, such as *\<assembly>.runtimeconfig.json*, *\<assembly>.xml* (XML Documentation comments), and *\<assembly>.deps.json*.</span></span> <span data-ttu-id="940df-260">Wenn die *web.config*-Datei vorhanden ist und die Website normal startet, werden diese vertraulichen Dateien bei Anforderung nicht offengelegt.</span><span class="sxs-lookup"><span data-stu-id="940df-260">When the *web.config* file is present and the site starts normally, IIS doesn't serve these sensitive files if they're requested.</span></span> <span data-ttu-id="940df-261">Wenn die Datei *web.config* fehlt, falsch benannt wurde oder die Website nicht für den normalen Start konfigurieren kann, macht IIS vertrauliche Dateien möglicherweise öffentlich verfügbar.</span><span class="sxs-lookup"><span data-stu-id="940df-261">If the *web.config* file is missing, incorrectly named, or unable to configure the site for normal startup, IIS may serve sensitive files publicly.</span></span>

<span data-ttu-id="940df-262">**Die Datei *web.config* muss immer in der Bereitstellung vorhanden, richtig benannt und in der Lage sein, die Website für einen normalen Start zu konfigurieren. Entfernen Sie die Datei *web.config* niemals aus einer Produktionsbereitstellung.**</span><span class="sxs-lookup"><span data-stu-id="940df-262">**The *web.config* file must be present in the deployment at all times, correctly named, and able to configure the site for normal start up. Never remove the *web.config* file from a production deployment.**</span></span>

### <a name="transform-webconfig"></a><span data-ttu-id="940df-263">Transformieren von web.config</span><span class="sxs-lookup"><span data-stu-id="940df-263">Transform web.config</span></span>

<span data-ttu-id="940df-264">Wenn Sie *web.config* beim Veröffentlichen transformieren müssen (z.B. Umgebungsvariablen basierend auf der Konfiguration, dem Profil oder der Umgebung festlegen müssen), finden Sie weitere Informationen unter <xref:host-and-deploy/iis/transform-webconfig>.</span><span class="sxs-lookup"><span data-stu-id="940df-264">If you need to transform *web.config* on publish (for example, set environment variables based on the configuration, profile, or environment), see <xref:host-and-deploy/iis/transform-webconfig>.</span></span>

## <a name="iis-configuration"></a><span data-ttu-id="940df-265">IIS-Konfiguration</span><span class="sxs-lookup"><span data-stu-id="940df-265">IIS configuration</span></span>

<span data-ttu-id="940df-266">**Windows Server-Betriebssysteme**</span><span class="sxs-lookup"><span data-stu-id="940df-266">**Windows Server operating systems**</span></span>

<span data-ttu-id="940df-267">Aktivieren Sie die Serverrolle **Webserver (IIS)** , und richten Sie Rollendienste ein.</span><span class="sxs-lookup"><span data-stu-id="940df-267">Enable the **Web Server (IIS)** server role and establish role services.</span></span>

1. <span data-ttu-id="940df-268">Verwenden Sie den Assistenten **Rollen und Features hinzufügen** im Menü **Verwalten** oder den Link in **Server-Manager**.</span><span class="sxs-lookup"><span data-stu-id="940df-268">Use the **Add Roles and Features** wizard from the **Manage** menu or the link in **Server Manager**.</span></span> <span data-ttu-id="940df-269">Aktivieren Sie im Schritt **Serverrollen** das Kontrollkästchen für **Webserver (IIS)** .</span><span class="sxs-lookup"><span data-stu-id="940df-269">On the **Server Roles** step, check the box for **Web Server (IIS)**.</span></span>

   ![Die Rolle „Webserver (IIS)“ wird im Schritt „Serverrollen auswählen“ ausgewählt.](index/_static/server-roles-ws2016.png)

1. <span data-ttu-id="940df-271">Nach dem Schritt **Features** wird der Schritt **Rollendienste** für Webserver (IIS) geladen.</span><span class="sxs-lookup"><span data-stu-id="940df-271">After the **Features** step, the **Role services** step loads for Web Server (IIS).</span></span> <span data-ttu-id="940df-272">Wählen Sie die gewünschten IIS-Rollendienste aus, oder übernehmen Sie die bereitgestellten Standardrollendienste.</span><span class="sxs-lookup"><span data-stu-id="940df-272">Select the IIS role services desired or accept the default role services provided.</span></span>

   ![Die Standardrollendienste werden im Schritt „Rollendienste auswählen“ ausgewählt.](index/_static/role-services-ws2016.png)

   <span data-ttu-id="940df-274">**Windows-Authentifizierung (optional)**</span><span class="sxs-lookup"><span data-stu-id="940df-274">**Windows Authentication (Optional)**</span></span>  
   <span data-ttu-id="940df-275">Um die Windows-Authentifizierung zu aktivieren, erweitern Sie die folgenden Knoten: **Webserver** > **Sicherheit**.</span><span class="sxs-lookup"><span data-stu-id="940df-275">To enable Windows Authentication, expand the following nodes: **Web Server** > **Security**.</span></span> <span data-ttu-id="940df-276">Wählen Sie das Feature **Windows-Authentifizierung** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-276">Select the **Windows Authentication** feature.</span></span> <span data-ttu-id="940df-277">Weitere Informationen finden Sie unter [Windows-Authentifizierung \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) und [Konfigurieren der Windows-Authentifizierung](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="940df-277">For more information, see [Windows Authentication \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) and [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

   <span data-ttu-id="940df-278">**WebSockets (optional)**</span><span class="sxs-lookup"><span data-stu-id="940df-278">**WebSockets (Optional)**</span></span>  
   <span data-ttu-id="940df-279">WebSockets wird mit ASP.NET Core 1.1 oder höher unterstützt.</span><span class="sxs-lookup"><span data-stu-id="940df-279">WebSockets is supported with ASP.NET Core 1.1 or later.</span></span> <span data-ttu-id="940df-280">Um WebSockets zu aktivieren, erweitern Sie die folgenden Knoten: **Webserver** > **Anwendungsentwicklung**.</span><span class="sxs-lookup"><span data-stu-id="940df-280">To enable WebSockets, expand the following nodes: **Web Server** > **Application Development**.</span></span> <span data-ttu-id="940df-281">Wählen Sie das Feature **WebSocket-Protokoll** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-281">Select the **WebSocket Protocol** feature.</span></span> <span data-ttu-id="940df-282">Weitere Informationen finden Sie unter [WebSockets](xref:fundamentals/websockets).</span><span class="sxs-lookup"><span data-stu-id="940df-282">For more information, see [WebSockets](xref:fundamentals/websockets).</span></span>

1. <span data-ttu-id="940df-283">Fahren Sie mit dem Schritt **Bestätigung** fort, um die Webserverrolle und die Dienste zu installieren.</span><span class="sxs-lookup"><span data-stu-id="940df-283">Proceed through the **Confirmation** step to install the web server role and services.</span></span> <span data-ttu-id="940df-284">Ein Server-/IIS-Neustart ist nach der Installation der Rolle **Webserver (IIS)** nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="940df-284">A server/IIS restart isn't required after installing the **Web Server (IIS)** role.</span></span>

<span data-ttu-id="940df-285">**Windows-Desktopbetriebssysteme**</span><span class="sxs-lookup"><span data-stu-id="940df-285">**Windows desktop operating systems**</span></span>

<span data-ttu-id="940df-286">Aktivieren Sie die **IIS-Verwaltungskonsole** und die **WWW-Dienste**.</span><span class="sxs-lookup"><span data-stu-id="940df-286">Enable the **IIS Management Console** and **World Wide Web Services**.</span></span>

1. <span data-ttu-id="940df-287">Navigieren Sie zu **Systemsteuerung** > **Programme** > **Programme und Features** > **Windows-Features aktivieren oder deaktivieren** (links auf dem Bildschirm).</span><span class="sxs-lookup"><span data-stu-id="940df-287">Navigate to **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off** (left side of the screen).</span></span>

1. <span data-ttu-id="940df-288">Öffnen Sie den Knoten **Internetinformationsdienste**.</span><span class="sxs-lookup"><span data-stu-id="940df-288">Open the **Internet Information Services** node.</span></span> <span data-ttu-id="940df-289">Öffnen Sie den Knoten **Webverwaltungstools**.</span><span class="sxs-lookup"><span data-stu-id="940df-289">Open the **Web Management Tools** node.</span></span>

1. <span data-ttu-id="940df-290">Aktivieren Sie das Kontrollkästchen für **IIS-Verwaltungskonsole**.</span><span class="sxs-lookup"><span data-stu-id="940df-290">Check the box for **IIS Management Console**.</span></span>

1. <span data-ttu-id="940df-291">Aktivieren Sie das Kontrollkästchen für **WWW-Dienste**.</span><span class="sxs-lookup"><span data-stu-id="940df-291">Check the box for **World Wide Web Services**.</span></span>

1. <span data-ttu-id="940df-292">Akzeptieren Sie die Standardfeatures für **WWW-Dienste**, oder passen Sie die IIS-Features an.</span><span class="sxs-lookup"><span data-stu-id="940df-292">Accept the default features for **World Wide Web Services** or customize the IIS features.</span></span>

   <span data-ttu-id="940df-293">**Windows-Authentifizierung (optional)**</span><span class="sxs-lookup"><span data-stu-id="940df-293">**Windows Authentication (Optional)**</span></span>  
   <span data-ttu-id="940df-294">Um die Windows-Authentifizierung zu aktivieren, erweitern Sie die folgenden Knoten: **WWW-Dienste** > **Sicherheit**.</span><span class="sxs-lookup"><span data-stu-id="940df-294">To enable Windows Authentication, expand the following nodes: **World Wide Web Services** > **Security**.</span></span> <span data-ttu-id="940df-295">Wählen Sie das Feature **Windows-Authentifizierung** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-295">Select the **Windows Authentication** feature.</span></span> <span data-ttu-id="940df-296">Weitere Informationen finden Sie unter [Windows-Authentifizierung \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) und [Konfigurieren der Windows-Authentifizierung](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="940df-296">For more information, see [Windows Authentication \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) and [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

   <span data-ttu-id="940df-297">**WebSockets (optional)**</span><span class="sxs-lookup"><span data-stu-id="940df-297">**WebSockets (Optional)**</span></span>  
   <span data-ttu-id="940df-298">WebSockets wird mit ASP.NET Core 1.1 oder höher unterstützt.</span><span class="sxs-lookup"><span data-stu-id="940df-298">WebSockets is supported with ASP.NET Core 1.1 or later.</span></span> <span data-ttu-id="940df-299">Um WebSockets zu aktivieren, erweitern Sie die folgenden Knoten: **WWW-Dienste** > **Anwendungsentwicklungsfeatures**.</span><span class="sxs-lookup"><span data-stu-id="940df-299">To enable WebSockets, expand the following nodes: **World Wide Web Services** > **Application Development Features**.</span></span> <span data-ttu-id="940df-300">Wählen Sie das Feature **WebSocket-Protokoll** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-300">Select the **WebSocket Protocol** feature.</span></span> <span data-ttu-id="940df-301">Weitere Informationen finden Sie unter [WebSockets](xref:fundamentals/websockets).</span><span class="sxs-lookup"><span data-stu-id="940df-301">For more information, see [WebSockets](xref:fundamentals/websockets).</span></span>

1. <span data-ttu-id="940df-302">Wenn die IIS-Installation einen Neustart erfordert, starten Sie das System neu.</span><span class="sxs-lookup"><span data-stu-id="940df-302">If the IIS installation requires a restart, restart the system.</span></span>

![Die IIS-Verwaltungskonsole und WWW-Dienste werden in Windows-Features ausgewählt.](index/_static/windows-features-win10.png)

## <a name="install-the-net-core-hosting-bundle"></a><span data-ttu-id="940df-304">Installieren des .NET Core Hosting-Pakets</span><span class="sxs-lookup"><span data-stu-id="940df-304">Install the .NET Core Hosting Bundle</span></span>

<span data-ttu-id="940df-305">Installieren Sie das *Paket „.NET Core Hosting“* im Hostsystem.</span><span class="sxs-lookup"><span data-stu-id="940df-305">Install the *.NET Core Hosting Bundle* on the hosting system.</span></span> <span data-ttu-id="940df-306">Das Paket installiert die .NET Core-Runtime, die .NET Core-Bibliothek und das [ASP.NET Core-Modul](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="940df-306">The bundle installs the .NET Core Runtime, .NET Core Library, and the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span></span> <span data-ttu-id="940df-307">Mit dem Modul können ASP.NET Core-Apps hinter IIS ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="940df-307">The module allows ASP.NET Core apps to run behind IIS.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="940df-308">Wenn das Hosting-Paket vor IIS installiert wird, muss die Paketinstallation repariert werden.</span><span class="sxs-lookup"><span data-stu-id="940df-308">If the Hosting Bundle is installed before IIS, the bundle installation must be repaired.</span></span> <span data-ttu-id="940df-309">Führen Sie nach der Installation von IIS erneut den Installer des Hosting-Pakets aus.</span><span class="sxs-lookup"><span data-stu-id="940df-309">Run the Hosting Bundle installer again after installing IIS.</span></span>
>
> <span data-ttu-id="940df-310">Wenn das Hosting-Paket nach der Installation der 64-Bit-Version (x64) von .NET Core installiert wird, kann es den Anschein haben, dass SDKs fehlen ([Es wurden keine .NET Core SDKs erkannt](xref:test/troubleshoot#no-net-core-sdks-were-detected)).</span><span class="sxs-lookup"><span data-stu-id="940df-310">If the Hosting Bundle is installed after installing the 64-bit (x64) version of .NET Core, SDKs might appear to be missing ([No .NET Core SDKs were detected](xref:test/troubleshoot#no-net-core-sdks-were-detected)).</span></span> <span data-ttu-id="940df-311">Informationen zum Beheben des Problems finden Sie unter <xref:test/troubleshoot#missing-sdk-after-installing-the-net-core-hosting-bundle>.</span><span class="sxs-lookup"><span data-stu-id="940df-311">To resolve the problem, see <xref:test/troubleshoot#missing-sdk-after-installing-the-net-core-hosting-bundle>.</span></span>

### <a name="direct-download-current-version"></a><span data-ttu-id="940df-312">Direkter Download (aktuelle Version)</span><span class="sxs-lookup"><span data-stu-id="940df-312">Direct download (current version)</span></span>

<span data-ttu-id="940df-313">Laden Sie den Installer über folgenden Link herunter:</span><span class="sxs-lookup"><span data-stu-id="940df-313">Download the installer using the following link:</span></span>

[<span data-ttu-id="940df-314">Aktueller Installer für das .NET Core Hosting-Paket (direkter Download)</span><span class="sxs-lookup"><span data-stu-id="940df-314">Current .NET Core Hosting Bundle installer (direct download)</span></span>](https://www.microsoft.com/net/permalink/dotnetcore-current-windows-runtime-bundle-installer)

### <a name="earlier-versions-of-the-installer"></a><span data-ttu-id="940df-315">Frühere Versionen des Installers</span><span class="sxs-lookup"><span data-stu-id="940df-315">Earlier versions of the installer</span></span>

<span data-ttu-id="940df-316">So erhalten Sie eine frühere Version des Installers:</span><span class="sxs-lookup"><span data-stu-id="940df-316">To obtain an earlier version of the installer:</span></span>

1. <span data-ttu-id="940df-317">Navigieren Sie zu den[.NET-Downloadarchiven](https://www.microsoft.com/net/download/archives).</span><span class="sxs-lookup"><span data-stu-id="940df-317">Navigate to the [.NET download archives](https://www.microsoft.com/net/download/archives).</span></span>
1. <span data-ttu-id="940df-318">Wählen Sie unter **.NET Core** die .NET Core-Version aus.</span><span class="sxs-lookup"><span data-stu-id="940df-318">Under **.NET Core**, select the .NET Core version.</span></span>
1. <span data-ttu-id="940df-319">Suchen Sie in der Spalte **Run apps - Runtime** (Apps ausführen – Runtime) die Zeile mit der gewünschten .NET Core-RuntimeRuntime-Version.</span><span class="sxs-lookup"><span data-stu-id="940df-319">In the **Run apps - Runtime** column, find the row of the .NET Core runtime version desired.</span></span>
1. <span data-ttu-id="940df-320">Laden Sie den Installer über den Link **Runtime & Hosting Bundle** (Runtime- und Hosting-Paket) herunter.</span><span class="sxs-lookup"><span data-stu-id="940df-320">Download the installer using the **Runtime & Hosting Bundle** link.</span></span>

> [!WARNING]
> <span data-ttu-id="940df-321">Einige Installer enthalten Releaseversionen, die das Ende ihres Lebenszyklus erreicht haben und nicht mehr von Microsoft unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="940df-321">Some installers contain release versions that have reached their end of life (EOL) and are no longer supported by Microsoft.</span></span> <span data-ttu-id="940df-322">Weitere Informationen finden Sie in den [Unterstützungsrichtlinien](https://dotnet.microsoft.com/platform/support/policy/dotnet-core).</span><span class="sxs-lookup"><span data-stu-id="940df-322">For more information, see the [support policy](https://dotnet.microsoft.com/platform/support/policy/dotnet-core).</span></span>

### <a name="install-the-hosting-bundle"></a><span data-ttu-id="940df-323">Installieren des Hosting-Pakets</span><span class="sxs-lookup"><span data-stu-id="940df-323">Install the Hosting Bundle</span></span>

1. <span data-ttu-id="940df-324">Führen Sie das Installationsprogramm auf dem Server aus.</span><span class="sxs-lookup"><span data-stu-id="940df-324">Run the installer on the server.</span></span> <span data-ttu-id="940df-325">Die folgenden Parameter sind verfügbar, wenn Sie das Installationsprogramm über eine Administratorbefehlsshell ausführen.</span><span class="sxs-lookup"><span data-stu-id="940df-325">The following parameters are available when running the installer from an administrator command shell:</span></span>

   * <span data-ttu-id="940df-326">`OPT_NO_ANCM=1` &ndash; Überspringen Sie die Installation des ASP.NET Core-Moduls.</span><span class="sxs-lookup"><span data-stu-id="940df-326">`OPT_NO_ANCM=1` &ndash; Skip installing the ASP.NET Core Module.</span></span>
   * <span data-ttu-id="940df-327">`OPT_NO_RUNTIME=1` &ndash; Überspringen Sie die Installation der .NET Core-Runtime.</span><span class="sxs-lookup"><span data-stu-id="940df-327">`OPT_NO_RUNTIME=1` &ndash; Skip installing the .NET Core runtime.</span></span> <span data-ttu-id="940df-328">Wird verwendet, wenn der Server nur [eigenständige Bereitstellungen (Self-contained Deployments, SCD)](/dotnet/core/deploying/#self-contained-deployments-scd) hostet.</span><span class="sxs-lookup"><span data-stu-id="940df-328">Used when the server only hosts [self-contained deployments (SCD)](/dotnet/core/deploying/#self-contained-deployments-scd).</span></span>
   * <span data-ttu-id="940df-329">`OPT_NO_SHAREDFX=1` &ndash; Überspringen Sie die Installation des geteilten ASP.NET-Frameworks (ASP.NET-Runtime).</span><span class="sxs-lookup"><span data-stu-id="940df-329">`OPT_NO_SHAREDFX=1` &ndash; Skip installing the ASP.NET Shared Framework (ASP.NET runtime).</span></span> <span data-ttu-id="940df-330">Wird verwendet, wenn der Server nur [eigenständige Bereitstellungen (Self-contained Deployments, SCD)](/dotnet/core/deploying/#self-contained-deployments-scd) hostet.</span><span class="sxs-lookup"><span data-stu-id="940df-330">Used when the server only hosts [self-contained deployments (SCD)](/dotnet/core/deploying/#self-contained-deployments-scd).</span></span>
   * <span data-ttu-id="940df-331">`OPT_NO_X86=1` &ndash; Überspringen Sie die Installation von X86-Runtimes.</span><span class="sxs-lookup"><span data-stu-id="940df-331">`OPT_NO_X86=1` &ndash; Skip installing x86 runtimes.</span></span> <span data-ttu-id="940df-332">Verwenden Sie diesen Parameter, wenn Sie wissen, dass Sie keine 32-Bit-Apps hosten.</span><span class="sxs-lookup"><span data-stu-id="940df-332">Use this parameter when you know that you won't be hosting 32-bit apps.</span></span> <span data-ttu-id="940df-333">Sollte die Möglichkeit bestehen, dass Sie sowohl 32-Bit- als auch 64-Bit-Apps hosten könnten, verwenden Sie diesen Parameter nicht, und installieren Sie beide Runtimes.</span><span class="sxs-lookup"><span data-stu-id="940df-333">If there's any chance that you will host both 32-bit and 64-bit apps in the future, don't use this parameter and install both runtimes.</span></span>
   * <span data-ttu-id="940df-334">`OPT_NO_SHARED_CONFIG_CHECK=1` &ndash; Deaktivieren Sie die Überprüfung auf Verwendung einer gemeinsamen IIS-Konfiguration, wenn sich die gemeinsam genutzte Konfiguration (*applicationHost.config*) auf demselben Computer wie die IIS-Installation befindet.</span><span class="sxs-lookup"><span data-stu-id="940df-334">`OPT_NO_SHARED_CONFIG_CHECK=1` &ndash; Disable the check for using an IIS Shared Configuration when the shared configuration (*applicationHost.config*) is on the same machine as the IIS installation.</span></span> <span data-ttu-id="940df-335">*Nur für Installationsprogramme für Hostingbundles für ASP.NET Core 2.2 oder höher verfügbar.*</span><span class="sxs-lookup"><span data-stu-id="940df-335">*Only available for ASP.NET Core 2.2 or later Hosting Bundler installers.*</span></span> <span data-ttu-id="940df-336">Weitere Informationen finden Sie unter <xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration>.</span><span class="sxs-lookup"><span data-stu-id="940df-336">For more information, see <xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration>.</span></span>
1. <span data-ttu-id="940df-337">Starten Sie das System neu, oder führen Sie die folgenden Befehle in einer Befehlsshell aus:</span><span class="sxs-lookup"><span data-stu-id="940df-337">Restart the system or execute the following commands in a command shell:</span></span>

   ```console
   net stop was /y
   net start w3svc
   ```
   <span data-ttu-id="940df-338">Durch den Neustart von IIS wird eine Änderung an der PATH-Systemeinstellung – einer Umgebungsvariable – angewendet, die durch den Installer vorgenommen wurde.</span><span class="sxs-lookup"><span data-stu-id="940df-338">Restarting IIS picks up a change to the system PATH, which is an environment variable, made by the installer.</span></span>

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="940df-339">ASP.NET Core wendet kein Rollforwardverhalten für Patchversionen freigegebener Frameworkpakete an.</span><span class="sxs-lookup"><span data-stu-id="940df-339">ASP.NET Core doesn't adopt roll-forward behavior for patch releases of shared framework packages.</span></span> <span data-ttu-id="940df-340">Nach einem Upgrade des freigegebene Frameworks durch Installation eines neuen Hostingpakets starten Sie das System neu, oder führen Sie die folgenden Befehle in einer Befehlsshell aus:</span><span class="sxs-lookup"><span data-stu-id="940df-340">After upgrading the shared framework by installing a new hosting bundle, restart the system or execute the following commands in a command shell:</span></span>

```console
net stop was /y
net start w3svc
```

::: moniker-end

::: moniker range="< aspnetcore-3.0"

<span data-ttu-id="940df-341">Beim Installieren des Hostingpakets müssen die einzelnen Websites in IIS nicht manuell angehalten werden.</span><span class="sxs-lookup"><span data-stu-id="940df-341">It isn't necessary to manually stop individual sites in IIS when installing the Hosting Bundle.</span></span> <span data-ttu-id="940df-342">Gehostete Apps (IIS-Websites) werden beim Neustart von IIS neu gestartet.</span><span class="sxs-lookup"><span data-stu-id="940df-342">Hosted apps (IIS sites) restart when IIS restarts.</span></span> <span data-ttu-id="940df-343">Apps starten wieder, wenn die erste Anforderung eintrifft, beispielsweise aus dem [Anwendungsinitialisierungsmodul](#application-initialization-module-and-idle-timeout).</span><span class="sxs-lookup"><span data-stu-id="940df-343">Apps start up again when they receive their first request, including from the [Application Initialization Module](#application-initialization-module-and-idle-timeout).</span></span>

<span data-ttu-id="940df-344">ASP.NET Core wendet ein Rollforwardverhalten für Patchversionen freigegebener Frameworkpaketen an.</span><span class="sxs-lookup"><span data-stu-id="940df-344">ASP.NET Core adopts roll-forward behavior for patch releases of shared framework packages.</span></span> <span data-ttu-id="940df-345">Wenn von IIS gehostete Apps mit IIS neu starten, werden sie mit den neuesten Patchversionen der referenzierten Pakete geladen, sobald sie die erste Anforderung empfangen.</span><span class="sxs-lookup"><span data-stu-id="940df-345">When apps hosted by IIS restart with IIS, the apps load with the latest patch releases of their referenced packages when they receive their first request.</span></span> <span data-ttu-id="940df-346">Wenn IIS nicht neu gestartet wird, starten die Apps neu und wenden ein Rollforwardverhalten an, wenn die Workerprozesse neu starten und die Apps die erste Anforderung empfangen.</span><span class="sxs-lookup"><span data-stu-id="940df-346">If IIS isn't restarted, apps restart and exhibit roll-forward behavior when their worker processes are recycled and they receive their first request.</span></span>

::: moniker-end

> [!NOTE]
> <span data-ttu-id="940df-347">Informationen zur Verwendung einer IIS-Freigabekonfiguration finden Sie unter [ASP.NET Core-Modul mit IIS-Freigabekonfiguration](xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span><span class="sxs-lookup"><span data-stu-id="940df-347">For information on IIS Shared Configuration, see [ASP.NET Core Module with IIS Shared Configuration](xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span></span>

## <a name="install-web-deploy-when-publishing-with-visual-studio"></a><span data-ttu-id="940df-348">Installieren von Web Deploy beim Veröffentlichen mit Visual Studio</span><span class="sxs-lookup"><span data-stu-id="940df-348">Install Web Deploy when publishing with Visual Studio</span></span>

<span data-ttu-id="940df-349">Wenn Sie Apps auf Servern mit [Web Deploy](/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later) bereitstellen, installieren Sie die neueste Version von Web Deploy auf dem Server.</span><span class="sxs-lookup"><span data-stu-id="940df-349">When deploying apps to servers with [Web Deploy](/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later), install the latest version of Web Deploy on the server.</span></span> <span data-ttu-id="940df-350">Um Web Deploy zu installieren, verwenden Sie den [Webplattform-Installer (Web PI)](https://www.microsoft.com/web/downloads/platform.aspx) oder rufen einen Installer direkt aus dem [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717) ab.</span><span class="sxs-lookup"><span data-stu-id="940df-350">To install Web Deploy, use the [Web Platform Installer (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) or obtain an installer directly from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span></span> <span data-ttu-id="940df-351">Die bevorzugte Methode ist die Verwendung von WebPI.</span><span class="sxs-lookup"><span data-stu-id="940df-351">The preferred method is to use WebPI.</span></span> <span data-ttu-id="940df-352">WebPI bietet ein eigenständiges Setup und eine Konfiguration für Hostinganbieter.</span><span class="sxs-lookup"><span data-stu-id="940df-352">WebPI offers a standalone setup and a configuration for hosting providers.</span></span>

## <a name="create-the-iis-site"></a><span data-ttu-id="940df-353">Erstellen der IIS-Website</span><span class="sxs-lookup"><span data-stu-id="940df-353">Create the IIS site</span></span>

1. <span data-ttu-id="940df-354">Erstellen Sie auf dem Hostingsystem einen Ordner zum Speichern der veröffentlichten Ordner und Dateien der App.</span><span class="sxs-lookup"><span data-stu-id="940df-354">On the hosting system, create a folder to contain the app's published folders and files.</span></span> <span data-ttu-id="940df-355">In einem späteren Schritt wird der Ordnerpfad als physischer App-Pfad in IIS angegeben.</span><span class="sxs-lookup"><span data-stu-id="940df-355">In a following step, the folder's path is provided to IIS as the physical path to the app.</span></span> <span data-ttu-id="940df-356">Weitere Informationen zu Bereitstellungsordner und Dateilayout einer App finden Sie unter <xref:host-and-deploy/directory-structure>.</span><span class="sxs-lookup"><span data-stu-id="940df-356">For more information on an app's deployment folder and file layout, see <xref:host-and-deploy/directory-structure>.</span></span>

1. <span data-ttu-id="940df-357">Öffnen Sie in IIS-Manager den Serverknoten im Bereich **Verbindungen**.</span><span class="sxs-lookup"><span data-stu-id="940df-357">In IIS Manager, open the server's node in the **Connections** panel.</span></span> <span data-ttu-id="940df-358">Klicken Sie mit der rechten Maustaste auf den Ordner **Websites**.</span><span class="sxs-lookup"><span data-stu-id="940df-358">Right-click the **Sites** folder.</span></span> <span data-ttu-id="940df-359">Klicken Sie im Kontextmenü auf **Website hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="940df-359">Select **Add Website** from the contextual menu.</span></span>

1. <span data-ttu-id="940df-360">Geben Sie einen **Websitenamen** an, und legen Sie den **physischen Pfad** auf den Bereitstellungsordner der App fest.</span><span class="sxs-lookup"><span data-stu-id="940df-360">Provide a **Site name** and set the **Physical path** to the app's deployment folder.</span></span> <span data-ttu-id="940df-361">Geben Sie die Konfiguration unter **Bindung** an, und erstellen Sie die Website, indem Sie auf **OK** klicken:</span><span class="sxs-lookup"><span data-stu-id="940df-361">Provide the **Binding** configuration and create the website by selecting **OK**:</span></span>

   ![Geben Sie den Websitenamen, den physischen Pfad und den Hostnamen im Schritt „Website hinzufügen“ an.](index/_static/add-website-ws2016.png)

   > [!WARNING]
   > <span data-ttu-id="940df-363">Allgemeine Platzhalterbindungen (`http://*:80/` und `http://+:80`) dürfen **nicht** verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="940df-363">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="940df-364">Platzhalterbindungen auf oberster Ebene gefährden die Sicherheit Ihrer App.</span><span class="sxs-lookup"><span data-stu-id="940df-364">Top-level wildcard bindings can open up your app to security vulnerabilities.</span></span> <span data-ttu-id="940df-365">Dies gilt für starke und schwache Platzhalter.</span><span class="sxs-lookup"><span data-stu-id="940df-365">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="940df-366">Verwenden Sie statt Platzhaltern explizite Hostnamen.</span><span class="sxs-lookup"><span data-stu-id="940df-366">Use explicit host names rather than wildcards.</span></span> <span data-ttu-id="940df-367">Platzhalterbindungen in untergeordneten Domänen (z.B. `*.mysub.com`) verursachen kein Sicherheitsrisiko, wenn Sie die gesamte übergeordnete Domäne steuern (im Gegensatz zu `*.com`, das angreifbar ist).</span><span class="sxs-lookup"><span data-stu-id="940df-367">Subdomain wildcard binding (for example, `*.mysub.com`) doesn't have this security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="940df-368">Weitere Informationen finden Sie unter [rfc7230 im Abschnitt 5.4](https://tools.ietf.org/html/rfc7230#section-5.4).</span><span class="sxs-lookup"><span data-stu-id="940df-368">See [rfc7230 section-5.4](https://tools.ietf.org/html/rfc7230#section-5.4) for more information.</span></span>

1. <span data-ttu-id="940df-369">Wählen Sie unter dem Serverknoten **Anwendungspools** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-369">Under the server's node, select **Application Pools**.</span></span>

1. <span data-ttu-id="940df-370">Klicken Sie mit der rechten Maustaste auf den App-Pool der Website, und wählen Sie im Kontextmenü **Grundeinstellungen** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-370">Right-click the site's app pool and select **Basic Settings** from the contextual menu.</span></span>

1. <span data-ttu-id="940df-371">Legen Sie im Fenster **Anwendungspool bearbeiten** die **.NET CLR-Version** auf **Kein verwalteter Code** fest:</span><span class="sxs-lookup"><span data-stu-id="940df-371">In the **Edit Application Pool** window, set the **.NET CLR version** to **No Managed Code**:</span></span>

   ![Legen Sie „Kein verwalteter Code“ für die .NET CLR-Version fest.](index/_static/edit-apppool-ws2016.png)

    <span data-ttu-id="940df-373">ASP.NET Core wird in einem separaten Prozess ausgeführt und verwaltet die Runtime.</span><span class="sxs-lookup"><span data-stu-id="940df-373">ASP.NET Core runs in a separate process and manages the runtime.</span></span> <span data-ttu-id="940df-374">ASP.NET Core basiert nicht auf dem Laden des Desktop-CLR (.NET CLR). Die Core Common Language Runtime (CoreCLR) für .NET Core wird gestartet, um die App im Workerprozess zu hosten.</span><span class="sxs-lookup"><span data-stu-id="940df-374">ASP.NET Core doesn't rely on loading the desktop CLR (.NET CLR)&mdash;the Core Common Language Runtime (CoreCLR) for .NET Core is booted to host the app in the worker process.</span></span> <span data-ttu-id="940df-375">Das Festlegen der **.NET CLR-Version** auf **Kein verwalteter Code** ist optional, wird aber empfohlen.</span><span class="sxs-lookup"><span data-stu-id="940df-375">Setting the **.NET CLR version** to **No Managed Code** is optional but recommended.</span></span>

1. <span data-ttu-id="940df-376">*ASP.NET Core 2.2 oder höher*: Deaktivieren Sie für eine [eigenständige Bereitstellung](/dotnet/core/deploying/#self-contained-deployments-scd) für 64-Bit-Systeme (x64), die das [In-Process-Hostingmodell](#in-process-hosting-model) verwendet, den App-Pool für 32-Bit-Prozesse (x86).</span><span class="sxs-lookup"><span data-stu-id="940df-376">*ASP.NET Core 2.2 or later*: For a 64-bit (x64) [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd) that uses the [in-process hosting model](#in-process-hosting-model), disable the app pool for 32-bit (x86) processes.</span></span>

   <span data-ttu-id="940df-377">Wählen Sie in der Seitenleiste **Aktionen** von „IIS-Manager > **Anwendungspools**“ die Option **Standardwerte für Anwendungspool festlegen** oder **Erweiterte Einstellungen** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-377">In the **Actions** sidebar of IIS Manager > **Application Pools**, select **Set Application Pool Defaults** or **Advanced Settings**.</span></span> <span data-ttu-id="940df-378">Suchen Sie nach **32-Bit-Anwendungen aktivieren**, und legen Sie den Wert auf `False` fest.</span><span class="sxs-lookup"><span data-stu-id="940df-378">Locate **Enable 32-Bit Applications** and set the value to `False`.</span></span> <span data-ttu-id="940df-379">Diese Einstellung wirkt sich nicht auf Apps aus, die für [Out-of-Process-Hosting](xref:host-and-deploy/aspnet-core-module#out-of-process-hosting-model) bereitgestellt wurden.</span><span class="sxs-lookup"><span data-stu-id="940df-379">This setting doesn't affect apps deployed for [out-of-process hosting](xref:host-and-deploy/aspnet-core-module#out-of-process-hosting-model).</span></span>

1. <span data-ttu-id="940df-380">Vergewissern Sie sich, dass die Prozessmodellidentität über die richtigen Berechtigungen verfügt.</span><span class="sxs-lookup"><span data-stu-id="940df-380">Confirm the process model identity has the proper permissions.</span></span>

   <span data-ttu-id="940df-381">Wenn die Standardidentität des App-Pools (**Prozessmodell** > **Identität**) von **ApplicationPoolIdentity** in eine andere Identität geändert wird, stellen Sie sicher, dass die neue Identität über die erforderlichen Berechtigungen zum Zugriff auf den Ordner, die Datenbank und andere erforderliche Ressourcen der App verfügt.</span><span class="sxs-lookup"><span data-stu-id="940df-381">If the default identity of the app pool (**Process Model** > **Identity**) is changed from **ApplicationPoolIdentity** to another identity, verify that the new identity has the required permissions to access the app's folder, database, and other required resources.</span></span> <span data-ttu-id="940df-382">Der App-Pool benötigt beispielsweise Lese- und Schreibzugriff für Ordner, in denen die App Lese- und Schreibvorgänge für Dateien ausführt.</span><span class="sxs-lookup"><span data-stu-id="940df-382">For example, the app pool requires read and write access to folders where the app reads and writes files.</span></span>

<span data-ttu-id="940df-383">**Konfigurieren der Windows-Authentifizierung (optional)**</span><span class="sxs-lookup"><span data-stu-id="940df-383">**Windows Authentication configuration (Optional)**</span></span>  
<span data-ttu-id="940df-384">Weitere Informationen finden Sie unter [Konfigurieren der Windows-Authentifizierung](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="940df-384">For more information, see [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

## <a name="deploy-the-app"></a><span data-ttu-id="940df-385">Bereitstellen der App</span><span class="sxs-lookup"><span data-stu-id="940df-385">Deploy the app</span></span>

<span data-ttu-id="940df-386">Stellen Sie die App im IIS-Ordner **Physischer Pfad** bereit, der im Abschnitt [Erstellen der IIS-Website](#create-the-iis-site) eingerichtet wurde.</span><span class="sxs-lookup"><span data-stu-id="940df-386">Deploy the app to the IIS **Physical path** folder that was established in the [Create the IIS site](#create-the-iis-site) section.</span></span> <span data-ttu-id="940df-387">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) ist die empfohlene Methode für die Bereitstellung, aber es gibt verschiedene Optionen, um die Anwendung aus dem Ordner *publish* des Projekts in den Bereitstellungsordner des Hostsystems zu verschieben.</span><span class="sxs-lookup"><span data-stu-id="940df-387">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) is the recommended mechanism for deployment, but several options exist for moving the app from the project's *publish* folder to the hosting system's deployment folder.</span></span>

### <a name="web-deploy-with-visual-studio"></a><span data-ttu-id="940df-388">Web Deploy mit Visual Studio</span><span class="sxs-lookup"><span data-stu-id="940df-388">Web Deploy with Visual Studio</span></span>

<span data-ttu-id="940df-389">Informationen zum Erstellen eines Veröffentlichungsprofils zur Verwendung mit Web Deploy finden Sie im Thema [Visual Studio publish profiles for ASP.NET Core app deployment (Visual Studio-Veröffentlichungsprofile zum Bereitstellen von ASP.NET Core-Apps)](xref:host-and-deploy/visual-studio-publish-profiles#publish-profiles).</span><span class="sxs-lookup"><span data-stu-id="940df-389">See the [Visual Studio publish profiles for ASP.NET Core app deployment](xref:host-and-deploy/visual-studio-publish-profiles#publish-profiles) topic to learn how to create a publish profile for use with Web Deploy.</span></span> <span data-ttu-id="940df-390">Wenn der Hostinganbieter ein Veröffentlichungsprofil oder Unterstützung für das Erstellen eines solchen Profils bereitstellt, laden Sie dessen Profil herunter, und importieren Sie es mithilfe des Visual Studio-Dialogfelds **Veröffentlichen**:</span><span class="sxs-lookup"><span data-stu-id="940df-390">If the hosting provider provides a Publish Profile or support for creating one, download their profile and import it using the Visual Studio **Publish** dialog:</span></span>

![Dialogfeld „Veröffentlichen“](index/_static/pub-dialog.png)

### <a name="web-deploy-outside-of-visual-studio"></a><span data-ttu-id="940df-392">Web Deploy außerhalb von Visual Studio</span><span class="sxs-lookup"><span data-stu-id="940df-392">Web Deploy outside of Visual Studio</span></span>

<span data-ttu-id="940df-393">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) kann über die Befehlszeile auch außerhalb von Visual Studio verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="940df-393">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) can also be used outside of Visual Studio from the command line.</span></span> <span data-ttu-id="940df-394">Weitere Informationen finden Sie unter [Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool) (Webbereitstellungstool).</span><span class="sxs-lookup"><span data-stu-id="940df-394">For more information, see [Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span></span>

### <a name="alternatives-to-web-deploy"></a><span data-ttu-id="940df-395">Alternativen zu Web Deploy</span><span class="sxs-lookup"><span data-stu-id="940df-395">Alternatives to Web Deploy</span></span>

<span data-ttu-id="940df-396">Verwenden Sie eine der folgenden Methoden, um die App in das Hostsystem zu verschieben: manuelles Kopieren, [Xcopy](/windows-server/administration/windows-commands/xcopy), [Robocopy](/windows-server/administration/windows-commands/robocopy) oder [PowerShell](/powershell/).</span><span class="sxs-lookup"><span data-stu-id="940df-396">Use any of several methods to move the app to the hosting system, such as manual copy, [Xcopy](/windows-server/administration/windows-commands/xcopy), [Robocopy](/windows-server/administration/windows-commands/robocopy), or [PowerShell](/powershell/).</span></span>

<span data-ttu-id="940df-397">Weitere Informationen zum Bereitstellen von ASP.NET Core in IIS finden Sie im nachfolgenden Abschnitt [Bereitstellungsressourcen für IIS-Administratoren](#deployment-resources-for-iis-administrators).</span><span class="sxs-lookup"><span data-stu-id="940df-397">For more information on ASP.NET Core deployment to IIS, see the [Deployment resources for IIS administrators](#deployment-resources-for-iis-administrators) section.</span></span>

## <a name="browse-the-website"></a><span data-ttu-id="940df-398">Navigieren auf der Website</span><span class="sxs-lookup"><span data-stu-id="940df-398">Browse the website</span></span>

<span data-ttu-id="940df-399">Senden Sie nach Abschluss der App-Bereitstellung auf dem Hostsystem eine Anforderung an einen der öffentlichen Endpunkte der App.</span><span class="sxs-lookup"><span data-stu-id="940df-399">After the app is deployed to the hosting system, make a request to one of the app's public endpoints.</span></span>

<span data-ttu-id="940df-400">Im folgenden Beispiel ist die Website an den IIS-**Hostnamen** von `www.mysite.com` auf **Port** `80` gebunden.</span><span class="sxs-lookup"><span data-stu-id="940df-400">In the following example, the site is bound to an IIS **Host name** of `www.mysite.com` on **Port** `80`.</span></span> <span data-ttu-id="940df-401">Es wird eine Anforderung an `http://www.mysite.com` gesendet:</span><span class="sxs-lookup"><span data-stu-id="940df-401">A request is made to `http://www.mysite.com`:</span></span>

![Der Microsoft Edge-Browser hat die IIS-Startseite geladen.](index/_static/browsewebsite.png)

## <a name="locked-deployment-files"></a><span data-ttu-id="940df-403">Gesperrte Bereitstellungsdateien</span><span class="sxs-lookup"><span data-stu-id="940df-403">Locked deployment files</span></span>

<span data-ttu-id="940df-404">Die Dateien im Bereitstellungsordner werden gesperrt, wenn die App ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="940df-404">Files in the deployment folder are locked when the app is running.</span></span> <span data-ttu-id="940df-405">Gesperrte Dateien können während der Bereitstellung nicht überschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="940df-405">Locked files can't be overwritten during deployment.</span></span> <span data-ttu-id="940df-406">Um gesperrte Dateien in einer Bereitstellung freizugeben, beenden Sie den App-Pool mit **einer** der folgenden Methoden:</span><span class="sxs-lookup"><span data-stu-id="940df-406">To release locked files in a deployment, stop the app pool using **one** of the following approaches:</span></span>

* <span data-ttu-id="940df-407">Verwenden Sie Web Deploy, und verweisen Sie auf `Microsoft.NET.Sdk.Web` in der Projektdatei.</span><span class="sxs-lookup"><span data-stu-id="940df-407">Use Web Deploy and reference `Microsoft.NET.Sdk.Web` in the project file.</span></span> <span data-ttu-id="940df-408">Eine Datei namens *app_offline.htm* befindet sich im Stammverzeichnis des Web-App-Verzeichnisses.</span><span class="sxs-lookup"><span data-stu-id="940df-408">An *app_offline.htm* file is placed at the root of the web app directory.</span></span> <span data-ttu-id="940df-409">Wenn die Datei vorhanden ist, fährt das ASP.NET Core Module die App ordnungsgemäß herunter und verarbeitet die Datei *app_offline.htm* während der Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="940df-409">When the file is present, the ASP.NET Core Module gracefully shuts down the app and serves the *app_offline.htm* file during the deployment.</span></span> <span data-ttu-id="940df-410">Weitere Informationen finden Sie unter [Konfigurationsreferenz für das ASP.NET Core-Modul](xref:host-and-deploy/aspnet-core-module#app_offlinehtm).</span><span class="sxs-lookup"><span data-stu-id="940df-410">For more information, see the [ASP.NET Core Module configuration reference](xref:host-and-deploy/aspnet-core-module#app_offlinehtm).</span></span>
* <span data-ttu-id="940df-411">Beenden Sie den App-Pool im IIS-Manager auf dem Server manuell.</span><span class="sxs-lookup"><span data-stu-id="940df-411">Manually stop the app pool in the IIS Manager on the server.</span></span>
* <span data-ttu-id="940df-412">Verwenden Sie PowerShell, um *app_offline.htm* abzulegen (erfordert PowerShell 5 oder höher):</span><span class="sxs-lookup"><span data-stu-id="940df-412">Use PowerShell to drop *app_offline.htm* (requires PowerShell 5 or later):</span></span>

  ```PowerShell
  $pathToApp = 'PATH_TO_APP'

  # Stop the AppPool
  New-Item -Path $pathToApp app_offline.htm

  # Provide script commands here to deploy the app

  # Restart the AppPool
  Remove-Item -Path $pathToApp app_offline.htm

  ```

## <a name="data-protection"></a><span data-ttu-id="940df-413">Schutz von Daten</span><span class="sxs-lookup"><span data-stu-id="940df-413">Data protection</span></span>

<span data-ttu-id="940df-414">Der [ASP.NET Core-Stapel zum Schutz von Daten](xref:security/data-protection/introduction) wird von mehreren ASP.NET-[Middlewarekomponenten](xref:fundamentals/middleware/index) genutzt, darunter auch von Middleware, die bei der Authentifizierung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="940df-414">The [ASP.NET Core Data Protection stack](xref:security/data-protection/introduction) is used by several ASP.NET Core [middlewares](xref:fundamentals/middleware/index), including middleware used in authentication.</span></span> <span data-ttu-id="940df-415">Selbst wenn die APIs zum Schutz von Daten nicht aus dem Benutzercode aufgerufen werden, sollte der Schutz von Daten mit einem Bereitstellungsskript oder im Benutzercode konfiguriert werden, um einen persistenten kryptografischen [Schlüsselspeicher](xref:security/data-protection/implementation/key-management) zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="940df-415">Even if Data Protection APIs aren't called by user code, data protection should be configured with a deployment script or in user code to create a persistent cryptographic [key store](xref:security/data-protection/implementation/key-management).</span></span> <span data-ttu-id="940df-416">Wenn der Schutz von Daten nicht konfiguriert ist, werden die Schlüssel beim Neustarten der App im Arbeitsspeicher gespeichert und verworfen.</span><span class="sxs-lookup"><span data-stu-id="940df-416">If data protection isn't configured, the keys are held in memory and discarded when the app restarts.</span></span>

<span data-ttu-id="940df-417">Falls der Schlüsselbund im Arbeitsspeicher gespeichert wird, wenn die App neu gestartet wird, gilt Folgendes:</span><span class="sxs-lookup"><span data-stu-id="940df-417">If the key ring is stored in memory when the app restarts:</span></span>

* <span data-ttu-id="940df-418">Alle cookiebasierten Authentifizierungstoken für ungültig erklärt.</span><span class="sxs-lookup"><span data-stu-id="940df-418">All cookie-based authentication tokens are invalidated.</span></span> 
* <span data-ttu-id="940df-419">Benutzer müssen sich bei ihrer nächsten Anforderung erneut anmelden.</span><span class="sxs-lookup"><span data-stu-id="940df-419">Users are required to sign in again on their next request.</span></span> 
* <span data-ttu-id="940df-420">Alle mit dem Schlüsselbund geschützte Daten können nicht mehr entschlüsselt werden.</span><span class="sxs-lookup"><span data-stu-id="940df-420">Any data protected with the key ring can no longer be decrypted.</span></span> <span data-ttu-id="940df-421">Dies kann [CSRF-Token](xref:security/anti-request-forgery#aspnet-core-antiforgery-configuration) und [ASP.NET Core-MVC-TempData-Cookies](xref:fundamentals/app-state#tempdata) einschließen.</span><span class="sxs-lookup"><span data-stu-id="940df-421">This may include [CSRF tokens](xref:security/anti-request-forgery#aspnet-core-antiforgery-configuration) and [ASP.NET Core MVC TempData cookies](xref:fundamentals/app-state#tempdata).</span></span>

<span data-ttu-id="940df-422">Zum Konfigurieren des Schutzes von Daten unter IIS mithilfe des persistenten Schlüsselbunds verwenden Sie **einen** der folgenden Ansätze:</span><span class="sxs-lookup"><span data-stu-id="940df-422">To configure data protection under IIS to persist the key ring, use **one** of the following approaches:</span></span>

* <span data-ttu-id="940df-423">**Erstellen einer Registrierungsstruktur für den Schutz von Daten**</span><span class="sxs-lookup"><span data-stu-id="940df-423">**Create Data Protection Registry Keys**</span></span>

  <span data-ttu-id="940df-424">Schlüssel für den Schutz von Daten, die von ASP.NET Core-Apps verwendet werden, werden in der Registrierung außerhalb der Apps gespeichert.</span><span class="sxs-lookup"><span data-stu-id="940df-424">Data protection keys used by ASP.NET Core apps are stored in the registry external to the apps.</span></span> <span data-ttu-id="940df-425">Um die Schlüssel für eine bestimmte App zu dauerhaft zu speichern, müssen Sie Registrierungsschlüssel für den App-Pool erstellen.</span><span class="sxs-lookup"><span data-stu-id="940df-425">To persist the keys for a given app, create registry keys for the app pool.</span></span>

  <span data-ttu-id="940df-426">Bei eigenständigen IIS-Installationen, die ohne Webfarm vorgesehen sind, kann das [PowerShell-Skript „Provision-AutoGenKeys.ps1“ für den Schutz von Daten](https://github.com/dotnet/AspNetCore/blob/master/src/DataProtection/Provision-AutoGenKeys.ps1) für jeden App-Pool genutzt werden, das mit einer ASP.NET Core-App verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="940df-426">For standalone, non-webfarm IIS installations, the [Data Protection Provision-AutoGenKeys.ps1 PowerShell script](https://github.com/dotnet/AspNetCore/blob/master/src/DataProtection/Provision-AutoGenKeys.ps1) can be used for each app pool used with an ASP.NET Core app.</span></span> <span data-ttu-id="940df-427">Dieses Skript erstellt einen Registrierungsschlüssel in der HKLM-Registrierung, der nur für das Workerprozesskonto des App-Pools der App zugänglich ist.</span><span class="sxs-lookup"><span data-stu-id="940df-427">This script creates a registry key in the HKLM registry that's accessible only to the worker process account of the app's app pool.</span></span> <span data-ttu-id="940df-428">Schlüssel werden in ruhendem Zustand mit DPAPI mit einem computerweiten Schlüssel verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="940df-428">Keys are encrypted at rest using DPAPI with a machine-wide key.</span></span>

  <span data-ttu-id="940df-429">In Webfarmszenarios kann eine App so konfiguriert werden, dass sie einen UNC-Pfad verwendet, um den Schlüsselbund für den Schutz von Daten zu speichern.</span><span class="sxs-lookup"><span data-stu-id="940df-429">In web farm scenarios, an app can be configured to use a UNC path to store its data protection key ring.</span></span> <span data-ttu-id="940df-430">Standardmäßig werden die Schlüssel für den Schutz von Daten nicht verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="940df-430">By default, the data protection keys aren't encrypted.</span></span> <span data-ttu-id="940df-431">Stellen Sie sicher, dass die Dateiberechtigungen für die Netzwerkfreigabe auf das Windows-Konto beschränkt sind, mit dem die App ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="940df-431">Ensure that the file permissions for the network share are limited to the Windows account the app runs under.</span></span> <span data-ttu-id="940df-432">Ein X.509-Zertifikat kann zum Schutz von Schlüsseln im ruhenden Zustand verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="940df-432">An X509 certificate can be used to protect keys at rest.</span></span> <span data-ttu-id="940df-433">Richten Sie ggf. einen Mechanismus ein, um es Benutzern zu ermöglichen, Zertifikate hochzuladen: Platzieren Sie Zertifikate im Zertifikatspeicher des Benutzers für vertrauenswürdige Anbieter, und stellen Sie sicher, dass sie auf allen Computern verfügbar sind, auf denen die App des Benutzers ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="940df-433">Consider a mechanism to allow users to upload certificates: Place certificates into the user's trusted certificate store and ensure they're available on all machines where the user's app runs.</span></span> <span data-ttu-id="940df-434">Details finden Sie unter [Konfigurieren des Schutzes von Daten in ASP.NET Core](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="940df-434">See [Configure ASP.NET Core Data Protection](xref:security/data-protection/configuration/overview) for details.</span></span>

* <span data-ttu-id="940df-435">**Konfigurieren des IIS-Anwendungspools zum Laden des Benutzerprofils**</span><span class="sxs-lookup"><span data-stu-id="940df-435">**Configure the IIS Application Pool to load the user profile**</span></span>

  <span data-ttu-id="940df-436">Diese Einstellung befindet sich im Abschnitt **Prozessmodell** unter **Erweiterte Einstellungen** für den App-Pool.</span><span class="sxs-lookup"><span data-stu-id="940df-436">This setting is in the **Process Model** section under the **Advanced Settings** for the app pool.</span></span> <span data-ttu-id="940df-437">Legen Sie **Benutzerprofil laden** auf `True` fest.</span><span class="sxs-lookup"><span data-stu-id="940df-437">Set **Load User Profile** to `True`.</span></span> <span data-ttu-id="940df-438">Wenn diese Option auf `True` festgelegt ist, werden Schlüssel im Benutzerprofilverzeichnis gespeichert und mit DPAPI mit einem für das Benutzerkonto spezifischen Schlüssel geschützt.</span><span class="sxs-lookup"><span data-stu-id="940df-438">When set to `True`, keys are stored in the user profile directory and protected using DPAPI with a key specific to the user account.</span></span> <span data-ttu-id="940df-439">Schlüssel werden im Ordner *%LOCALAPPDATA%/ASP.NET/DataProtection-Keys* gespeichert.</span><span class="sxs-lookup"><span data-stu-id="940df-439">Keys are persisted to the *%LOCALAPPDATA%/ASP.NET/DataProtection-Keys* folder.</span></span>

  <span data-ttu-id="940df-440">Das [setProfileEnvironment-Attribut](/iis/configuration/system.applicationhost/applicationpools/add/processmodel#configuration) des App-Pools muss ebenfalls aktiviert sein.</span><span class="sxs-lookup"><span data-stu-id="940df-440">The app pool's [setProfileEnvironment attribute](/iis/configuration/system.applicationhost/applicationpools/add/processmodel#configuration) must also be enabled.</span></span> <span data-ttu-id="940df-441">Der Standardwert von `setProfileEnvironment` ist `true`.</span><span class="sxs-lookup"><span data-stu-id="940df-441">The default value of `setProfileEnvironment` is `true`.</span></span> <span data-ttu-id="940df-442">In einigen Szenarien (z.B. Windows-Betriebssystem) ist `setProfileEnvironment` auf `false` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="940df-442">In some scenarios (for example, Windows OS), `setProfileEnvironment` is set to `false`.</span></span> <span data-ttu-id="940df-443">Gehen Sie folgendermaßen vor, wenn Schlüssel nicht wie erwartet im Benutzerprofilverzeichnis gespeichert werden:</span><span class="sxs-lookup"><span data-stu-id="940df-443">If keys aren't stored in the user profile directory as expected:</span></span>

  1. <span data-ttu-id="940df-444">Navigieren Sie zum Ordner *%windir%/system32/inetsrv/config*.</span><span class="sxs-lookup"><span data-stu-id="940df-444">Navigate to the *%windir%/system32/inetsrv/config* folder.</span></span>
  1. <span data-ttu-id="940df-445">Öffnen Sie die Datei *applicationHost.config*.</span><span class="sxs-lookup"><span data-stu-id="940df-445">Open the *applicationHost.config* file.</span></span>
  1. <span data-ttu-id="940df-446">Suchen Sie das Element `<system.applicationHost><applicationPools><applicationPoolDefaults><processModel>` .</span><span class="sxs-lookup"><span data-stu-id="940df-446">Locate the `<system.applicationHost><applicationPools><applicationPoolDefaults><processModel>` element.</span></span>
  1. <span data-ttu-id="940df-447">Bestätigen Sie, dass das `setProfileEnvironment`-Attribut nicht vorhanden ist, das standardmäßig den Wert `true` aufweist, oder legen Sie den Wert des Attributs explizit auf `true` fest.</span><span class="sxs-lookup"><span data-stu-id="940df-447">Confirm that the `setProfileEnvironment` attribute isn't present, which defaults the value to `true`, or explicitly set the attribute's value to `true`.</span></span>

* <span data-ttu-id="940df-448">**Verwenden des Dateisystems als Schlüsselbundspeicher**</span><span class="sxs-lookup"><span data-stu-id="940df-448">**Use the file system as a key ring store**</span></span>

  <span data-ttu-id="940df-449">Passen Sie den App-Code so an, dass er [das Dateisystem als Schlüsselbundspeicher verwendet](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="940df-449">Adjust the app code to [use the file system as a key ring store](xref:security/data-protection/configuration/overview).</span></span> <span data-ttu-id="940df-450">Verwenden Sie ein X.509-Zertifikat, um den Schlüsselbund zu schützen, und stellen Sie sicher, dass es sich bei dem Zertifikat um ein vertrauenswürdiges Zertifikat handelt.</span><span class="sxs-lookup"><span data-stu-id="940df-450">Use an X509 certificate to protect the key ring and ensure the certificate is a trusted certificate.</span></span> <span data-ttu-id="940df-451">Wenn es sich um ein selbstsigniertes Zertifikat handelt, müssen Sie es im vertrauenswürdigen Stammspeicher platzieren.</span><span class="sxs-lookup"><span data-stu-id="940df-451">If the certificate is self-signed, place the certificate in the Trusted Root store.</span></span>

  <span data-ttu-id="940df-452">Wenn IIS in einer Webfarm verwendet wird:</span><span class="sxs-lookup"><span data-stu-id="940df-452">When using IIS in a web farm:</span></span>

  * <span data-ttu-id="940df-453">Verwenden Sie eine Dateifreigabe, auf die alle Computer zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="940df-453">Use a file share that all machines can access.</span></span>
  * <span data-ttu-id="940df-454">Stellen Sie ein X509-Zertifikat auf jedem Computer bereit.</span><span class="sxs-lookup"><span data-stu-id="940df-454">Deploy an X509 certificate to each machine.</span></span> <span data-ttu-id="940df-455">Konfigurieren Sie den [Schutz von Daten im Code](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="940df-455">Configure [data protection in code](xref:security/data-protection/configuration/overview).</span></span>

* <span data-ttu-id="940df-456">**Festlegen einer computerweiten Richtlinie für den Schutz von Daten**</span><span class="sxs-lookup"><span data-stu-id="940df-456">**Set a machine-wide policy for data protection**</span></span>

  <span data-ttu-id="940df-457">Das System zum Schutz von Daten verfügt über eine eingeschränkte Unterstützung zum Festlegen einer [computerweiten Standardrichtlinie](xref:security/data-protection/configuration/machine-wide-policy) für alle Apps, die die Datenschutz-APIs nutzen.</span><span class="sxs-lookup"><span data-stu-id="940df-457">The data protection system has limited support for setting a default [machine-wide policy](xref:security/data-protection/configuration/machine-wide-policy) for all apps that consume the Data Protection APIs.</span></span> <span data-ttu-id="940df-458">Weitere Informationen finden Sie unter <xref:security/data-protection/introduction>.</span><span class="sxs-lookup"><span data-stu-id="940df-458">For more information, see <xref:security/data-protection/introduction>.</span></span>

## <a name="virtual-directories"></a><span data-ttu-id="940df-459">Virtuelle Verzeichnisse</span><span class="sxs-lookup"><span data-stu-id="940df-459">Virtual Directories</span></span>

<span data-ttu-id="940df-460">[Virtuelle IIS-Verzeichnisse](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#virtual-directories) werden mit ASP.NET Core-Apps nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="940df-460">[IIS Virtual Directories](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#virtual-directories) aren't supported with ASP.NET Core apps.</span></span> <span data-ttu-id="940df-461">Eine App kann als [untergeordnete Anwendung](#sub-applications) gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="940df-461">An app can be hosted as a [sub-application](#sub-applications).</span></span>

## <a name="sub-applications"></a><span data-ttu-id="940df-462">Untergeordnete Anwendungen</span><span class="sxs-lookup"><span data-stu-id="940df-462">Sub-applications</span></span>

<span data-ttu-id="940df-463">Eine ASP.NET Core-App kann als [untergeordnete IIS-Anwendung (untergeordnete App)](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#applications) gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="940df-463">An ASP.NET Core app can be hosted as an [IIS sub-application (sub-app)](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#applications).</span></span> <span data-ttu-id="940df-464">Der Pfad der untergeordneten App wird ein Teil der URL der Stamm-App.</span><span class="sxs-lookup"><span data-stu-id="940df-464">The sub-app's path becomes part of the root app's URL.</span></span>

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="940df-465">Eine untergeordnete App sollte kein ASP.NET Core-Modul als Handler enthalten.</span><span class="sxs-lookup"><span data-stu-id="940df-465">A sub-app shouldn't include the ASP.NET Core Module as a handler.</span></span> <span data-ttu-id="940df-466">Wenn das Modul als Handler in einer *web.config* einer untergeordneten App hinzugefügt wird, erhalten Sie beim Versuch, zur untergeordneten App zu navigieren, den Fehler *500.19: Interner Serverfehler*. Dieser verweist auf die fehlerhafte Konfigurationsdatei.</span><span class="sxs-lookup"><span data-stu-id="940df-466">If the module is added as a handler in a sub-app's *web.config* file, a *500.19 Internal Server Error* referencing the faulty config file is received when attempting to browse the sub-app.</span></span>

<span data-ttu-id="940df-467">Das folgende Beispiel zeigt den Inhalt einer veröffentlichten Datei *web.config* für eine untergeordnete ASP.NET Core-App:</span><span class="sxs-lookup"><span data-stu-id="940df-467">The following example shows a published *web.config* file for an ASP.NET Core sub-app:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <aspNetCore processPath="dotnet" 
      arguments=".\MyApp.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="940df-468">Wenn Sie eine untergeordnete App ohne ASP.NET Core unterhalb einer ASP.NET Core-App hosten, entfernen Sie den geerbten Handler ausdrücklich aus der Datei *web.config* der untergeordneten App:</span><span class="sxs-lookup"><span data-stu-id="940df-468">When hosting a non-ASP.NET Core sub-app underneath an ASP.NET Core app, explicitly remove the inherited handler in the sub-app's *web.config* file:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <handlers>
      <remove name="aspNetCore" />
    </handlers>
    <aspNetCore processPath="dotnet" 
      arguments=".\MyApp.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

::: moniker-end

<span data-ttu-id="940df-469">Statische Assetlinks in der untergeordneten App sollten die Tilde/Schrägstrich-Notation verwenden (`~/`).</span><span class="sxs-lookup"><span data-stu-id="940df-469">Static asset links within the sub-app should use tilde-slash (`~/`) notation.</span></span> <span data-ttu-id="940df-470">Die Tilde/Schrägstrich-Notation löst ein [Taghilfsprogramm](xref:mvc/views/tag-helpers/intro) aus, um die Pfadbasis der untergeordneten App dem gerenderten relativen Link voranzustellen.</span><span class="sxs-lookup"><span data-stu-id="940df-470">Tilde-slash notation triggers a [Tag Helper](xref:mvc/views/tag-helpers/intro) to prepend the sub-app's pathbase to the rendered relative link.</span></span> <span data-ttu-id="940df-471">Für eine untergeordnete App unter `/subapp_path` wird ein mit `src="~/image.png"` verknüpftes Bild als `src="/subapp_path/image.png"` gerendert.</span><span class="sxs-lookup"><span data-stu-id="940df-471">For a sub-app at `/subapp_path`, an image linked with `src="~/image.png"` is rendered as `src="/subapp_path/image.png"`.</span></span> <span data-ttu-id="940df-472">Die Static File Middleware verarbeitet die Anforderung der statischen Datei nicht.</span><span class="sxs-lookup"><span data-stu-id="940df-472">The root app's Static File Middleware doesn't process the static file request.</span></span> <span data-ttu-id="940df-473">Die Anforderung wird von der Static File Middleware der untergeordneten App verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="940df-473">The request is processed by the sub-app's Static File Middleware.</span></span>

<span data-ttu-id="940df-474">Wenn das `src`-Attribut eines statischen Objekts auf einen absoluten Pfad festgelegt wird (z.B. `src="/image.png"`), wird der Link ohne die Pfadbasis der untergeordneten App gerendert.</span><span class="sxs-lookup"><span data-stu-id="940df-474">If a static asset's `src` attribute is set to an absolute path (for example, `src="/image.png"`), the link is rendered without the sub-app's pathbase.</span></span> <span data-ttu-id="940df-475">Die Middleware für statische Dateien der Stamm-App versucht, das Objekt vom [Webstamm](xref:fundamentals/index#web-root) der Stamm-App aus bereitzustellen, was zu einer *404 Nicht gefunden*-Antwort führt, solange das statische Objekt in der Stamm-App nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="940df-475">The root app's Static File Middleware attempts to serve the asset from the root app's [web root](xref:fundamentals/index#web-root), which results in a *404 - Not Found* response unless the static asset is available from the root app.</span></span>

<span data-ttu-id="940df-476">So hosten Sie eine ASP.NET Core-App als untergeordnete App unter einer anderen ASP.NET Core-App:</span><span class="sxs-lookup"><span data-stu-id="940df-476">To host an ASP.NET Core app as a sub-app under another ASP.NET Core app:</span></span>

1. <span data-ttu-id="940df-477">Richten Sie einen App-Pool für die untergeordnete App ein.</span><span class="sxs-lookup"><span data-stu-id="940df-477">Establish an app pool for the sub-app.</span></span> <span data-ttu-id="940df-478">Legen Sie die **.NET CLR-Version** auf **Kein verwalteter Code** fest, weil die Core Common Language Runtime (CoreCLR) für .NET Core gestartet wird, um die App im Workerprozess zu hosten, nicht der Desktop-CLR (.NET CLR).</span><span class="sxs-lookup"><span data-stu-id="940df-478">Set the **.NET CLR Version** to **No Managed Code** because the Core Common Language Runtime (CoreCLR) for .NET Core is booted to host the app in the worker process, not the desktop CLR (.NET CLR).</span></span>

1. <span data-ttu-id="940df-479">Fügen Sie die Stammwebsite im IIS-Manager mit der untergeordneten App in einem unter der Stammwebsite liegenden Ordner hinzu.</span><span class="sxs-lookup"><span data-stu-id="940df-479">Add the root site in IIS Manager with the sub-app in a folder under the root site.</span></span>

1. <span data-ttu-id="940df-480">Klicken Sie mit der rechten Maustaste im IIS-Manager auf den Ordner der untergeordneten App, und wählen Sie **In Anwendung konvertieren** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-480">Right-click the sub-app folder in IIS Manager and select **Convert to Application**.</span></span>

1. <span data-ttu-id="940df-481">Weisen Sie im Dialogfeld **Anwendung hinzufügen** mit der Schaltfläche **Auswählen** den **Anwendungspool** dem App-Pool zu, den Sie für die untergeordnete App erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="940df-481">In the **Add Application** dialog, use the **Select** button for the **Application Pool** to assign the app pool that you created for the sub-app.</span></span> <span data-ttu-id="940df-482">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="940df-482">Select **OK**.</span></span>

<span data-ttu-id="940df-483">Die Zuweisung eines separaten App-Pools zur untergeordneten App ist eine Anforderung, wenn Sie das In-Process-Hostingmodell verwenden.</span><span class="sxs-lookup"><span data-stu-id="940df-483">The assignment of a separate app pool to the sub-app is a requirement when using the in-process hosting model.</span></span>

<span data-ttu-id="940df-484">Weitere Informationen zum In-Process-Hostingmodell und Konfigurieren des ASP.NET Core-Moduls finden Sie unter <xref:host-and-deploy/aspnet-core-module>.</span><span class="sxs-lookup"><span data-stu-id="940df-484">For more information on the in-process hosting model and configuring the ASP.NET Core Module, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="940df-485">Konfiguration von IIS mit der Datei „web.config“</span><span class="sxs-lookup"><span data-stu-id="940df-485">Configuration of IIS with web.config</span></span>

<span data-ttu-id="940df-486">Die IIS-Konfiguration wird von dem Abschnitt `<system.webServer>` der Datei *web.config* für IIS-Szenarien beeinflusst, die für ASP.NET Core-Apps mit dem ASP.NET Core-Modul funktional sind.</span><span class="sxs-lookup"><span data-stu-id="940df-486">IIS configuration is influenced by the `<system.webServer>` section of *web.config* for IIS scenarios that are functional for ASP.NET Core apps with the ASP.NET Core Module.</span></span> <span data-ttu-id="940df-487">Beispielsweise eignet sich die IIS-Konfiguration für dynamische Komprimierung.</span><span class="sxs-lookup"><span data-stu-id="940df-487">For example, IIS configuration is functional for dynamic compression.</span></span> <span data-ttu-id="940df-488">Wenn IIS auf Serverebene für die Verwendung der dynamischen Komprimierung konfiguriert ist, kann diese Einstellung mit dem `<urlCompression>`-Element in der Datei *web.config* der App für eine ASP.NET Core-App deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="940df-488">If IIS is configured at the server level to use dynamic compression, the `<urlCompression>` element in the app's *web.config* file can disable it for an ASP.NET Core app.</span></span>

<span data-ttu-id="940df-489">Weitere Informationen finden Sie unter den folgenden Themen:</span><span class="sxs-lookup"><span data-stu-id="940df-489">For more information, see the following topics:</span></span>

* [<span data-ttu-id="940df-490">Konfigurationsreferenz für \<system.webServer></span><span class="sxs-lookup"><span data-stu-id="940df-490">Configuration reference for \<system.webServer></span></span>](/iis/configuration/system.webServer/)
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/iis/modules>

<span data-ttu-id="940df-491">Um Umgebungsvariablen für einzelne Apps festzulegen, die in isolierten App-Pools ausgeführt werden (unterstützt für IIS 10.0 oder höher), lesen Sie den Abschnitt zum *Befehl „AppCmd.exe“* im Thema [Umgebungsvariablen \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) in der IIS-Referenzdokumentation.</span><span class="sxs-lookup"><span data-stu-id="940df-491">To set environment variables for individual apps running in isolated app pools (supported for IIS 10.0 or later), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="940df-492">Konfigurationsabschnitte von „web.config“</span><span class="sxs-lookup"><span data-stu-id="940df-492">Configuration sections of web.config</span></span>

<span data-ttu-id="940df-493">Konfigurationsabschnitte von ASP.NET 4.x-Apps in der Datei *web.config* werden von ASP.NET Core-Apps nicht zur Konfiguration verwendet:</span><span class="sxs-lookup"><span data-stu-id="940df-493">Configuration sections of ASP.NET 4.x apps in *web.config* aren't used by ASP.NET Core apps for configuration:</span></span>

* `<system.web>`
* `<appSettings>`
* `<connectionStrings>`
* `<location>`

<span data-ttu-id="940df-494">ASP.NET Core-Apps werden mit anderen Konfigurationsanbietern konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="940df-494">ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="940df-495">Weitere Informationen finden Sie unter [Konfiguration](xref:fundamentals/configuration/index).</span><span class="sxs-lookup"><span data-stu-id="940df-495">For more information, see [Configuration](xref:fundamentals/configuration/index).</span></span>

## <a name="application-pools"></a><span data-ttu-id="940df-496">Anwendungspools</span><span class="sxs-lookup"><span data-stu-id="940df-496">Application Pools</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="940df-497">Die App-Poolisolation wird durch das Hostingmodell bestimmt.</span><span class="sxs-lookup"><span data-stu-id="940df-497">App pool isolation is determined by the hosting model:</span></span>

* <span data-ttu-id="940df-498">In-Process-Hosting: Apps müssen in separaten App-Pools ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="940df-498">In-process hosting &ndash; Apps are required to run in separate app pools.</span></span>
* <span data-ttu-id="940df-499">Out-of-Process-Hosting: Es wird empfohlen, die Apps voneinander zu isolieren, indem Sie jede App in ihrem eigenen App-Pool ausführen.</span><span class="sxs-lookup"><span data-stu-id="940df-499">Out-of-process hosting &ndash; We recommend isolating the apps from each other by running each app in its own app pool.</span></span>

<span data-ttu-id="940df-500">Im IIS-Dialogfeld **Website hinzufügen** wird standardmäßig ein einzelner App-Pool pro App eingesetzt.</span><span class="sxs-lookup"><span data-stu-id="940df-500">The IIS **Add Website** dialog defaults to a single app pool per app.</span></span> <span data-ttu-id="940df-501">Wenn ein **Websitename** angegeben ist, wird der Text automatisch in das Textfeld **Anwendungspool** übertragen.</span><span class="sxs-lookup"><span data-stu-id="940df-501">When a **Site name** is provided, the text is automatically transferred to the **Application pool** textbox.</span></span> <span data-ttu-id="940df-502">Ein neuer App-Pool mit dem Namen der Website wird erstellt, wenn die Website hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="940df-502">A new app pool is created using the site name when the site is added.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="940df-503">Wenn Sie mehrere Websites auf einem Server hosten, wird empfohlen, die Apps voneinander zu isolieren, indem Sie jede App in ihrem eigenen App-Pool ausführen.</span><span class="sxs-lookup"><span data-stu-id="940df-503">When hosting multiple websites on a server, we recommend isolating the apps from each other by running each app in its own app pool.</span></span> <span data-ttu-id="940df-504">Im IIS-Dialogfeld **Website hinzufügen** wird standardmäßig diese Konfiguration eingesetzt.</span><span class="sxs-lookup"><span data-stu-id="940df-504">The IIS **Add Website** dialog defaults to this configuration.</span></span> <span data-ttu-id="940df-505">Wenn ein **Websitename** angegeben ist, wird der Text automatisch in das Textfeld **Anwendungspool** übertragen.</span><span class="sxs-lookup"><span data-stu-id="940df-505">When a **Site name** is provided, the text is automatically transferred to the **Application pool** textbox.</span></span> <span data-ttu-id="940df-506">Ein neuer App-Pool mit dem Namen der Website wird erstellt, wenn die Website hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="940df-506">A new app pool is created using the site name when the site is added.</span></span>

::: moniker-end

## <a name="application-pool-identity"></a><span data-ttu-id="940df-507">Identität des Anwendungspools</span><span class="sxs-lookup"><span data-stu-id="940df-507">Application Pool Identity</span></span>

<span data-ttu-id="940df-508">Mit einem Konto für die Identität des App-Pools können Sie eine App unter einem eindeutigen Konto ausführen, ohne Domänen oder lokale Konten erstellen und verwalten zu müssen.</span><span class="sxs-lookup"><span data-stu-id="940df-508">An app pool identity account allows an app to run under a unique account without having to create and manage domains or local accounts.</span></span> <span data-ttu-id="940df-509">Unter IIS 8.0 oder höher erstellt der IIS-Administratorworkerprozess (WAS) ein virtuelles Konto mit dem Namen des neuen App-Pools und führt die Workerprozesse des App-Pools standardmäßig unter diesem Konto aus.</span><span class="sxs-lookup"><span data-stu-id="940df-509">On IIS 8.0 or later, the IIS Admin Worker Process (WAS) creates a virtual account with the name of the new app pool and runs the app pool's worker processes under this account by default.</span></span> <span data-ttu-id="940df-510">Stellen Sie sicher, dass in der IIS-Verwaltungskonsole unter **Erweiterte Einstellungen** für den App-Pool die **Identität** auf **ApplicationPoolIdentity** festgelegt ist:</span><span class="sxs-lookup"><span data-stu-id="940df-510">In the IIS Management Console under **Advanced Settings** for the app pool, ensure that the **Identity** is set to use **ApplicationPoolIdentity**:</span></span>

![Dialogfeld „Erweiterte Einstellungen“ für den Anwendungspool](index/_static/apppool-identity.png)

<span data-ttu-id="940df-512">Der IIS-Verwaltungsprozess erstellt im Windows-Sicherheitssystem einen sicheren Bezeichner mit dem Namen des App-Pools.</span><span class="sxs-lookup"><span data-stu-id="940df-512">The IIS management process creates a secure identifier with the name of the app pool in the Windows Security System.</span></span> <span data-ttu-id="940df-513">Ressourcen können mithilfe dieser Identität geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="940df-513">Resources can be secured using this identity.</span></span> <span data-ttu-id="940df-514">Allerdings ist diese Identität kein echtes Benutzerkonto und wird in der Windows-Benutzerverwaltungskonsole nicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="940df-514">However, this identity isn't a real user account and doesn't show up in the Windows User Management Console.</span></span>

<span data-ttu-id="940df-515">Wenn der IIS-Workerprozess erhöhte Rechte für den Zugriff auf Ihre Anwendung erfordert, ändern Sie die Zugriffssteuerungsliste (ACL) für das Verzeichnis mit der App:</span><span class="sxs-lookup"><span data-stu-id="940df-515">If the IIS worker process requires elevated access to the app, modify the Access Control List (ACL) for the directory containing the app:</span></span>

1. <span data-ttu-id="940df-516">Öffnen Sie Windows Explorer, und navigieren Sie zum Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="940df-516">Open Windows Explorer and navigate to the directory.</span></span>

1. <span data-ttu-id="940df-517">Klicken Sie mit der rechten Maustaste auf das Verzeichnis, und klicken Sie auf **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="940df-517">Right-click on the directory and select **Properties**.</span></span>

1. <span data-ttu-id="940df-518">Klicken Sie auf der Registerkarte **Sicherheit** auf die Schaltfläche **Bearbeiten** und dann auf die Schaltfläche **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="940df-518">Under the **Security** tab, select the **Edit** button and then the **Add** button.</span></span>

1. <span data-ttu-id="940df-519">Wählen Sie die Schaltfläche **Speicherorte** aus, und stellen Sie sicher, dass das System ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="940df-519">Select the **Locations** button and make sure the system is selected.</span></span>

1. <span data-ttu-id="940df-520">Geben Sie im Bereich **Geben Sie die Namen der auszuwählenden Objekte ein** den Wert **IIS AppPool\\<Name_des_AppPools>** ein.</span><span class="sxs-lookup"><span data-stu-id="940df-520">Enter **IIS AppPool\\<app_pool_name>** in **Enter the object names to select** area.</span></span> <span data-ttu-id="940df-521">Klicken Sie auf die Schaltfläche **Namen überprüfen**.</span><span class="sxs-lookup"><span data-stu-id="940df-521">Select the **Check Names** button.</span></span> <span data-ttu-id="940df-522">Überprüfen Sie für *DefaultAppPool* die Namen mit **IIS AppPool\DefaultAppPool**.</span><span class="sxs-lookup"><span data-stu-id="940df-522">For the *DefaultAppPool* check the names using **IIS AppPool\DefaultAppPool**.</span></span> <span data-ttu-id="940df-523">Bei Auswahl der Schaltfläche **Namen überprüfen** wird im Bereich für Objektnamen der Wert **DefaultAppPool** angegeben.</span><span class="sxs-lookup"><span data-stu-id="940df-523">When the **Check Names** button is selected, a value of **DefaultAppPool** is indicated in the object names area.</span></span> <span data-ttu-id="940df-524">Es ist nicht möglich, den Namen des App-Pools direkt in den Bereich für Objektnamen einzugeben.</span><span class="sxs-lookup"><span data-stu-id="940df-524">It isn't possible to enter the app pool name directly into the object names area.</span></span> <span data-ttu-id="940df-525">Verwenden Sie das Format **IIS AppPool\\<Name_des_AppPools>** , wenn Sie die Objektnamen überprüfen.</span><span class="sxs-lookup"><span data-stu-id="940df-525">Use the **IIS AppPool\\<app_pool_name>** format when checking for the object name.</span></span>

   ![Dialogfeld „Benutzer oder Gruppen auswählen“ für den App-Ordner: Der Name des App-Pools, „DefaultAppPool“, wird an „IIS AppPool\"“ im Bereich der Objektnamen angehängt, bevor „Namen überprüfen“ ausgewählt wird.](index/_static/select-users-or-groups-1.png)

1. <span data-ttu-id="940df-527">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="940df-527">Select **OK**.</span></span>

   ![Dialogfeld „Benutzer oder Gruppen auswählen“ für den App-Ordner: Nach Auswahl von „Namen überprüfen“ wird der Objektname „DefaultAppPool“ im Bereich der Objektnamen angezeigt.](index/_static/select-users-or-groups-2.png)

1. <span data-ttu-id="940df-529">Standardmäßig sollten Lese- und Schreibberechtigungen gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="940df-529">Read &amp; execute permissions should be granted by default.</span></span> <span data-ttu-id="940df-530">Erteilen Sie weitere Berechtigungen, sofern erforderlich.</span><span class="sxs-lookup"><span data-stu-id="940df-530">Provide additional permissions as needed.</span></span>

<span data-ttu-id="940df-531">Zugriff kann auch über eine Eingabeaufforderung mit dem Tool **ICACLS** gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="940df-531">Access can also be granted at a command prompt using the **ICACLS** tool.</span></span> <span data-ttu-id="940df-532">Im folgenden Befehl wird als Beispiel *DefaultAppPool* verwendet:</span><span class="sxs-lookup"><span data-stu-id="940df-532">Using the *DefaultAppPool* as an example, the following command is used:</span></span>

```console
ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
```

<span data-ttu-id="940df-533">Weitere Informationen finden Sie im Thema [icacls](/windows-server/administration/windows-commands/icacls).</span><span class="sxs-lookup"><span data-stu-id="940df-533">For more information, see the [icacls](/windows-server/administration/windows-commands/icacls) topic.</span></span>

## <a name="http2-support"></a><span data-ttu-id="940df-534">HTTP/2-Unterstützung</span><span class="sxs-lookup"><span data-stu-id="940df-534">HTTP/2 support</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="940df-535">[HTTP/2](https://httpwg.org/specs/rfc7540.html) wird mit ASP.NET Core in den folgenden IIS-Bereitstellungsszenarien unterstützt:</span><span class="sxs-lookup"><span data-stu-id="940df-535">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is supported with ASP.NET Core in the following IIS deployment scenarios:</span></span>

* <span data-ttu-id="940df-536">In-Process</span><span class="sxs-lookup"><span data-stu-id="940df-536">In-process</span></span>
  * <span data-ttu-id="940df-537">Windows Server 2016/Windows 10 oder höher, IIS 10 oder höher</span><span class="sxs-lookup"><span data-stu-id="940df-537">Windows Server 2016/Windows 10 or later; IIS 10 or later</span></span>
  * <span data-ttu-id="940df-538">TLS 1.2-Verbindung oder höher</span><span class="sxs-lookup"><span data-stu-id="940df-538">TLS 1.2 or later connection</span></span>
* <span data-ttu-id="940df-539">Out-of-Process</span><span class="sxs-lookup"><span data-stu-id="940df-539">Out-of-process</span></span>
  * <span data-ttu-id="940df-540">Windows Server 2016/Windows 10 oder höher, IIS 10 oder höher</span><span class="sxs-lookup"><span data-stu-id="940df-540">Windows Server 2016/Windows 10 or later; IIS 10 or later</span></span>
  * <span data-ttu-id="940df-541">Öffentlich zugängliche Edge-Server-Verbindungen verwenden HTTP/2, aber die Reverseproxyverbindung mit dem [Kestrel-Server](xref:fundamentals/servers/kestrel) verwendet HTTP/1.1.</span><span class="sxs-lookup"><span data-stu-id="940df-541">Public-facing edge server connections use HTTP/2, but the reverse proxy connection to the [Kestrel server](xref:fundamentals/servers/kestrel) uses HTTP/1.1.</span></span>
  * <span data-ttu-id="940df-542">TLS 1.2-Verbindung oder höher</span><span class="sxs-lookup"><span data-stu-id="940df-542">TLS 1.2 or later connection</span></span>

<span data-ttu-id="940df-543">Für eine In-Process-Bereitstellung, wenn eine HTTP/2-Verbindung hergestellt wurde, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*)-Berichte `HTTP/2`.</span><span class="sxs-lookup"><span data-stu-id="940df-543">For an in-process deployment when an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/2`.</span></span> <span data-ttu-id="940df-544">Für eine Out-of-Process-Bereitstellung. wenn eine HTTP/2-Verbindung hergestellt wurde, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*)-Berichte `HTTP/1.1`.</span><span class="sxs-lookup"><span data-stu-id="940df-544">For an out-of-process deployment when an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/1.1`.</span></span>

<span data-ttu-id="940df-545">Weitere Informationen zu den In-Process- und Out-of-Process-Hostingmodellen finden Sie unter <xref:host-and-deploy/aspnet-core-module>.</span><span class="sxs-lookup"><span data-stu-id="940df-545">For more information on the in-process and out-of-process hosting models, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="940df-546">[HTTP/2](https://httpwg.org/specs/rfc7540.html) wird für Out-of-Process-Bereitstellungen unterstützt, die die folgenden Grundanforderungen erfüllen:</span><span class="sxs-lookup"><span data-stu-id="940df-546">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is supported for out-of-process deployments that meet the following base requirements:</span></span>

* <span data-ttu-id="940df-547">Windows Server 2016/Windows 10 oder höher, IIS 10 oder höher</span><span class="sxs-lookup"><span data-stu-id="940df-547">Windows Server 2016/Windows 10 or later; IIS 10 or later</span></span>
* <span data-ttu-id="940df-548">Öffentlich zugängliche Edge-Server-Verbindungen verwenden HTTP/2, aber die Reverseproxyverbindung mit dem [Kestrel-Server](xref:fundamentals/servers/kestrel) verwendet HTTP/1.1.</span><span class="sxs-lookup"><span data-stu-id="940df-548">Public-facing edge server connections use HTTP/2, but the reverse proxy connection to the [Kestrel server](xref:fundamentals/servers/kestrel) uses HTTP/1.1.</span></span>
* <span data-ttu-id="940df-549">Zielframework: Nicht zutreffend für Out-of-Process-Bereitstellungen, da die HTTP/2-Verbindung vollständig von IIS verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="940df-549">Target framework: Not applicable to out-of-process deployments, since the HTTP/2 connection is handled entirely by IIS.</span></span>
* <span data-ttu-id="940df-550">TLS 1.2-Verbindung oder höher</span><span class="sxs-lookup"><span data-stu-id="940df-550">TLS 1.2 or later connection</span></span>

<span data-ttu-id="940df-551">Wenn eine HTTP/2-Verbindung hergestellt wurde, meldet [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*)`HTTP/1.1`.</span><span class="sxs-lookup"><span data-stu-id="940df-551">If an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/1.1`.</span></span>

::: moniker-end

<span data-ttu-id="940df-552">HTTP/2 ist standardmäßig aktiviert.</span><span class="sxs-lookup"><span data-stu-id="940df-552">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="940df-553">Verbindungen führen ein Fallback auf HTTP/1.1 aus, wenn keine HTTP/2-Verbindung hergestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="940df-553">Connections fall back to HTTP/1.1 if an HTTP/2 connection isn't established.</span></span> <span data-ttu-id="940df-554">Weitere Informationen zur HTTP/2-Konfiguration mit IIS-Bereitstellungen finden Sie unter [HTTP/2 unter IIS](/iis/get-started/whats-new-in-iis-10/http2-on-iis).</span><span class="sxs-lookup"><span data-stu-id="940df-554">For more information on HTTP/2 configuration with IIS deployments, see [HTTP/2 on IIS](/iis/get-started/whats-new-in-iis-10/http2-on-iis).</span></span>

## <a name="cors-preflight-requests"></a><span data-ttu-id="940df-555">CORS-Preflightanforderungen</span><span class="sxs-lookup"><span data-stu-id="940df-555">CORS preflight requests</span></span>

<span data-ttu-id="940df-556">*Dieser Abschnitt gilt nur für ASP.NET Core-Apps, die auf das .NET Framework ausgerichtet sind.*</span><span class="sxs-lookup"><span data-stu-id="940df-556">*This section only applies to ASP.NET Core apps that target the .NET Framework.*</span></span>

<span data-ttu-id="940df-557">Für eine ASP.NET Core-App, die auf das .NET Framework ausgerichtet ist, werden OPTIONS-Anforderungen in IIS standardmäßig nicht an die App übergeben.</span><span class="sxs-lookup"><span data-stu-id="940df-557">For an ASP.NET Core app that targets the .NET Framework, OPTIONS requests aren't passed to the app by default in IIS.</span></span> <span data-ttu-id="940df-558">Informationen dazu, wie Sie die IIS-Handler der App in *web.config* so konfigurieren, dass OPTIONS-Anforderungen übergeben werden, finden Sie unter [Aktivieren ursprungsübergreifender Anforderungen in ASP.NET-Web-API 2: Funktionsweise von CORS](/aspnet/web-api/overview/security/enabling-cross-origin-requests-in-web-api#how-cors-works).</span><span class="sxs-lookup"><span data-stu-id="940df-558">To learn how to configure the app's IIS handlers in *web.config* to pass OPTIONS requests, see [Enable cross-origin requests in ASP.NET Web API 2: How CORS Works](/aspnet/web-api/overview/security/enabling-cross-origin-requests-in-web-api#how-cors-works).</span></span>

::: moniker range=">= aspnetcore-2.2"

## <a name="application-initialization-module-and-idle-timeout"></a><span data-ttu-id="940df-559">Anwendungsinitialisierungsmodul und Leerlauftimeout</span><span class="sxs-lookup"><span data-stu-id="940df-559">Application Initialization Module and Idle Timeout</span></span>

<span data-ttu-id="940df-560">Bei Hosting in IIS durch Version 2 das ASP.NET Core-Moduls:</span><span class="sxs-lookup"><span data-stu-id="940df-560">When hosted in IIS by the ASP.NET Core Module version 2:</span></span>

* <span data-ttu-id="940df-561">[Anwendungsinitialisierungsmodul](#application-initialization-module) &ndash; App-Hostings vom Typ [In-Process](#in-process-hosting-model) oder [Out-of-Process](#out-of-process-hosting-model) können so konfiguriert werden, dass sie automatisch im Rahmen eines Workerprozessneustarts oder eines Serverneustarts gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="940df-561">[Application Initialization Module](#application-initialization-module) &ndash; App's hosted [in-process](#in-process-hosting-model) or [out-of-process](#out-of-process-hosting-model) can be configured to start automatically on a worker process restart or server restart.</span></span>
* <span data-ttu-id="940df-562">[Leerlauftimeout](#idle-timeout) &ndash; App-Hostings vom Typ [In-Process](#in-process-hosting-model) können so konfiguriert werden, dass in Zeiten ohne Aktivität kein Timeout eintritt.</span><span class="sxs-lookup"><span data-stu-id="940df-562">[Idle Timeout](#idle-timeout) &ndash; App's hosted [in-process](#in-process-hosting-model) can be configured not to timeout during periods of inactivity.</span></span>

### <a name="application-initialization-module"></a><span data-ttu-id="940df-563">Anwendungsinitialisierungsmodul</span><span class="sxs-lookup"><span data-stu-id="940df-563">Application Initialization Module</span></span>

<span data-ttu-id="940df-564">*Gilt für In-Process und Out-of-Process gehostete Apps.*</span><span class="sxs-lookup"><span data-stu-id="940df-564">*Applies to apps hosted in-process and out-of-process.*</span></span>

<span data-ttu-id="940df-565">[IIS-Anwendungsinitialisierung](/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization) ist ein IIS-Feature, das eine HTTP-Anforderung an die App sendet, wenn der App-Pool startet oder wiederverwendet wird.</span><span class="sxs-lookup"><span data-stu-id="940df-565">[IIS Application Initialization](/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization) is an IIS feature that sends an HTTP request to the app when the app pool starts or is recycled.</span></span> <span data-ttu-id="940df-566">Die Anforderung löst den Start der App aus.</span><span class="sxs-lookup"><span data-stu-id="940df-566">The request triggers the app to start.</span></span> <span data-ttu-id="940df-567">Standardmäßig gibt IIS eine Anforderung an die Stamm-URL der App (`/`) zum Initialisieren der App aus (weitere Informationen zur Konfiguration finden Sie unter [Zusätzliche Ressourcen](#application-initialization-module-and-idle-timeout-additional-resources)).</span><span class="sxs-lookup"><span data-stu-id="940df-567">By default, IIS issues a request to the app's root URL (`/`) to initialize the app (see the [additional resources](#application-initialization-module-and-idle-timeout-additional-resources) for more details on configuration).</span></span>

<span data-ttu-id="940df-568">Vergewissern Sie sich, dass die IIS-Anwendungsinitialisierungs-Rollenfunktion aktiviert ist:</span><span class="sxs-lookup"><span data-stu-id="940df-568">Confirm that the IIS Application Initialization role feature in enabled:</span></span>

<span data-ttu-id="940df-569">Unter Windows 7 oder höher gilt für Desktopsysteme bei lokaler Verwendung von IIS:</span><span class="sxs-lookup"><span data-stu-id="940df-569">On Windows 7 or later desktop systems when using IIS locally:</span></span>

1. <span data-ttu-id="940df-570">Navigieren Sie zu **Systemsteuerung** > **Programme** > **Programme und Features** > **Windows-Features aktivieren oder deaktivieren** (links auf dem Bildschirm).</span><span class="sxs-lookup"><span data-stu-id="940df-570">Navigate to **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off** (left side of the screen).</span></span>
1. <span data-ttu-id="940df-571">Öffnen Sie **Internetinformationsdienste** > **WWW-Dienste** > **Anwendungsentwicklungsfeatures**.</span><span class="sxs-lookup"><span data-stu-id="940df-571">Open **Internet Information Services** > **World Wide Web Services** > **Application Development Features**.</span></span>
1. <span data-ttu-id="940df-572">Aktivieren Sie das Kontrollkästchen für **Anwendungsinitialisierung**.</span><span class="sxs-lookup"><span data-stu-id="940df-572">Select the check box for **Application Initialization**.</span></span>

<span data-ttu-id="940df-573">Unter Windows Server 2008 R2 oder höher:</span><span class="sxs-lookup"><span data-stu-id="940df-573">On Windows Server 2008 R2 or later:</span></span>

1. <span data-ttu-id="940df-574">Öffnen Sie den **Assistenten zum Hinzufügen von Rollen und Features**.</span><span class="sxs-lookup"><span data-stu-id="940df-574">Open the **Add Roles and Features Wizard**.</span></span>
1. <span data-ttu-id="940df-575">Öffnen Sie im Bereich **Rollendienste auswählen** den Knoten **Anwendungsentwicklung**.</span><span class="sxs-lookup"><span data-stu-id="940df-575">In the **Select role services** panel, open the **Application Development** node.</span></span>
1. <span data-ttu-id="940df-576">Aktivieren Sie das Kontrollkästchen für **Anwendungsinitialisierung**.</span><span class="sxs-lookup"><span data-stu-id="940df-576">Select the check box for **Application Initialization**.</span></span>

<span data-ttu-id="940df-577">Verwenden Sie einen der folgenden Ansätze, um das Anwendungsinitialisierungsmodul für die Website zu aktivieren:</span><span class="sxs-lookup"><span data-stu-id="940df-577">Use either of the following approaches to enable the Application Initialization Module for the site:</span></span>

* <span data-ttu-id="940df-578">Bei Verwenden von IIS-Manager:</span><span class="sxs-lookup"><span data-stu-id="940df-578">Using IIS Manager:</span></span>

  1. <span data-ttu-id="940df-579">Wählen Sie **Anwendungspools** im Bereich **Verbindungen** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-579">Select **Application Pools** in the **Connections** panel.</span></span>
  1. <span data-ttu-id="940df-580">Klicken Sie mit der rechten Maustaste im App-Pool der App in die Liste, und wählen Sie **Erweiterte Einstellungen** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-580">Right-click the app's app pool in the list and select **Advanced Settings**.</span></span>
  1. <span data-ttu-id="940df-581">Der standardmäßige **Startmodus** ist **OnDemand**.</span><span class="sxs-lookup"><span data-stu-id="940df-581">The default **Start Mode** is **OnDemand**.</span></span> <span data-ttu-id="940df-582">Legen Sie den **Startmodus** auf **AlwaysRunning** fest.</span><span class="sxs-lookup"><span data-stu-id="940df-582">Set the **Start Mode** to **AlwaysRunning**.</span></span> <span data-ttu-id="940df-583">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="940df-583">Select **OK**.</span></span>
  1. <span data-ttu-id="940df-584">Öffnen Sie den Knoten **Websites** im Bereich **Verbindungen**.</span><span class="sxs-lookup"><span data-stu-id="940df-584">Open the **Sites** node in the **Connections** panel.</span></span>
  1. <span data-ttu-id="940df-585">Klicken Sie mit der rechten Maustaste zunächst auf die App und dann auf **Website verwalten** > **Erweiterte Einstellungen**.</span><span class="sxs-lookup"><span data-stu-id="940df-585">Right-click the app and select **Manage Website** > **Advanced Settings**.</span></span>
  1. <span data-ttu-id="940df-586">Die Standardeinstellung für **Vorabladen aktiviert** ist **False**.</span><span class="sxs-lookup"><span data-stu-id="940df-586">The default **Preload Enabled** setting is **False**.</span></span> <span data-ttu-id="940df-587">Legen Sie für **Vorabladen aktiviert** **True** fest.</span><span class="sxs-lookup"><span data-stu-id="940df-587">Set **Preload Enabled** to **True**.</span></span> <span data-ttu-id="940df-588">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="940df-588">Select **OK**.</span></span>

* <span data-ttu-id="940df-589">Fügen Sie bei Verwenden von *web.config* das `<applicationInitialization>`-Element hinzu, wobei `doAppInitAfterRestart` auf `true` für die `<system.webServer>`-Elemente in der *web.config*-Datei der App festgelegt ist:</span><span class="sxs-lookup"><span data-stu-id="940df-589">Using *web.config*, add the `<applicationInitialization>` element with `doAppInitAfterRestart` set to `true` to the `<system.webServer>` elements in the app's *web.config* file:</span></span>

  ```xml
  <?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <location path="." inheritInChildApplications="false">
      <system.webServer>
        <applicationInitialization doAppInitAfterRestart="true" />
      </system.webServer>
    </location>
  </configuration>
  ```

### <a name="idle-timeout"></a><span data-ttu-id="940df-590">Leerlauftimeout</span><span class="sxs-lookup"><span data-stu-id="940df-590">Idle Timeout</span></span>

<span data-ttu-id="940df-591">*Gilt nur für In-Process gehostete Apps.*</span><span class="sxs-lookup"><span data-stu-id="940df-591">*Only applies to apps hosted in-process.*</span></span>

<span data-ttu-id="940df-592">Um zu verhindern, dass die App in den Leerlauf wechselt, legen Sie das Leerlauftimeout des App-Pools mit IIS-Manager fest:</span><span class="sxs-lookup"><span data-stu-id="940df-592">To prevent the app from idling, set the app pool's idle timeout using IIS Manager:</span></span>

1. <span data-ttu-id="940df-593">Wählen Sie **Anwendungspools** im Bereich **Verbindungen** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-593">Select **Application Pools** in the **Connections** panel.</span></span>
1. <span data-ttu-id="940df-594">Klicken Sie mit der rechten Maustaste im App-Pool der App in die Liste, und wählen Sie **Erweiterte Einstellungen** aus.</span><span class="sxs-lookup"><span data-stu-id="940df-594">Right-click the app's app pool in the list and select **Advanced Settings**.</span></span>
1. <span data-ttu-id="940df-595">Der Standardwert für **Leerlauftimeout (Minuten)** ist **20** Minuten.</span><span class="sxs-lookup"><span data-stu-id="940df-595">The default **Idle Time-out (minutes)** is **20** minutes.</span></span> <span data-ttu-id="940df-596">Legen Sie **Leerlauftimeout (Minuten)** auf **0** (null) fest.</span><span class="sxs-lookup"><span data-stu-id="940df-596">Set the **Idle Time-out (minutes)** to **0** (zero).</span></span> <span data-ttu-id="940df-597">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="940df-597">Select **OK**.</span></span>
1. <span data-ttu-id="940df-598">Recyceln Sie den Workerprozess.</span><span class="sxs-lookup"><span data-stu-id="940df-598">Recycle the worker process.</span></span>

<span data-ttu-id="940df-599">Um zu verhindern, dass in Apps, die [Out-of-Process](#out-of-process-hosting-model) gehostet werden, ein Timeout auftritt, verwenden Sie einen der folgenden Ansätze:</span><span class="sxs-lookup"><span data-stu-id="940df-599">To prevent apps hosted [out-of-process](#out-of-process-hosting-model) from timing out, use either of the following approaches:</span></span>

* <span data-ttu-id="940df-600">Pingen Sie die App von einem externen Dienst aus, damit sie kontinuierlich ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="940df-600">Ping the app from an external service in order to keep it running.</span></span>
* <span data-ttu-id="940df-601">Wenn die App nur Hintergrunddienste hostet, vermeiden Sie IIS-Hosting, und verwenden Sie einen [Windows-Dienst, um die ASP.NET Core-App zu hosten](xref:host-and-deploy/windows-service).</span><span class="sxs-lookup"><span data-stu-id="940df-601">If the app only hosts background services, avoid IIS hosting and use a [Windows Service to host the ASP.NET Core app](xref:host-and-deploy/windows-service).</span></span>

### <a name="application-initialization-module-and-idle-timeout-additional-resources"></a><span data-ttu-id="940df-602">Zusätzliche Ressourcen für das Anwendungsinitialisierungsmodul und das Leerlauftimeout</span><span class="sxs-lookup"><span data-stu-id="940df-602">Application Initialization Module and Idle Timeout additional resources</span></span>

* [<span data-ttu-id="940df-603">IIS 8.0 Anwendungsinitialisierung</span><span class="sxs-lookup"><span data-stu-id="940df-603">IIS 8.0 Application Initialization</span></span>](/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization)
* <span data-ttu-id="940df-604">[Anwendungsinitialisierung \<applicationInitialization>](/iis/configuration/system.webserver/applicationinitialization/).</span><span class="sxs-lookup"><span data-stu-id="940df-604">[Application Initialization \<applicationInitialization>](/iis/configuration/system.webserver/applicationinitialization/).</span></span>
* <span data-ttu-id="940df-605">[Verarbeiten von Modelleinstellungen für einen Anwendungspool \<ProcessModel>](/iis/configuration/system.applicationhost/applicationpools/add/processmodel).</span><span class="sxs-lookup"><span data-stu-id="940df-605">[Process Model Settings for an Application Pool \<processModel>](/iis/configuration/system.applicationhost/applicationpools/add/processmodel).</span></span>

::: moniker-end

## <a name="deployment-resources-for-iis-administrators"></a><span data-ttu-id="940df-606">Bereitstellungsressourcen für IIS-Administratoren</span><span class="sxs-lookup"><span data-stu-id="940df-606">Deployment resources for IIS administrators</span></span>

* [<span data-ttu-id="940df-607">IIS-Dokumentation</span><span class="sxs-lookup"><span data-stu-id="940df-607">IIS documentation</span></span>](/iis)
* [<span data-ttu-id="940df-608">Erste Schritte mit IIS-Manager in IIS</span><span class="sxs-lookup"><span data-stu-id="940df-608">Getting Started with the IIS Manager in IIS</span></span>](/iis/get-started/getting-started-with-iis/getting-started-with-the-iis-manager-in-iis-7-and-iis-8)
* [<span data-ttu-id="940df-609">.NET Core-Anwendungsbereitstellung</span><span class="sxs-lookup"><span data-stu-id="940df-609">.NET Core application deployment</span></span>](/dotnet/core/deploying/)
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/directory-structure>
* <xref:host-and-deploy/iis/modules>
* <xref:test/troubleshoot-azure-iis>
* <xref:host-and-deploy/azure-iis-errors-reference>

## <a name="additional-resources"></a><span data-ttu-id="940df-610">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="940df-610">Additional resources</span></span>

* <xref:test/troubleshoot>
* <xref:index>
* [<span data-ttu-id="940df-611">Die offizielle Microsoft IIS-Website</span><span class="sxs-lookup"><span data-stu-id="940df-611">The Official Microsoft IIS Site</span></span>](https://www.iis.net/)
* [<span data-ttu-id="940df-612">Bibliothek mit technischem Inhalt zu Windows Server</span><span class="sxs-lookup"><span data-stu-id="940df-612">Windows Server technical content library</span></span>](/windows-server/windows-server)
* [<span data-ttu-id="940df-613">HTTP/2 unter IIS</span><span class="sxs-lookup"><span data-stu-id="940df-613">HTTP/2 on IIS</span></span>](/iis/get-started/whats-new-in-iis-10/http2-on-iis)
* <xref:host-and-deploy/iis/transform-webconfig>
